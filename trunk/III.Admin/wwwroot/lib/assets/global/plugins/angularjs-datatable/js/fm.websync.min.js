
/*
 * Title: WebSync Client for JavaScript
 * Version: 4.8.6
 * Copyright Frozen Mountain Software 2011+
 */

!function(e,t,n){if("function"==typeof define&&define.amd)define(e,t,n);else if("object"==typeof exports){for(var s=0;s<t.length;s++)require("./"+t[s]);module.exports=n()}else this[e]=n()}("fm.websync",["fm"],function(){if("undefined"==typeof global||global.window||(global.window=global,global.document={cookie:""}),!window.fm)throw new Error("fm must be loaded before fm.websync.");window.fm.websync||(window.fm.websync={}),fm.websync.getVersion=function(){return"4.8.6"},fm.websync.connectRetryMode={Aggressive:1,Intelligent:2,None:3,Default:2},fm.websync.concurrencyMode={Low:1,High:2,Default:1},fm.websync.reconnect={Retry:1,Handshake:2,None:3},fm.websync.connectionType={WebSocket:1,LongPolling:2,CallbackPolling:3,IFrame:4,Flash:5,Unknown:99},fm.websync.messageType={Connect:1,Disconnect:2,Bind:3,Unbind:4,Subscribe:5,Unsubscribe:6,Publish:7,Notify:8,Service:9,Stream:10,Unknown:11};var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.backoffArgs=function(n){function s(){return this.setLastTimeout=e(this.setLastTimeout,this),this.setIndex=e(this.setIndex,this),this.getLastTimeout=e(this.getLastTimeout,this),this.getIndex=e(this.getIndex,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._index=0,s.prototype._lastTimeout=0,s.prototype.getIndex=function(){return this._index},s.prototype.getLastTimeout=function(){return this._lastTimeout},s.prototype.setIndex=function(){var e;return e=arguments[0],this._index=e},s.prototype.setLastTimeout=function(){var e;return e=arguments[0],this._lastTimeout=e},s}(fm.object);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.extensible=function(n){function s(){return this.setMeta=e(this.setMeta,this),this.setExtensionValue=e(this.setExtensionValue,this),this.getMeta=e(this.getMeta,this),this.getExtensionValue=e(this.getExtensionValue,this),this.setMetaJson=e(this.setMetaJson,this),this.setExtensionValueJson=e(this.setExtensionValueJson,this),this.setExtensions=e(this.setExtensions,this),this.getMetaJson=e(this.getMetaJson,this),this.getExtensionValueJson=e(this.getExtensionValueJson,this),this.getExtensions=e(this.getExtensions,this),this.getExtensionNames=e(this.getExtensionNames,this),this.getExtensionCount=e(this.getExtensionCount,this),this.copyExtensions=e(this.copyExtensions,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype.__extensions=null,s._acknowledgementExtensionName="fm.ack",s._disableBinaryExtensionName="fm.dbin",s._lastClientIdExtensionName="fm.lcid",s._lastSessionIdExtensionName="fm.lsid",s._metaExtensionName="fm.meta",s._notifyClientIdExtensionName="fm.notify",s._notifyingClientExtensionName="fm.notifying",s._publishingClientExtensionName="fm.publishing",s._serverActionsExtensionName="fm.server",s._serverTimeoutExtensionName="fm.timeout",s._sessionIdExtensionName="fm.sessionId",s._tagExtensionName="fm.tag",s.convertKeyToRecord=function(){var e;return e=arguments[0],new fm.websync.record(e)},s.convertRecordToKey=function(){var e;return e=arguments[0],e.getKey()},s.sharedGetChannel=function(){var e,t;return t=arguments[0],e=t,null===e||"undefined"==typeof e||0===t.length?null:t[0]},s.sharedGetChannels=function(){var e;return e=arguments[0]},s.sharedGetKey=function(){var e,t,n;return n=arguments[0],t=fm.websync.extensible.sharedGetRecord(n),e=t,null===e||"undefined"==typeof e?null:fm.websync.extensible.convertRecordToKey(t)},s.sharedGetKeys=function(){var e,t,n,s,r,i,o;if(o=arguments[0],o=fm.websync.extensible.sharedGetRecords(o),e=o,null===e||"undefined"==typeof e)return null;for(r=[],t=o,n=0,s=t.length;s>n;n++)i=t[n],fm.arrayExtensions.add(r,fm.websync.extensible.convertRecordToKey(i));return fm.arrayExtensions.toArray(r)},s.sharedGetRecord=function(){var e,t;return t=arguments[0],e=t,null===e||"undefined"==typeof e||0===t.length?null:t[0]},s.sharedGetRecords=function(){var e;return e=arguments[0]},s.sharedSetChannel=function(){var e,t,n,s,r,i;if(2===arguments.length){if(s=arguments[0],i=arguments[1],e=s,null===e||"undefined"==typeof e)return null;if(r=null,t=new fm.holder(r),n=fm.websync.extensible.validateChannel(s,t),r=t.getValue(),i&&!n)throw new Error(fm.stringExtensions.format("Invalid channel. {0}",r));return[s]}return 1===arguments.length?(s=arguments[0],fm.websync.extensible.sharedSetChannel(s,!0)):void 0},s.sharedSetChannels=function(){var e,t,n,s,r,i,o,a,u,c;if(2===arguments.length){if(r=arguments[0],c=arguments[1],e=r,null!==e&&"undefined"!=typeof e)for(t=r,o=0,a=t.length;a>o;o++)if(u=t[o],i=null,n=new fm.holder(i),s=fm.websync.extensible.validateChannel(u,n),i=n.getValue(),c&&!s)throw new Error(fm.stringExtensions.format("Invalid channel. {0}",i));return r}return 1===arguments.length?(r=arguments[0],fm.websync.extensible.sharedSetChannels(r,!0)):void 0},s.sharedSetKey=function(){var e,t,n,s,r,i,o;if(2===arguments.length){if(r=arguments[0],o=arguments[1],e=r,null===e||"undefined"==typeof e)return null;if(i=fm.websync.extensible.convertKeyToRecord(r),s=null,t=new fm.holder(s),n=fm.websync.extensible.validateRecord(i,t),s=t.getValue(),o&&!n)throw new Error(fm.stringExtensions.format("Invalid record. {0}",s));return[i]}return 1===arguments.length?(r=arguments[0],fm.websync.extensible.sharedSetKey(r,!0)):void 0},s.sharedSetKeys=function(){var e,t,n,s,r,i,o,a,u,c,l,h;if(1===arguments.length)return o=arguments[0],fm.websync.extensible.sharedSetKeys(o,!0);if(2===arguments.length){if(o=arguments[0],h=arguments[1],e=o,null===e||"undefined"==typeof e)return null;for(u=[],t=o,i=0,a=t.length;a>i;i++){if(l=t[i],c=fm.websync.extensible.convertKeyToRecord(l),r=null,n=new fm.holder(r),s=fm.websync.extensible.validateRecord(c,n),r=n.getValue(),h&&!s)throw new Error(fm.stringExtensions.format("Invalid record. {0}",r));fm.arrayExtensions.add(u,c)}return fm.arrayExtensions.toArray(u)}},s.sharedSetRecord=function(){var e,t,n,s,r;if(2===arguments.length){if(s=arguments[0],r=arguments[1],n=null,e=new fm.holder(n),t=fm.websync.extensible.validateRecord(s,e),n=e.getValue(),r&&!t)throw new Error(fm.stringExtensions.format("Invalid record. {0}",n));return[s]}return 1===arguments.length?(s=arguments[0],fm.websync.extensible.sharedSetRecord(s,!0)):void 0},s.sharedSetRecords=function(){var e,t,n,s,r,i,o,a,u,c;if(2===arguments.length){if(u=arguments[0],c=arguments[1],e=u,null!==e&&"undefined"!=typeof e)for(t=u,i=0,o=t.length;o>i;i++)if(a=t[i],r=null,n=new fm.holder(r),s=fm.websync.extensible.validateRecord(a,n),r=n.getValue(),c&&!s)throw new Error(fm.stringExtensions.format("Invalid record. {0}",r));return u}return 1===arguments.length?(u=arguments[0],fm.websync.extensible.sharedSetRecords(u,!0)):void 0},s.validateChannel=function(){var e,t,n;return t=arguments[0],n=arguments[1],e=t,null===e||"undefined"==typeof e?(n.setValue("Channel is null."),!1):fm.stringExtensions.startsWith(t,"/",fm.stringComparison.Ordinal)?fm.stringExtensions.indexOf(t,"*",fm.stringComparison.Ordinal)>=0?(n.setValue("Channel may not contain asterisks (*)."),!1):fm.websync.metaChannels.isReservedChannel(t)?(n.setValue("Channel is reserved."),!1):(n.setValue(null),!0):(n.setValue("Channel must start with a forward-slash (/)."),!1)},s.validateRecord=function(){var e,t,n;return n=arguments[0],t=arguments[1],e=n,null===e||"undefined"==typeof e?(t.setValue("Record is null."),!1):fm.stringExtensions.isNullOrEmpty(n.getKey())?(t.setValue("Key is null or empty."),!1):(t.setValue(null),!0)},s.prototype.copyExtensions=function(){var e,t,n,s,r,i;for(t=arguments[0],e=t.getExtensionNames(),r=[],n=0,s=e.length;s>n;n++)i=e[n],r.push(this.setExtensionValueJson(i,t.getExtensionValueJson(i),!1));return r},s.prototype.getExtensionCount=function(){return this.getExtensions().getCount()},s.prototype.getExtensionNames=function(){return this.getExtensions().getNames()},s.prototype.getExtensions=function(){var e;return e=this.__extensions,(null===e||"undefined"==typeof e)&&(this.__extensions=new fm.websync.extensions),this.__extensions},s.prototype.getExtensionValueJson=function(){var e;return e=arguments[0],this.getExtensions().getValueJson(e)},s.prototype.getMetaJson=function(){return this.getExtensionValueJson("fm.meta")},s.prototype.setExtensions=function(){var e,t;return t=arguments[0],e=t,null===e||"undefined"==typeof e?this.__extensions=new fm.websync.extensions:this.__extensions=t},s.prototype.setExtensionValueJson=function(){var e,t,n;return 3===arguments.length?(e=arguments[0],n=arguments[1],t=arguments[2],this.getExtensions().setValueJson(e,n,t),void this.setIsDirty(!0)):void(2===arguments.length&&(e=arguments[0],n=arguments[1],this.getExtensions().setValueJson(e,n),this.setIsDirty(!0)))},s.prototype.setMetaJson=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.meta",e)},s.prototype.getExtensionValue=function(){var e;return e=arguments[0],fm.json.deserialize(this.getExtensionValueJson.apply(this,arguments))},s.prototype.getMeta=function(){return fm.json.deserialize(this.getMetaJson.apply(this,arguments))},s.prototype.setExtensionValue=function(){var e,t,n;return 3===arguments.length?(t=arguments[0],n=arguments[1],e=arguments[2],arguments[arguments.length-1]=fm.json.serialize(arguments[arguments.length-1]),void this.setExtensionValueJson.apply(this,arguments)):void(2===arguments.length&&(t=arguments[0],e=arguments[1],arguments[arguments.length-1]=fm.json.serialize(arguments[arguments.length-1]),this.setExtensionValueJson.apply(this,arguments)))},s.prototype.setMeta=function(){var e;return e=arguments[0],arguments[arguments.length-1]=fm.json.serialize(arguments[arguments.length-1]),this.setMetaJson.apply(this,arguments)},s}(fm.dynamic);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.baseInputArgs=function(n){function s(){return this.setSynchronous=e(this.setSynchronous,this),this.setRequestUrl=e(this.setRequestUrl,this),this.setRequestTimeout=e(this.setRequestTimeout,this),this.setIsRetry=e(this.setIsRetry,this),this.getSynchronous=e(this.getSynchronous,this),this.getRequestUrl=e(this.getRequestUrl,this),this.getRequestTimeout=e(this.getRequestTimeout,this),this.getIsRetry=e(this.getIsRetry,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._isRetry=!1,s.prototype._requestTimeout=null,s.prototype._requestUrl=null,s.prototype._synchronous=null,s.prototype.getIsRetry=function(){return this._isRetry},s.prototype.getRequestTimeout=function(){return this._requestTimeout},s.prototype.getRequestUrl=function(){return this._requestUrl},s.prototype.getSynchronous=function(){return this._synchronous},s.prototype.setIsRetry=function(){var e;return e=arguments[0],this._isRetry=e},s.prototype.setRequestTimeout=function(){var e;return e=arguments[0],this._requestTimeout=e},s.prototype.setRequestUrl=function(){var e;return e=arguments[0],this._requestUrl=e},s.prototype.setSynchronous=function(){var e;return e=arguments[0],this._synchronous=e},s}(fm.websync.extensible);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.baseOutputArgs=function(n){function s(){return this.setTimestamp=e(this.setTimestamp,this),this.setClient=e(this.setClient,this),this.getTimestamp=e(this.getTimestamp,this),this.getClient=e(this.getClient,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype.__timestamp=null,s.prototype._client=null,s.prototype.getClient=function(){return this._client},s.prototype.getTimestamp=function(){return this.__timestamp},s.prototype.setClient=function(){var e;return e=arguments[0],this._client=e},s.prototype.setTimestamp=function(){var e;return e=arguments[0],null!==e?this.__timestamp=e:this.__timestamp=null},s}(fm.websync.extensible);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.basePublisherEventArgs=function(n){function s(){return this.setPublisher=e(this.setPublisher,this),this.getPublisher=e(this.getPublisher,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._publisher=null,s.prototype.getPublisher=function(){return this._publisher},s.prototype.setPublisher=function(){var e;return e=arguments[0],this._publisher=e},s}(fm.object);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.basePublisherResponseEventArgs=function(n){function s(){return this.setException=e(this.setException,this),this.getException=e(this.getException,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._exception=null,s.prototype.getException=function(){return this._exception},s.prototype.setException=function(){var e;return e=arguments[0],this._exception=e},s}(fm.websync.basePublisherEventArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.basePublisherResponseEventArgsGeneric=function(n){function s(){return this.setResponses=e(this.setResponses,this),this.setRequests=e(this.setRequests,this),this.getResponses=e(this.getResponses,this),this.getRequests=e(this.getRequests,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._requests=null,s.prototype._responses=null,s.prototype.getRequests=function(){return this._requests},s.prototype.getResponses=function(){return this._responses},s.prototype.setRequests=function(){var e;return e=arguments[0],this._requests=e},s.prototype.setResponses=function(){var e;return e=arguments[0],this._responses=e},s}(fm.websync.basePublisherResponseEventArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.basePublisherRequestEventArgs=function(n){function s(){return this.setCancel=e(this.setCancel,this),this.getCancel=e(this.getCancel,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._cancel=!1,s.prototype.getCancel=function(){return this._cancel},s.prototype.setCancel=function(){var e;return e=arguments[0],this._cancel=e},s}(fm.websync.basePublisherEventArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.basePublisherRequestEventArgsGeneric=function(n){function s(){return this.setRequests=e(this.setRequests,this),this.getRequests=e(this.getRequests,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._requests=null,s.prototype.getRequests=function(){return this._requests},s.prototype.setRequests=function(){var e;return e=arguments[0],this._requests=e},s}(fm.websync.basePublisherRequestEventArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.baseClientEventArgs=function(n){function s(){return this.setClient=e(this.setClient,this),this.getClient=e(this.getClient,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._client=null,s.prototype.getClient=function(){return this._client},s.prototype.setClient=function(){var e;return e=arguments[0],this._client=e},s}(fm.object);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.baseClientEndEventArgs=function(n){function s(){return this.setResponse=e(this.setResponse,this),this.setException=e(this.setException,this),this.getResponse=e(this.getResponse,this),this.getException=e(this.getException,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._exception=null,s.prototype._response=null,s.prototype.getException=function(){return this._exception},s.prototype.getResponse=function(){return this._response},s.prototype.setException=function(){var e;return e=arguments[0],this._exception=e},s.prototype.setResponse=function(){var e;return e=arguments[0],this._response=e},s}(fm.websync.baseClientEventArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.baseClientEndEventArgsGeneric=function(n){function s(){return this.setMethodArgs=e(this.setMethodArgs,this),this.getMethodArgs=e(this.getMethodArgs,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._methodArgs=null,s.prototype.getMethodArgs=function(){return this._methodArgs},s.prototype.setMethodArgs=function(){var e;return e=arguments[0],this._methodArgs=e},s}(fm.websync.baseClientEndEventArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.baseClientResponseEventArgs=function(n){function s(){return this.setResponse=e(this.setResponse,this),this.setException=e(this.setException,this),this.getResponse=e(this.getResponse,this),this.getException=e(this.getException,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._exception=null,s.prototype._response=null,s.prototype.getException=function(){return this._exception},s.prototype.getResponse=function(){return this._response},s.prototype.setException=function(){var e;return e=arguments[0],this._exception=e},s.prototype.setResponse=function(){var e;return e=arguments[0],this._response=e},s}(fm.websync.baseClientEventArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.baseClientResponseEventArgsGeneric=function(n){function s(){return this.setMethodArgs=e(this.setMethodArgs,this),this.getMethodArgs=e(this.getMethodArgs,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._methodArgs=null,s.prototype.getMethodArgs=function(){return this._methodArgs},s.prototype.setMethodArgs=function(){var e;return e=arguments[0],this._methodArgs=e},s}(fm.websync.baseClientResponseEventArgs);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientNotifyResponseArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientResponseEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.baseServerArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseOutputArgs);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.baseSuccessArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseOutputArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.baseReceiveArgs=function(n){function s(){this.getData=e(this.getData,this),this.setReconnectAfter=e(this.setReconnectAfter,this),this.getTag=e(this.getTag,this),this.getReconnectAfter=e(this.getReconnectAfter,this),this.getIsBinary=e(this.getIsBinary,this),this.getDataJson=e(this.getDataJson,this),this.getDataBytes=e(this.getDataBytes,this),this.getConnectionType=e(this.getConnectionType,this);var t,n,r,i;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):(r=arguments[0],n=arguments[1],t=arguments[2],i=arguments[3],s.__super__.constructor.call(this),this.__dataJson=r,this.__dataBytes=n,this.__connectionType=t,void this.setReconnectAfter(i))}return t(s,n),s.prototype.__connectionType=null,s.prototype.__dataBytes=null,s.prototype.__dataJson=null,s.prototype._reconnectAfter=0,s.prototype.getConnectionType=function(){return this.__connectionType},s.prototype.getDataBytes=function(){var e,t,n,s,r,i;return r=this.__dataBytes,i=this.__dataJson,e=r,null!==e&&"undefined"!=typeof e?r:(t=i,null!==t&&"undefined"!=typeof t?(n=new fm.holder(r),s=fm.crypto.tryBase64Decode(fm.serializer.deserializeString(i),n),r=n.getValue(),s||(r=null),this.__dataBytes=r,r):null)},s.prototype.getDataJson=function(){var e,t,n,s;return s=this.__dataJson,n=this.__dataBytes,e=s,null!==e&&"undefined"!=typeof e?s:(t=n,null!==t&&"undefined"!=typeof t?(s=fm.serializer.serializeString(fm.crypto.base64Encode(n)),this.__dataJson=s,s):null)},s.prototype.getIsBinary=function(){var e;return e=this.getDataBytes(),null!==e&&"undefined"!=typeof e},s.prototype.getReconnectAfter=function(){return this._reconnectAfter},s.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"))},s.prototype.setReconnectAfter=function(){var e;return e=arguments[0],this._reconnectAfter=e},s.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments))},s}(fm.websync.baseSuccessArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.baseClientRequestEventArgs=function(n){function s(){return this.setCancel=e(this.setCancel,this),this.getCancel=e(this.getCancel,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._cancel=!1,s.prototype.getCancel=function(){return this._cancel},s.prototype.setCancel=function(){var e;return e=arguments[0],this._cancel=e},s}(fm.websync.baseClientEventArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.baseClientRequestEventArgsGeneric=function(n){function s(){return this.setMethodArgs=e(this.setMethodArgs,this),this.getMethodArgs=e(this.getMethodArgs,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._methodArgs=null,s.prototype.getMethodArgs=function(){return this._methodArgs},s.prototype.setMethodArgs=function(){var e;return e=arguments[0],this._methodArgs=e},s}(fm.websync.baseClientRequestEventArgs);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientNotifyRequestArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientRequestEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientSubscribeEndArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientEndEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientBindEndArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientEndEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientConnectEndArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientEndEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientDisconnectEndArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientEndEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientNotifyEndArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientEndEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientPublishEndArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientEndEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientServiceEndArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientEndEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientUnbindEndArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientEndEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientUnsubscribeEndArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this);
}return t(n,e),n}(fm.websync.baseClientEndEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.stateRestoredArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseSuccessArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.notifyReceiveArgs=function(n){function s(){this.getWasSentByMe=e(this.getWasSentByMe,this),this.getNotifyingClient=e(this.getNotifyingClient,this);var t,n,r,i;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):(r=arguments[0],n=arguments[1],t=arguments[2],i=arguments[3],void s.__super__.constructor.call(this,r,n,t,i))}return t(s,n),s.prototype.getNotifyingClient=function(){return fm.websync.notifyingClient.fromJson(this.getExtensionValueJson("fm.notifying"))},s.prototype.getWasSentByMe=function(){var e,t,n;return e=this.getNotifyingClient(),t=this.getClient(),n=this.getNotifyingClient().getClientId(),null!==e&&"undefined"!=typeof e&&null!==t&&"undefined"!=typeof t&&null!==this.getNotifyingClient().getClientId()&&(null===n?n===this.getClient().getClientId():n.equals(this.getClient().getClientId()))},s}(fm.websync.baseReceiveArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.serverSubscribeArgs=function(n){function s(){return this.getTag=e(this.getTag,this),this.getChannels=e(this.getChannels,this),this.getChannel=e(this.getChannel,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype.__channels=null,s.prototype.getChannel=function(){return fm.websync.extensible.sharedGetChannel(this.__channels)},s.prototype.getChannels=function(){return fm.websync.extensible.sharedGetChannels(this.__channels)},s.prototype.getTag=function(){var e;return null!=(e=fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag")))?e:fm.stringExtensions.empty},s}(fm.websync.baseSuccessArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.serverUnsubscribeArgs=function(n){function s(){return this.getTag=e(this.getTag,this),this.getChannels=e(this.getChannels,this),this.getChannel=e(this.getChannel,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype.__channels=null,s.prototype.getChannel=function(){return fm.websync.extensible.sharedGetChannel(this.__channels)},s.prototype.getChannels=function(){return fm.websync.extensible.sharedGetChannels(this.__channels)},s.prototype.getTag=function(){var e;return null!=(e=fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag")))?e:fm.stringExtensions.empty},s}(fm.websync.baseSuccessArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.serverUnbindArgs=function(n){function s(){return this.getRecords=e(this.getRecords,this),this.getRecord=e(this.getRecord,this),this.getKeys=e(this.getKeys,this),this.getKey=e(this.getKey,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype.__records=null,s.prototype.getKey=function(){return fm.websync.extensible.sharedGetKey(this.__records)},s.prototype.getKeys=function(){return fm.websync.extensible.sharedGetKeys(this.__records)},s.prototype.getRecord=function(){return fm.websync.extensible.sharedGetRecord(this.__records)},s.prototype.getRecords=function(){return fm.websync.extensible.sharedGetRecords(this.__records)},s}(fm.websync.baseSuccessArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.serverBindArgs=function(n){function s(){return this.getRecords=e(this.getRecords,this),this.getRecord=e(this.getRecord,this),this.getKeys=e(this.getKeys,this),this.getKey=e(this.getKey,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype.__records=null,s.prototype.getKey=function(){return fm.websync.extensible.sharedGetKey(this.__records)},s.prototype.getKeys=function(){return fm.websync.extensible.sharedGetKeys(this.__records)},s.prototype.getRecord=function(){return fm.websync.extensible.sharedGetRecord(this.__records)},s.prototype.getRecords=function(){return fm.websync.extensible.sharedGetRecords(this.__records)},s}(fm.websync.baseServerArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.messageRequestCreatedArgs=function(n){function s(){return this.setSender=e(this.setSender,this),this.setRequests=e(this.setRequests,this),this.getSender=e(this.getSender,this),this.getRequests=e(this.getRequests,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._requests=null,s.prototype._sender=null,s.prototype.getRequests=function(){return this._requests},s.prototype.getSender=function(){return this._sender},s.prototype.setRequests=function(){var e;return e=arguments[0],this._requests=e},s.prototype.setSender=function(){var e;return e=arguments[0],this._sender=e},s}(fm.object);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.messageResponseReceivedArgs=function(n){function s(){return this.setSender=e(this.setSender,this),this.setResponses=e(this.setResponses,this),this.getSender=e(this.getSender,this),this.getResponses=e(this.getResponses,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._responses=null,s.prototype._sender=null,s.prototype.getResponses=function(){return this._responses},s.prototype.getSender=function(){return this._sender},s.prototype.setResponses=function(){var e;return e=arguments[0],this._responses=e},s.prototype.setSender=function(){var e;return e=arguments[0],this._sender=e},s}(fm.object);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.messageRequestArgs=function(n){function s(){this.setUrl=e(this.setUrl,this),this.setTimeout=e(this.setTimeout,this),this.setSender=e(this.setSender,this),this.setOnResponseReceived=e(this.setOnResponseReceived,this),this.setOnRequestCreated=e(this.setOnRequestCreated,this),this.setOnHttpResponseReceived=e(this.setOnHttpResponseReceived,this),this.setOnHttpRequestCreated=e(this.setOnHttpRequestCreated,this),this.setMessages=e(this.setMessages,this),this.setHeaders=e(this.setHeaders,this),this.getUrl=e(this.getUrl,this),this.getTimeout=e(this.getTimeout,this),this.getSender=e(this.getSender,this),this.getOnResponseReceived=e(this.getOnResponseReceived,this),this.getOnRequestCreated=e(this.getOnRequestCreated,this),this.getOnHttpResponseReceived=e(this.getOnHttpResponseReceived,this),this.getOnHttpRequestCreated=e(this.getOnHttpRequestCreated,this),this.getMessages=e(this.getMessages,this),this.getIsBinary=e(this.getIsBinary,this),this.getHeaders=e(this.getHeaders,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),this.setTimeout(15e3),void fm.util.attachProperties(this,arguments[0])):0===arguments.length?(s.__super__.constructor.call(this),void this.setTimeout(15e3)):1===arguments.length?(t=arguments[0],s.call(this),void this.setHeaders(t)):void 0}return t(s,n),s.prototype._headers=null,s.prototype._messages=null,s.prototype._onHttpRequestCreated=null,s.prototype._onHttpResponseReceived=null,s.prototype._onRequestCreated=null,s.prototype._onResponseReceived=null,s.prototype._sender=null,s.prototype._timeout=0,s.prototype._url=null,s.prototype.getHeaders=function(){return this._headers},s.prototype.getIsBinary=function(){var e,t,n,s;for(e=this.getMessages(),t=0,n=e.length;n>t;t++)if(s=e[t],s.getDisableBinary()===!0||!s.getIsBinary())return!1;return!0},s.prototype.getMessages=function(){return this._messages},s.prototype.getOnHttpRequestCreated=function(){return this._onHttpRequestCreated},s.prototype.getOnHttpResponseReceived=function(){return this._onHttpResponseReceived},s.prototype.getOnRequestCreated=function(){return this._onRequestCreated},s.prototype.getOnResponseReceived=function(){return this._onResponseReceived},s.prototype.getSender=function(){return this._sender},s.prototype.getTimeout=function(){return this._timeout},s.prototype.getUrl=function(){return this._url},s.prototype.setHeaders=function(){var e;return e=arguments[0],this._headers=e},s.prototype.setMessages=function(){var e;return e=arguments[0],this._messages=e},s.prototype.setOnHttpRequestCreated=function(){var e;return e=arguments[0],this._onHttpRequestCreated=e},s.prototype.setOnHttpResponseReceived=function(){var e;return e=arguments[0],this._onHttpResponseReceived=e},s.prototype.setOnRequestCreated=function(){var e;return e=arguments[0],this._onRequestCreated=e},s.prototype.setOnResponseReceived=function(){var e;return e=arguments[0],this._onResponseReceived=e},s.prototype.setSender=function(){var e;return e=arguments[0],this._sender=e},s.prototype.setTimeout=function(){var e;return e=arguments[0],this._timeout=e},s.prototype.setUrl=function(){var e;return e=arguments[0],this._url=e},s}(fm.dynamic);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.messageResponseArgs=function(n){function s(){this.setRequestArgs=e(this.setRequestArgs,this),this.setMessages=e(this.setMessages,this),this.setHeaders=e(this.setHeaders,this),this.setException=e(this.setException,this),this.getRequestArgs=e(this.getRequestArgs,this),this.getMessages=e(this.getMessages,this),this.getHeaders=e(this.getHeaders,this),this.getException=e(this.getException,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):(t=arguments[0],s.__super__.constructor.call(this),void this.setRequestArgs(t))}return t(s,n),s.prototype._exception=null,s.prototype._headers=null,s.prototype._messages=null,s.prototype._requestArgs=null,s.prototype.getException=function(){return this._exception},s.prototype.getHeaders=function(){return this._headers},s.prototype.getMessages=function(){return this._messages},s.prototype.getRequestArgs=function(){return this._requestArgs},s.prototype.setException=function(){var e;return e=arguments[0],this._exception=e},s.prototype.setHeaders=function(){var e;return e=arguments[0],this._headers=e},s.prototype.setMessages=function(){var e;return e=arguments[0],this._messages=e},s.prototype.setRequestArgs=function(){var e;return e=arguments[0],this._requestArgs=e},s}(fm.dynamic);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.notifyArgs=function(n){function s(){this.setData=e(this.setData,this),this.getData=e(this.getData,this),this.setTag=e(this.setTag,this),this.setOnSuccess=e(this.setOnSuccess,this),this.setOnFailure=e(this.setOnFailure,this),this.setOnComplete=e(this.setOnComplete,this),this.setDataJson=e(this.setDataJson,this),this.setDataBytes=e(this.setDataBytes,this),this.setClientId=e(this.setClientId,this),this.getTag=e(this.getTag,this),this.getOnSuccess=e(this.getOnSuccess,this),this.getOnFailure=e(this.getOnFailure,this),this.getOnComplete=e(this.getOnComplete,this),this.getIsBinary=e(this.getIsBinary,this),this.getDataJson=e(this.getDataJson,this),this.getDataBytes=e(this.getDataBytes,this),this.getClientId=e(this.getClientId,this);var t,n,r;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):3===arguments.length?(t=arguments[0],n=arguments[1],r=arguments[2],s.__super__.constructor.call(this),this.setClientId(t),this.setDataJson(n),void this.setTag(r)):2===arguments.length?(t=arguments[0],n=arguments[1],void s.call(this,t,n,null)):void 0}return t(s,n),s.prototype.__dataBytes=null,s.prototype.__dataJson=null,s.prototype._onComplete=null,s.prototype._onFailure=null,s.prototype._onSuccess=null,s.prototype.getClientId=function(){var e;return e=fm.serializer.deserializeGuid(this.getExtensionValueJson("fm.notify")),null!==e?e:fm.guid.empty},s.prototype.getDataBytes=function(){var e,t,n,s,r,i;return r=this.__dataBytes,i=this.__dataJson,e=r,null!==e&&"undefined"!=typeof e?r:(t=i,null!==t&&"undefined"!=typeof t?(n=new fm.holder(r),s=fm.crypto.tryBase64Decode(fm.serializer.deserializeString(i),n),r=n.getValue(),s||(r=null),this.__dataBytes=r,r):null)},s.prototype.getDataJson=function(){var e,t,n,s;return s=this.__dataJson,n=this.__dataBytes,e=s,null!==e&&"undefined"!=typeof e?s:(t=n,null!==t&&"undefined"!=typeof t?(s=fm.serializer.serializeString(fm.crypto.base64Encode(n)),this.__dataJson=s,s):null)},s.prototype.getIsBinary=function(){var e;return e=this.getDataBytes(),null!==e&&"undefined"!=typeof e},s.prototype.getOnComplete=function(){return this._onComplete},s.prototype.getOnFailure=function(){return this._onFailure},s.prototype.getOnSuccess=function(){return this._onSuccess},s.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"))},s.prototype.setClientId=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.notify",fm.serializer.serializeGuid(e),!1)},s.prototype.setDataBytes=function(){var e;return e=arguments[0],this.__dataJson=null,this.__dataBytes=e},s.prototype.setDataJson=function(){var e,t;if(t=arguments[0],e=t,null!==e&&"undefined"!=typeof e&&!fm.serializer.isValidJson(t))throw new Error("The value is not valid JSON.");return this.__dataJson=t,this.__dataBytes=null},s.prototype.setOnComplete=function(){var e;return e=arguments[0],this._onComplete=e},s.prototype.setOnFailure=function(){var e;return e=arguments[0],this._onFailure=e},s.prototype.setOnSuccess=function(){var e;return e=arguments[0],this._onSuccess=e},s.prototype.setTag=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.tag",fm.serializer.serializeString(e),!1)},s.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments))},s.prototype.setData=function(){var e;return e=arguments[0],arguments[arguments.length-1]=fm.json.serialize(arguments[arguments.length-1]),this.setDataJson.apply(this,arguments)},s}(fm.websync.baseInputArgs);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.baseCompleteArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseOutputArgs);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.notifyCompleteArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseCompleteArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.baseFailureArgs=function(n){function s(){return this.setRetry=e(this.setRetry,this),this.setException=e(this.setException,this),this.getRetry=e(this.getRetry,this),this.getException=e(this.getException,this),this.getErrorMessage=e(this.getErrorMessage,this),this.getErrorCode=e(this.getErrorCode,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._exception=null,s.prototype._retry=!1,s.getErrorCode=function(){var e,t,n,s,r,i,o,a;r=arguments[0],i=-1;try{if(e=r,null===e||"undefined"==typeof e||fm.stringExtensions.isNullOrEmpty(r.message))return i;if(fm.stringExtensions.indexOf(r.message,"::")<=-1)return i;a=fm.splitter.split(r.message,"::")[0],t=new fm.holder(i),n=fm.parseAssistant.tryParseIntegerValue(a,t),i=t.getValue(),n||(i=-1)}catch(s){o=s}finally{}return i},s.getErrorMessage=function(){var e,t,n,s,r;n=arguments[0],s=null;try{if(e=n,null===e||"undefined"==typeof e||fm.stringExtensions.isNullOrEmpty(n.message))return s;if(fm.stringExtensions.indexOf(n.message,"::")>-1)return fm.splitter.split(n.message,"::")[1];s=n.message}catch(t){r=t}finally{}return s},s.prototype.getErrorCode=function(){return fm.websync.baseFailureArgs.getErrorCode(this.getException())},s.prototype.getErrorMessage=function(){return fm.websync.baseFailureArgs.getErrorMessage(this.getException())},s.prototype.getException=function(){return this._exception},s.prototype.getRetry=function(){return this._retry},s.prototype.setException=function(){var e;return e=arguments[0],this._exception=e},s.prototype.setRetry=function(){var e;return e=arguments[0],this._retry=e},s}(fm.websync.baseOutputArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.notifyFailureArgs=function(n){function s(){return this.getData=e(this.getData,this),this.getTag=e(this.getTag,this),this.getIsBinary=e(this.getIsBinary,this),this.getDataJson=e(this.getDataJson,this),this.getDataBytes=e(this.getDataBytes,this),this.getClientId=e(this.getClientId,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype.__dataBytes=null,s.prototype.__dataJson=null,s.prototype.getClientId=function(){var e;return e=fm.serializer.deserializeGuid(this.getExtensionValueJson("fm.notify")),null!==e?e:fm.guid.empty},s.prototype.getDataBytes=function(){var e,t,n,s,r,i;return r=this.__dataBytes,i=this.__dataJson,e=r,null!==e&&"undefined"!=typeof e?r:(t=i,null!==t&&"undefined"!=typeof t?(n=new fm.holder(r),s=fm.crypto.tryBase64Decode(fm.serializer.deserializeString(i),n),r=n.getValue(),s||(r=null),this.__dataBytes=r,r):null)},s.prototype.getDataJson=function(){var e,t,n,s;return s=this.__dataJson,n=this.__dataBytes,e=s,null!==e&&"undefined"!=typeof e?s:(t=n,null!==t&&"undefined"!=typeof t?(s=fm.serializer.serializeString(fm.crypto.base64Encode(n)),this.__dataJson=s,s):null)},s.prototype.getIsBinary=function(){var e;return e=this.getDataBytes(),null!==e&&"undefined"!=typeof e},s.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"))},s.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments))},s}(fm.websync.baseFailureArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.notifySuccessArgs=function(n){function s(){return this.getData=e(this.getData,this),this.getTag=e(this.getTag,this),this.getIsBinary=e(this.getIsBinary,this),this.getDataJson=e(this.getDataJson,this),this.getDataBytes=e(this.getDataBytes,this),this.getClientId=e(this.getClientId,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype.__dataBytes=null,s.prototype.__dataJson=null,s.prototype.getClientId=function(){var e;return e=fm.serializer.deserializeGuid(this.getExtensionValueJson("fm.notify")),null!==e?e:fm.guid.empty},s.prototype.getDataBytes=function(){var e,t,n,s,r,i;return r=this.__dataBytes,i=this.__dataJson,e=r,null!==e&&"undefined"!=typeof e?r:(t=i,null!==t&&"undefined"!=typeof t?(n=new fm.holder(r),s=fm.crypto.tryBase64Decode(fm.serializer.deserializeString(i),n),r=n.getValue(),s||(r=null),this.__dataBytes=r,r):null)},s.prototype.getDataJson=function(){var e,t,n,s;return s=this.__dataJson,n=this.__dataBytes,e=s,null!==e&&"undefined"!=typeof e?s:(t=n,null!==t&&"undefined"!=typeof t?(s=fm.serializer.serializeString(fm.crypto.base64Encode(n)),this.__dataJson=s,s):null)},s.prototype.getIsBinary=function(){var e;return e=this.getDataBytes(),null!==e&&"undefined"!=typeof e},s.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"))},s.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments))},s}(fm.websync.baseSuccessArgs);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.publisherNotifyResponseArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.basePublisherResponseEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.publisherNotifyRequestArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.basePublisherRequestEventArgsGeneric);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.unhandledExceptionArgs=function(n){function s(){return this.setHandled=e(this.setHandled,this),this.getHandled=e(this.getHandled,this),this.getException=e(this.getException,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype.__exception=null,s.prototype._handled=!1,s.prototype.getException=function(){return this.__exception},s.prototype.getHandled=function(){return this._handled},s.prototype.setHandled=function(){var e;return e=arguments[0],this._handled=e},s}(fm.object);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientResponseArgs=function(n){function s(){return this.setResponses=e(this.setResponses,this),this.setResponse=e(this.setResponse,this),this.setException=e(this.setException,this),this.getResponses=e(this.getResponses,this),this.getResponse=e(this.getResponse,this),this.getException=e(this.getException,this),this.getErrorMessage=e(this.getErrorMessage,this),this.getErrorCode=e(this.getErrorCode,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._exception=null,s.prototype._responses=null,s.prototype.getErrorCode=function(){return fm.websync.baseFailureArgs.getErrorCode(this.getException())},s.prototype.getErrorMessage=function(){return fm.websync.baseFailureArgs.getErrorMessage(this.getException())},s.prototype.getException=function(){return this._exception},s.prototype.getResponse=function(){var e;return e=this.getResponses(),null===e||"undefined"==typeof e||0===this.getResponses().length?null:this.getResponses()[0]},s.prototype.getResponses=function(){return this._responses},s.prototype.setException=function(){var e;return e=arguments[0],this._exception=e},s.prototype.setResponse=function(){var e;return e=arguments[0],this.setResponses([e])},s.prototype.setResponses=function(){var e;return e=arguments[0],this._responses=e},s}(fm.dynamic);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.connectArgs=function(n){function s(){return this.setRetryMode=e(this.setRetryMode,this),this.setRetryBackoff=e(this.setRetryBackoff,this),this.setOnSuccess=e(this.setOnSuccess,this),this.setOnStreamFailure=e(this.setOnStreamFailure,this),this.setOnStateRestored=e(this.setOnStateRestored,this),this.setOnFailure=e(this.setOnFailure,this),this.setOnComplete=e(this.setOnComplete,this),this.setLastSessionId=e(this.setLastSessionId,this),this.setLastClientId=e(this.setLastClientId,this),this.setIsReconnect=e(this.setIsReconnect,this),this.getRetryMode=e(this.getRetryMode,this),this.getRetryBackoff=e(this.getRetryBackoff,this),this.getOnSuccess=e(this.getOnSuccess,this),this.getOnStreamFailure=e(this.getOnStreamFailure,this),this.getOnStateRestored=e(this.getOnStateRestored,this),this.getOnFailure=e(this.getOnFailure,this),this.getOnComplete=e(this.getOnComplete,this),this.getLastSessionId=e(this.getLastSessionId,this),this.getLastClientId=e(this.getLastClientId,this),this.getIsReconnect=e(this.getIsReconnect,this),this.defaultRetryBackoff=e(this.defaultRetryBackoff,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),this._defaultRetryBackoffTimeout=500,this.setRetryMode(fm.websync.connectRetryMode.Intelligent),this.setRetryBackoff(this.defaultRetryBackoff),void fm.util.attachProperties(this,arguments[0])):(s.__super__.constructor.call(this),this._defaultRetryBackoffTimeout=500,this.setRetryMode(fm.websync.connectRetryMode.Intelligent),void this.setRetryBackoff(this.defaultRetryBackoff))}return t(s,n),s.prototype._defaultRetryBackoffTimeout=0,s.prototype._isReconnect=!1,s.prototype._lastClientId=null,s.prototype._lastSessionId=null,s.prototype._onComplete=null,s.prototype._onFailure=null,s.prototype._onStateRestored=null,s.prototype._onStreamFailure=null,s.prototype._onSuccess=null,s.prototype._retryBackoff=null,s.prototype._retryMode=null,s.prototype.defaultRetryBackoff=function(){var e;return e=arguments[0],0===e.getIndex()?this._defaultRetryBackoffTimeout:2*e.getLastTimeout()},s.prototype.getIsReconnect=function(){return this._isReconnect},s.prototype.getLastClientId=function(){return this._lastClientId},s.prototype.getLastSessionId=function(){return this._lastSessionId},s.prototype.getOnComplete=function(){return this._onComplete},s.prototype.getOnFailure=function(){return this._onFailure},s.prototype.getOnStateRestored=function(){return this._onStateRestored},s.prototype.getOnStreamFailure=function(){return this._onStreamFailure},s.prototype.getOnSuccess=function(){return this._onSuccess},s.prototype.getRetryBackoff=function(){return this._retryBackoff},s.prototype.getRetryMode=function(){return this._retryMode},s.prototype.setIsReconnect=function(){var e;return e=arguments[0],this._isReconnect=e},s.prototype.setLastClientId=function(){var e;return e=arguments[0],this._lastClientId=e},s.prototype.setLastSessionId=function(){var e;return e=arguments[0],this._lastSessionId=e},s.prototype.setOnComplete=function(){var e;return e=arguments[0],this._onComplete=e},s.prototype.setOnFailure=function(){var e;return e=arguments[0],this._onFailure=e},s.prototype.setOnStateRestored=function(){var e;return e=arguments[0],this._onStateRestored=e},s.prototype.setOnStreamFailure=function(){var e;return e=arguments[0],this._onStreamFailure=e},s.prototype.setOnSuccess=function(){var e;return e=arguments[0],this._onSuccess=e},s.prototype.setRetryBackoff=function(){var e;return e=arguments[0],this._retryBackoff=e},s.prototype.setRetryMode=function(){var e;return e=arguments[0],this._retryMode=e},s}(fm.websync.baseInputArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.bindArgs=function(n){function s(){this.setRecords=e(this.setRecords,this),this.setRecord=e(this.setRecord,this),this.setOnSuccess=e(this.setOnSuccess,this),this.setOnFailure=e(this.setOnFailure,this),this.setOnComplete=e(this.setOnComplete,this),this.setIsRebind=e(this.setIsRebind,this),this.setAutoRebind=e(this.setAutoRebind,this),this.getRecords=e(this.getRecords,this),this.getRecord=e(this.getRecord,this),this.getOnSuccess=e(this.getOnSuccess,this),this.getOnFailure=e(this.getOnFailure,this),this.getOnComplete=e(this.getOnComplete,this),this.getIsRebind=e(this.getIsRebind,this),this.getAutoRebind=e(this.getAutoRebind,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),
void fm.util.attachProperties(this,arguments[0])):(t=arguments[0],s.__super__.constructor.call(this),void this.setRecords(t))}return t(s,n),s.prototype.__records=null,s.prototype._autoRebind=null,s.prototype._isRebind=!1,s.prototype._onComplete=null,s.prototype._onFailure=null,s.prototype._onSuccess=null,s.prototype.getAutoRebind=function(){return this._autoRebind},s.prototype.getIsRebind=function(){return this._isRebind},s.prototype.getOnComplete=function(){return this._onComplete},s.prototype.getOnFailure=function(){return this._onFailure},s.prototype.getOnSuccess=function(){return this._onSuccess},s.prototype.getRecord=function(){return fm.websync.extensible.sharedGetRecord(this.__records)},s.prototype.getRecords=function(){return fm.websync.extensible.sharedGetRecords(this.__records)},s.prototype.setAutoRebind=function(){var e;return e=arguments[0],this._autoRebind=e},s.prototype.setIsRebind=function(){var e;return e=arguments[0],this._isRebind=e},s.prototype.setOnComplete=function(){var e;return e=arguments[0],this._onComplete=e},s.prototype.setOnFailure=function(){var e;return e=arguments[0],this._onFailure=e},s.prototype.setOnSuccess=function(){var e;return e=arguments[0],this._onSuccess=e},s.prototype.setRecord=function(){var e;return e=arguments[0],this.__records=fm.websync.extensible.sharedSetRecord(e)},s.prototype.setRecords=function(){var e;return e=arguments[0],this.__records=fm.websync.extensible.sharedSetRecords(e)},s}(fm.websync.baseInputArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.serviceArgs=function(n){function s(){this.setData=e(this.setData,this),this.getData=e(this.getData,this),this.setTag=e(this.setTag,this),this.setOnSuccess=e(this.setOnSuccess,this),this.setOnFailure=e(this.setOnFailure,this),this.setOnComplete=e(this.setOnComplete,this),this.setDataJson=e(this.setDataJson,this),this.setDataBytes=e(this.setDataBytes,this),this.setChannel=e(this.setChannel,this),this.getTag=e(this.getTag,this),this.getOnSuccess=e(this.getOnSuccess,this),this.getOnFailure=e(this.getOnFailure,this),this.getOnComplete=e(this.getOnComplete,this),this.getIsBinary=e(this.getIsBinary,this),this.getDataJson=e(this.getDataJson,this),this.getDataBytes=e(this.getDataBytes,this),this.getChannel=e(this.getChannel,this);var t,n,r;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):3===arguments.length?(t=arguments[0],n=arguments[1],r=arguments[2],s.__super__.constructor.call(this),this.setChannel(t),this.setDataJson(n),void this.setTag(r)):2===arguments.length?(t=arguments[0],n=arguments[1],void s.call(this,t,n,null)):void 0}return t(s,n),s.prototype.__channel=null,s.prototype.__dataBytes=null,s.prototype.__dataJson=null,s.prototype._onComplete=null,s.prototype._onFailure=null,s.prototype._onSuccess=null,s.prototype.getChannel=function(){return this.__channel},s.prototype.getDataBytes=function(){var e,t,n,s,r,i;return r=this.__dataBytes,i=this.__dataJson,e=r,null!==e&&"undefined"!=typeof e?r:(t=i,null!==t&&"undefined"!=typeof t?(n=new fm.holder(r),s=fm.crypto.tryBase64Decode(fm.serializer.deserializeString(i),n),r=n.getValue(),s||(r=null),this.__dataBytes=r,r):null)},s.prototype.getDataJson=function(){var e,t,n,s;return s=this.__dataJson,n=this.__dataBytes,e=s,null!==e&&"undefined"!=typeof e?s:(t=n,null!==t&&"undefined"!=typeof t?(s=fm.serializer.serializeString(fm.crypto.base64Encode(n)),this.__dataJson=s,s):null)},s.prototype.getIsBinary=function(){var e;return e=this.getDataBytes(),null!==e&&"undefined"!=typeof e},s.prototype.getOnComplete=function(){return this._onComplete},s.prototype.getOnFailure=function(){return this._onFailure},s.prototype.getOnSuccess=function(){return this._onSuccess},s.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"))},s.prototype.setChannel=function(){var e,t,n,s;if(s=arguments[0],n=null,e=new fm.holder(n),t=fm.websync.extensible.validateChannel(s,e),n=e.getValue(),!t)throw new Error(fm.stringExtensions.format("Invalid channel. {0}",n));return this.__channel=s},s.prototype.setDataBytes=function(){var e;return e=arguments[0],this.__dataJson=null,this.__dataBytes=e},s.prototype.setDataJson=function(){var e,t;if(t=arguments[0],e=t,null!==e&&"undefined"!=typeof e&&!fm.serializer.isValidJson(t))throw new Error("The value is not valid JSON.");return this.__dataJson=t,this.__dataBytes=null},s.prototype.setOnComplete=function(){var e;return e=arguments[0],this._onComplete=e},s.prototype.setOnFailure=function(){var e;return e=arguments[0],this._onFailure=e},s.prototype.setOnSuccess=function(){var e;return e=arguments[0],this._onSuccess=e},s.prototype.setTag=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.tag",fm.serializer.serializeString(e),!1)},s.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments))},s.prototype.setData=function(){var e;return e=arguments[0],arguments[arguments.length-1]=fm.json.serialize(arguments[arguments.length-1]),this.setDataJson.apply(this,arguments)},s}(fm.websync.baseInputArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.unbindArgs=function(n){function s(){this.setRecords=e(this.setRecords,this),this.setRecord=e(this.setRecord,this),this.setOnSuccess=e(this.setOnSuccess,this),this.setOnFailure=e(this.setOnFailure,this),this.setOnComplete=e(this.setOnComplete,this),this.setKeys=e(this.setKeys,this),this.setKey=e(this.setKey,this),this.getRecords=e(this.getRecords,this),this.getRecord=e(this.getRecord,this),this.getOnSuccess=e(this.getOnSuccess,this),this.getOnFailure=e(this.getOnFailure,this),this.getOnComplete=e(this.getOnComplete,this),this.getKeys=e(this.getKeys,this),this.getKey=e(this.getKey,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):(t=arguments[0],s.__super__.constructor.call(this),void this.setRecords(t))}return t(s,n),s.prototype.__records=null,s.prototype._onComplete=null,s.prototype._onFailure=null,s.prototype._onSuccess=null,s.prototype.getKey=function(){return fm.websync.extensible.sharedGetKey(this.__records)},s.prototype.getKeys=function(){return fm.websync.extensible.sharedGetKeys(this.__records)},s.prototype.getOnComplete=function(){return this._onComplete},s.prototype.getOnFailure=function(){return this._onFailure},s.prototype.getOnSuccess=function(){return this._onSuccess},s.prototype.getRecord=function(){return fm.websync.extensible.sharedGetRecord(this.__records)},s.prototype.getRecords=function(){return fm.websync.extensible.sharedGetRecords(this.__records)},s.prototype.setKey=function(){var e;return e=arguments[0],this.__records=fm.websync.extensible.sharedSetKey(e)},s.prototype.setKeys=function(){var e;return e=arguments[0],this.__records=fm.websync.extensible.sharedSetKeys(e)},s.prototype.setOnComplete=function(){var e;return e=arguments[0],this._onComplete=e},s.prototype.setOnFailure=function(){var e;return e=arguments[0],this._onFailure=e},s.prototype.setOnSuccess=function(){var e;return e=arguments[0],this._onSuccess=e},s.prototype.setRecord=function(){var e;return e=arguments[0],this.__records=fm.websync.extensible.sharedSetRecord(e)},s.prototype.setRecords=function(){var e;return e=arguments[0],this.__records=fm.websync.extensible.sharedSetRecords(e)},s}(fm.websync.baseInputArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.disconnectArgs=function(n){function s(){return this.setOnComplete=e(this.setOnComplete,this),this.getOnComplete=e(this.getOnComplete,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._onComplete=null,s.prototype.getOnComplete=function(){return this._onComplete},s.prototype.setOnComplete=function(){var e;return e=arguments[0],this._onComplete=e},s}(fm.websync.baseInputArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.publishArgs=function(n){function s(){this.setData=e(this.setData,this),this.getData=e(this.getData,this),this.setTag=e(this.setTag,this),this.setOnSuccess=e(this.setOnSuccess,this),this.setOnFailure=e(this.setOnFailure,this),this.setOnComplete=e(this.setOnComplete,this),this.setDataJson=e(this.setDataJson,this),this.setDataBytes=e(this.setDataBytes,this),this.setChannel=e(this.setChannel,this),this.getTag=e(this.getTag,this),this.getOnSuccess=e(this.getOnSuccess,this),this.getOnFailure=e(this.getOnFailure,this),this.getOnComplete=e(this.getOnComplete,this),this.getIsBinary=e(this.getIsBinary,this),this.getDataJson=e(this.getDataJson,this),this.getDataBytes=e(this.getDataBytes,this),this.getChannel=e(this.getChannel,this);var t,n,r;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):3===arguments.length?(t=arguments[0],n=arguments[1],r=arguments[2],s.__super__.constructor.call(this),this.setChannel(t),this.setDataJson(n),void this.setTag(r)):2===arguments.length?(t=arguments[0],n=arguments[1],void s.call(this,t,n,null)):void 0}return t(s,n),s.prototype.__channel=null,s.prototype.__dataBytes=null,s.prototype.__dataJson=null,s.prototype._onComplete=null,s.prototype._onFailure=null,s.prototype._onSuccess=null,s.prototype.getChannel=function(){return this.__channel},s.prototype.getDataBytes=function(){var e,t,n,s,r,i;return r=this.__dataBytes,i=this.__dataJson,e=r,null!==e&&"undefined"!=typeof e?r:(t=i,null!==t&&"undefined"!=typeof t?(n=new fm.holder(r),s=fm.crypto.tryBase64Decode(fm.serializer.deserializeString(i),n),r=n.getValue(),s||(r=null),this.__dataBytes=r,r):null)},s.prototype.getDataJson=function(){var e,t,n,s;return s=this.__dataJson,n=this.__dataBytes,e=s,null!==e&&"undefined"!=typeof e?s:(t=n,null!==t&&"undefined"!=typeof t?(s=fm.serializer.serializeString(fm.crypto.base64Encode(n)),this.__dataJson=s,s):null)},s.prototype.getIsBinary=function(){var e;return e=this.getDataBytes(),null!==e&&"undefined"!=typeof e},s.prototype.getOnComplete=function(){return this._onComplete},s.prototype.getOnFailure=function(){return this._onFailure},s.prototype.getOnSuccess=function(){return this._onSuccess},s.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"))},s.prototype.setChannel=function(){var e,t,n,s;if(s=arguments[0],n=null,e=new fm.holder(n),t=fm.websync.extensible.validateChannel(s,e),n=e.getValue(),!t)throw new Error(fm.stringExtensions.format("Invalid channel. {0}",n));return this.__channel=s},s.prototype.setDataBytes=function(){var e;return e=arguments[0],this.__dataJson=null,this.__dataBytes=e},s.prototype.setDataJson=function(){var e,t;if(t=arguments[0],e=t,null!==e&&"undefined"!=typeof e&&!fm.serializer.isValidJson(t))throw new Error("The value is not valid JSON.");return this.__dataJson=t,this.__dataBytes=null},s.prototype.setOnComplete=function(){var e;return e=arguments[0],this._onComplete=e},s.prototype.setOnFailure=function(){var e;return e=arguments[0],this._onFailure=e},s.prototype.setOnSuccess=function(){var e;return e=arguments[0],this._onSuccess=e},s.prototype.setTag=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.tag",fm.serializer.serializeString(e),!1)},s.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments))},s.prototype.setData=function(){var e;return e=arguments[0],arguments[arguments.length-1]=fm.json.serialize(arguments[arguments.length-1]),this.setDataJson.apply(this,arguments)},s}(fm.websync.baseInputArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.subscribeArgs=function(n){function s(){this.setTag=e(this.setTag,this),this.setOnSuccess=e(this.setOnSuccess,this),this.setOnReceive=e(this.setOnReceive,this),this.setOnFailure=e(this.setOnFailure,this),this.setOnComplete=e(this.setOnComplete,this),this.setIsResubscribe=e(this.setIsResubscribe,this),this.setChannels=e(this.setChannels,this),this.setChannel=e(this.setChannel,this),this.setAutoResubscribe=e(this.setAutoResubscribe,this),this.getTag=e(this.getTag,this),this.getOnSuccess=e(this.getOnSuccess,this),this.getOnReceive=e(this.getOnReceive,this),this.getOnFailure=e(this.getOnFailure,this),this.getOnComplete=e(this.getOnComplete,this),this.getIsResubscribe=e(this.getIsResubscribe,this),this.getChannels=e(this.getChannels,this),this.getChannel=e(this.getChannel,this),this.getAutoResubscribe=e(this.getAutoResubscribe,this);var t,n;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):2===arguments.length?(t=arguments[0],n=arguments[1],s.__super__.constructor.call(this),this.setChannels(t),void this.setTag(n)):1===arguments.length?(t=arguments[0],s.__super__.constructor.call(this),void this.setChannels(t)):void 0}return t(s,n),s.prototype.__channels=null,s.prototype._autoResubscribe=null,s.prototype._isResubscribe=!1,s.prototype._onComplete=null,s.prototype._onFailure=null,s.prototype._onReceive=null,s.prototype._onSuccess=null,s.prototype.getAutoResubscribe=function(){return this._autoResubscribe},s.prototype.getChannel=function(){return fm.websync.extensible.sharedGetChannel(this.__channels)},s.prototype.getChannels=function(){return fm.websync.extensible.sharedGetChannels(this.__channels)},s.prototype.getIsResubscribe=function(){return this._isResubscribe},s.prototype.getOnComplete=function(){return this._onComplete},s.prototype.getOnFailure=function(){return this._onFailure},s.prototype.getOnReceive=function(){return this._onReceive},s.prototype.getOnSuccess=function(){return this._onSuccess},s.prototype.getTag=function(){var e;return null!=(e=fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag")))?e:fm.stringExtensions.empty},s.prototype.setAutoResubscribe=function(){var e;return e=arguments[0],this._autoResubscribe=e},s.prototype.setChannel=function(){var e;return e=arguments[0],this.__channels=fm.websync.extensible.sharedSetChannel(e)},s.prototype.setChannels=function(){var e;return e=arguments[0],this.__channels=fm.websync.extensible.sharedSetChannels(e)},s.prototype.setIsResubscribe=function(){var e;return e=arguments[0],this._isResubscribe=e},s.prototype.setOnComplete=function(){var e;return e=arguments[0],this._onComplete=e},s.prototype.setOnFailure=function(){var e;return e=arguments[0],this._onFailure=e},s.prototype.setOnReceive=function(){var e;return e=arguments[0],this._onReceive=e},s.prototype.setOnSuccess=function(){var e;return e=arguments[0],this._onSuccess=e},s.prototype.setTag=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.tag",fm.serializer.serializeString(null!=e?e:fm.stringExtensions.empty),!1)},s}(fm.websync.baseInputArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.unsubscribeArgs=function(n){function s(){this.setTag=e(this.setTag,this),this.setOnSuccess=e(this.setOnSuccess,this),this.setOnFailure=e(this.setOnFailure,this),this.setOnComplete=e(this.setOnComplete,this),this.setChannels=e(this.setChannels,this),this.setChannel=e(this.setChannel,this),this.getTag=e(this.getTag,this),this.getOnSuccess=e(this.getOnSuccess,this),this.getOnFailure=e(this.getOnFailure,this),this.getOnComplete=e(this.getOnComplete,this),this.getChannels=e(this.getChannels,this),this.getChannel=e(this.getChannel,this);var t,n;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):2===arguments.length?(t=arguments[0],n=arguments[1],s.__super__.constructor.call(this),this.setChannels(t),void this.setTag(n)):1===arguments.length?(t=arguments[0],s.__super__.constructor.call(this),void this.setChannels(t)):void 0}return t(s,n),s.prototype.__channels=null,s.prototype._onComplete=null,s.prototype._onFailure=null,s.prototype._onSuccess=null,s.prototype.getChannel=function(){return fm.websync.extensible.sharedGetChannel(this.__channels)},s.prototype.getChannels=function(){return fm.websync.extensible.sharedGetChannels(this.__channels)},s.prototype.getOnComplete=function(){return this._onComplete},s.prototype.getOnFailure=function(){return this._onFailure},s.prototype.getOnSuccess=function(){return this._onSuccess},s.prototype.getTag=function(){var e;return null!=(e=fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag")))?e:fm.stringExtensions.empty},s.prototype.setChannel=function(){var e;return e=arguments[0],this.__channels=fm.websync.extensible.sharedSetChannel(e)},s.prototype.setChannels=function(){var e;return e=arguments[0],this.__channels=fm.websync.extensible.sharedSetChannels(e)},s.prototype.setOnComplete=function(){var e;return e=arguments[0],this._onComplete=e},s.prototype.setOnFailure=function(){var e;return e=arguments[0],this._onFailure=e},s.prototype.setOnSuccess=function(){var e;return e=arguments[0],this._onSuccess=e},s.prototype.setTag=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.tag",fm.serializer.serializeString(null!=e?e:fm.stringExtensions.empty),!1)},s}(fm.websync.baseInputArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.connectCompleteArgs=function(n){function s(){return this.setIsReconnect=e(this.setIsReconnect,this),this.getIsReconnect=e(this.getIsReconnect,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._isReconnect=!1,s.prototype.getIsReconnect=function(){return this._isReconnect},s.prototype.setIsReconnect=function(){var e;return e=arguments[0],this._isReconnect=e},s}(fm.websync.baseCompleteArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.bindCompleteArgs=function(n){function s(){return this.setIsRebind=e(this.setIsRebind,this),this.getIsRebind=e(this.getIsRebind,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._isRebind=!1,s.prototype.getIsRebind=function(){return this._isRebind},s.prototype.setIsRebind=function(){var e;return e=arguments[0],this._isRebind=e},s}(fm.websync.baseCompleteArgs);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.serviceCompleteArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseCompleteArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.unbindCompleteArgs=function(n){function s(){return this.getForced=e(this.getForced,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype.__forced=!1,s.prototype.getForced=function(){return this.__forced},s}(fm.websync.baseCompleteArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.disconnectCompleteArgs=function(n){function s(){return this.setException=e(this.setException,this),this.getException=e(this.getException,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._exception=null,s.prototype.getException=function(){return this._exception},s.prototype.setException=function(){var e;return e=arguments[0],this._exception=e},s}(fm.websync.baseCompleteArgs);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.publishCompleteArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseCompleteArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.subscribeCompleteArgs=function(n){function s(){return this.setIsResubscribe=e(this.setIsResubscribe,this),this.getIsResubscribe=e(this.getIsResubscribe,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._isResubscribe=!1,s.prototype.getIsResubscribe=function(){return this._isResubscribe},s.prototype.setIsResubscribe=function(){var e;return e=arguments[0],this._isResubscribe=e},s}(fm.websync.baseCompleteArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.unsubscribeCompleteArgs=function(n){function s(){return this.getForced=e(this.getForced,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype.__forced=!1,s.prototype.getForced=function(){return this.__forced},s}(fm.websync.baseCompleteArgs);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientConnectResponseArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientResponseEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientDisconnectResponseArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientResponseEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientPublishResponseArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientResponseEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientSubscribeResponseArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientResponseEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientUnsubscribeResponseArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientResponseEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientBindResponseArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientResponseEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientUnbindResponseArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientResponseEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientServiceResponseArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientResponseEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientConnectRequestArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientRequestEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientDisconnectRequestArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientRequestEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientPublishRequestArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientRequestEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientSubscribeRequestArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientRequestEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientUnsubscribeRequestArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientRequestEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientBindRequestArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientRequestEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientUnbindRequestArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.baseClientRequestEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientServiceRequestArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this);
}return t(n,e),n}(fm.websync.baseClientRequestEventArgsGeneric);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.connectFailureArgs=function(n){function s(){return this.setIsReconnect=e(this.setIsReconnect,this),this.getIsReconnect=e(this.getIsReconnect,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._isReconnect=!1,s.prototype.getIsReconnect=function(){return this._isReconnect},s.prototype.setIsReconnect=function(){var e;return e=arguments[0],this._isReconnect=e},s}(fm.websync.baseFailureArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.bindFailureArgs=function(n){function s(){return this.setIsRebind=e(this.setIsRebind,this),this.getRecords=e(this.getRecords,this),this.getRecord=e(this.getRecord,this),this.getKeys=e(this.getKeys,this),this.getKey=e(this.getKey,this),this.getIsRebind=e(this.getIsRebind,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype.__records=null,s.prototype._isRebind=!1,s.prototype.getIsRebind=function(){return this._isRebind},s.prototype.getKey=function(){return fm.websync.extensible.sharedGetKey(this.__records)},s.prototype.getKeys=function(){return fm.websync.extensible.sharedGetKeys(this.__records)},s.prototype.getRecord=function(){return fm.websync.extensible.sharedGetRecord(this.__records)},s.prototype.getRecords=function(){return fm.websync.extensible.sharedGetRecords(this.__records)},s.prototype.setIsRebind=function(){var e;return e=arguments[0],this._isRebind=e},s}(fm.websync.baseFailureArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.serviceFailureArgs=function(n){function s(){return this.getData=e(this.getData,this),this.getTag=e(this.getTag,this),this.getIsBinary=e(this.getIsBinary,this),this.getDataJson=e(this.getDataJson,this),this.getDataBytes=e(this.getDataBytes,this),this.getChannel=e(this.getChannel,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype.__channel=null,s.prototype.__dataBytes=null,s.prototype.__dataJson=null,s.prototype.getChannel=function(){return this.__channel},s.prototype.getDataBytes=function(){var e,t,n,s,r,i;return r=this.__dataBytes,i=this.__dataJson,e=r,null!==e&&"undefined"!=typeof e?r:(t=i,null!==t&&"undefined"!=typeof t?(n=new fm.holder(r),s=fm.crypto.tryBase64Decode(fm.serializer.deserializeString(i),n),r=n.getValue(),s||(r=null),this.__dataBytes=r,r):null)},s.prototype.getDataJson=function(){var e,t,n,s;return s=this.__dataJson,n=this.__dataBytes,e=s,null!==e&&"undefined"!=typeof e?s:(t=n,null!==t&&"undefined"!=typeof t?(s=fm.serializer.serializeString(fm.crypto.base64Encode(n)),this.__dataJson=s,s):null)},s.prototype.getIsBinary=function(){var e;return e=this.getDataBytes(),null!==e&&"undefined"!=typeof e},s.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"))},s.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments))},s}(fm.websync.baseFailureArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.unbindFailureArgs=function(n){function s(){return this.getRecords=e(this.getRecords,this),this.getRecord=e(this.getRecord,this),this.getKeys=e(this.getKeys,this),this.getKey=e(this.getKey,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype.__records=null,s.prototype.getKey=function(){return fm.websync.extensible.sharedGetKey(this.__records)},s.prototype.getKeys=function(){return fm.websync.extensible.sharedGetKeys(this.__records)},s.prototype.getRecord=function(){return fm.websync.extensible.sharedGetRecord(this.__records)},s.prototype.getRecords=function(){return fm.websync.extensible.sharedGetRecords(this.__records)},s}(fm.websync.baseFailureArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.streamFailureArgs=function(n){function s(){return this.setConnectArgs=e(this.setConnectArgs,this),this.getConnectArgs=e(this.getConnectArgs,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._connectArgs=null,s.prototype.getConnectArgs=function(){return this._connectArgs},s.prototype.setConnectArgs=function(){var e;return e=arguments[0],this._connectArgs=e},s}(fm.websync.baseFailureArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.publishFailureArgs=function(n){function s(){return this.getData=e(this.getData,this),this.getTag=e(this.getTag,this),this.getIsBinary=e(this.getIsBinary,this),this.getDataJson=e(this.getDataJson,this),this.getDataBytes=e(this.getDataBytes,this),this.getChannel=e(this.getChannel,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype.__channel=null,s.prototype.__dataBytes=null,s.prototype.__dataJson=null,s.prototype.getChannel=function(){return this.__channel},s.prototype.getDataBytes=function(){var e,t,n,s,r,i;return r=this.__dataBytes,i=this.__dataJson,e=r,null!==e&&"undefined"!=typeof e?r:(t=i,null!==t&&"undefined"!=typeof t?(n=new fm.holder(r),s=fm.crypto.tryBase64Decode(fm.serializer.deserializeString(i),n),r=n.getValue(),s||(r=null),this.__dataBytes=r,r):null)},s.prototype.getDataJson=function(){var e,t,n,s;return s=this.__dataJson,n=this.__dataBytes,e=s,null!==e&&"undefined"!=typeof e?s:(t=n,null!==t&&"undefined"!=typeof t?(s=fm.serializer.serializeString(fm.crypto.base64Encode(n)),this.__dataJson=s,s):null)},s.prototype.getIsBinary=function(){var e;return e=this.getDataBytes(),null!==e&&"undefined"!=typeof e},s.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"))},s.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments))},s}(fm.websync.baseFailureArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.subscribeFailureArgs=function(n){function s(){return this.setIsResubscribe=e(this.setIsResubscribe,this),this.getTag=e(this.getTag,this),this.getIsResubscribe=e(this.getIsResubscribe,this),this.getChannels=e(this.getChannels,this),this.getChannel=e(this.getChannel,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype.__channels=null,s.prototype._isResubscribe=!1,s.prototype.getChannel=function(){return fm.websync.extensible.sharedGetChannel(this.__channels)},s.prototype.getChannels=function(){return fm.websync.extensible.sharedGetChannels(this.__channels)},s.prototype.getIsResubscribe=function(){return this._isResubscribe},s.prototype.getTag=function(){var e;return null!=(e=fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag")))?e:fm.stringExtensions.empty},s.prototype.setIsResubscribe=function(){var e;return e=arguments[0],this._isResubscribe=e},s}(fm.websync.baseFailureArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.unsubscribeFailureArgs=function(n){function s(){return this.getTag=e(this.getTag,this),this.getChannels=e(this.getChannels,this),this.getChannel=e(this.getChannel,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype.__channels=null,s.prototype.getChannel=function(){return fm.websync.extensible.sharedGetChannel(this.__channels)},s.prototype.getChannels=function(){return fm.websync.extensible.sharedGetChannels(this.__channels)},s.prototype.getTag=function(){var e;return null!=(e=fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag")))?e:fm.stringExtensions.empty},s}(fm.websync.baseFailureArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.connectSuccessArgs=function(n){function s(){return this.setIsReconnect=e(this.setIsReconnect,this),this.setConnectionType=e(this.setConnectionType,this),this.getIsReconnect=e(this.getIsReconnect,this),this.getConnectionType=e(this.getConnectionType,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._connectionType=null,s.prototype._isReconnect=!1,s.prototype.getConnectionType=function(){return this._connectionType},s.prototype.getIsReconnect=function(){return this._isReconnect},s.prototype.setConnectionType=function(){var e;return e=arguments[0],this._connectionType=e},s.prototype.setIsReconnect=function(){var e;return e=arguments[0],this._isReconnect=e},s}(fm.websync.baseSuccessArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.bindSuccessArgs=function(n){function s(){return this.setIsRebind=e(this.setIsRebind,this),this.getRecords=e(this.getRecords,this),this.getRecord=e(this.getRecord,this),this.getKeys=e(this.getKeys,this),this.getKey=e(this.getKey,this),this.getIsRebind=e(this.getIsRebind,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype.__records=null,s.prototype._isRebind=!1,s.prototype.getIsRebind=function(){return this._isRebind},s.prototype.getKey=function(){return fm.websync.extensible.sharedGetKey(this.__records)},s.prototype.getKeys=function(){return fm.websync.extensible.sharedGetKeys(this.__records)},s.prototype.getRecord=function(){return fm.websync.extensible.sharedGetRecord(this.__records)},s.prototype.getRecords=function(){return fm.websync.extensible.sharedGetRecords(this.__records)},s.prototype.setIsRebind=function(){var e;return e=arguments[0],this._isRebind=e},s}(fm.websync.baseSuccessArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.serviceSuccessArgs=function(n){function s(){return this.getData=e(this.getData,this),this.getTag=e(this.getTag,this),this.getIsBinary=e(this.getIsBinary,this),this.getDataJson=e(this.getDataJson,this),this.getDataBytes=e(this.getDataBytes,this),this.getChannel=e(this.getChannel,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype.__channel=null,s.prototype.__dataBytes=null,s.prototype.__dataJson=null,s.prototype.getChannel=function(){return this.__channel},s.prototype.getDataBytes=function(){var e,t,n,s,r,i;return r=this.__dataBytes,i=this.__dataJson,e=r,null!==e&&"undefined"!=typeof e?r:(t=i,null!==t&&"undefined"!=typeof t?(n=new fm.holder(r),s=fm.crypto.tryBase64Decode(fm.serializer.deserializeString(i),n),r=n.getValue(),s||(r=null),this.__dataBytes=r,r):null)},s.prototype.getDataJson=function(){var e,t,n,s;return s=this.__dataJson,n=this.__dataBytes,e=s,null!==e&&"undefined"!=typeof e?s:(t=n,null!==t&&"undefined"!=typeof t?(s=fm.serializer.serializeString(fm.crypto.base64Encode(n)),this.__dataJson=s,s):null)},s.prototype.getIsBinary=function(){var e;return e=this.getDataBytes(),null!==e&&"undefined"!=typeof e},s.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"))},s.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments))},s}(fm.websync.baseSuccessArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.unbindSuccessArgs=function(n){function s(){return this.getRecords=e(this.getRecords,this),this.getRecord=e(this.getRecord,this),this.getKeys=e(this.getKeys,this),this.getKey=e(this.getKey,this),this.getForced=e(this.getForced,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype.__forced=!1,s.prototype.__records=null,s.prototype.getForced=function(){return this.__forced},s.prototype.getKey=function(){return fm.websync.extensible.sharedGetKey(this.__records)},s.prototype.getKeys=function(){return fm.websync.extensible.sharedGetKeys(this.__records)},s.prototype.getRecord=function(){return fm.websync.extensible.sharedGetRecord(this.__records)},s.prototype.getRecords=function(){return fm.websync.extensible.sharedGetRecords(this.__records)},s}(fm.websync.baseSuccessArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.publishSuccessArgs=function(n){function s(){return this.getData=e(this.getData,this),this.getTag=e(this.getTag,this),this.getIsBinary=e(this.getIsBinary,this),this.getDataJson=e(this.getDataJson,this),this.getDataBytes=e(this.getDataBytes,this),this.getChannel=e(this.getChannel,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype.__channel=null,s.prototype.__dataBytes=null,s.prototype.__dataJson=null,s.prototype.getChannel=function(){return this.__channel},s.prototype.getDataBytes=function(){var e,t,n,s,r,i;return r=this.__dataBytes,i=this.__dataJson,e=r,null!==e&&"undefined"!=typeof e?r:(t=i,null!==t&&"undefined"!=typeof t?(n=new fm.holder(r),s=fm.crypto.tryBase64Decode(fm.serializer.deserializeString(i),n),r=n.getValue(),s||(r=null),this.__dataBytes=r,r):null)},s.prototype.getDataJson=function(){var e,t,n,s;return s=this.__dataJson,n=this.__dataBytes,e=s,null!==e&&"undefined"!=typeof e?s:(t=n,null!==t&&"undefined"!=typeof t?(s=fm.serializer.serializeString(fm.crypto.base64Encode(n)),this.__dataJson=s,s):null)},s.prototype.getIsBinary=function(){var e;return e=this.getDataBytes(),null!==e&&"undefined"!=typeof e},s.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"))},s.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments))},s}(fm.websync.baseSuccessArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.subscribeReceiveArgs=function(n){function s(){this.getWasSentByMe=e(this.getWasSentByMe,this),this.getPublishingClient=e(this.getPublishingClient,this),this.getChannel=e(this.getChannel,this);var t,n,r,i,o;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):(t=arguments[0],i=arguments[1],r=arguments[2],n=arguments[3],o=arguments[4],s.__super__.constructor.call(this,i,r,n,o),void(this.__channel=t))}return t(s,n),s.prototype.__channel=null,s.prototype.getChannel=function(){return this.__channel},s.prototype.getPublishingClient=function(){return fm.websync.publishingClient.fromJson(this.getExtensionValueJson("fm.publishing"))},s.prototype.getWasSentByMe=function(){var e,t,n;return e=this.getPublishingClient(),t=this.getClient(),n=this.getPublishingClient().getClientId(),null!==e&&"undefined"!=typeof e&&null!==t&&"undefined"!=typeof t&&null!==this.getPublishingClient().getClientId()&&(null===n?n===this.getClient().getClientId():n.equals(this.getClient().getClientId()))},s}(fm.websync.baseReceiveArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.subscribeSuccessArgs=function(n){function s(){return this.setIsResubscribe=e(this.setIsResubscribe,this),this.getTag=e(this.getTag,this),this.getIsResubscribe=e(this.getIsResubscribe,this),this.getChannels=e(this.getChannels,this),this.getChannel=e(this.getChannel,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype.__channels=null,s.prototype._isResubscribe=!1,s.prototype.getChannel=function(){return fm.websync.extensible.sharedGetChannel(this.__channels)},s.prototype.getChannels=function(){return fm.websync.extensible.sharedGetChannels(this.__channels)},s.prototype.getIsResubscribe=function(){return this._isResubscribe},s.prototype.getTag=function(){var e;return null!=(e=fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag")))?e:fm.stringExtensions.empty},s.prototype.setIsResubscribe=function(){var e;return e=arguments[0],this._isResubscribe=e},s}(fm.websync.baseSuccessArgs);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.unsubscribeSuccessArgs=function(n){function s(){return this.getTag=e(this.getTag,this),this.getForced=e(this.getForced,this),this.getChannels=e(this.getChannels,this),this.getChannel=e(this.getChannel,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype.__channels=null,s.prototype.__forced=!1,s.prototype.getChannel=function(){return fm.websync.extensible.sharedGetChannel(this.__channels)},s.prototype.getChannels=function(){return fm.websync.extensible.sharedGetChannels(this.__channels)},s.prototype.getForced=function(){return this.__forced},s.prototype.getTag=function(){var e;return null!=(e=fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag")))?e:fm.stringExtensions.empty},s}(fm.websync.baseSuccessArgs);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.publisherPublishResponseArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.basePublisherResponseEventArgsGeneric);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.publisherPublishRequestArgs=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n}(fm.websync.basePublisherRequestEventArgsGeneric);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.deferredRetryConnectState=function(n){function s(){return this.setConnectArgs=e(this.setConnectArgs,this),this.setBackoffTimeout=e(this.setBackoffTimeout,this),this.getConnectArgs=e(this.getConnectArgs,this),this.getBackoffTimeout=e(this.getBackoffTimeout,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._backoffTimeout=0,s.prototype._connectArgs=null,s.prototype.getBackoffTimeout=function(){return this._backoffTimeout},s.prototype.getConnectArgs=function(){return this._connectArgs},s.prototype.setBackoffTimeout=function(){var e;return e=arguments[0],this._backoffTimeout=e},s.prototype.setConnectArgs=function(){var e;return e=arguments[0],this._connectArgs=e},s}(fm.object);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.deferredStreamState=function(n){function s(){return this.setReceivedMessages=e(this.setReceivedMessages,this),this.setConnectArgs=e(this.setConnectArgs,this),this.getReceivedMessages=e(this.getReceivedMessages,this),this.getConnectArgs=e(this.getConnectArgs,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._connectArgs=null,s.prototype._receivedMessages=!1,s.prototype.getConnectArgs=function(){return this._connectArgs},s.prototype.getReceivedMessages=function(){return this._receivedMessages},s.prototype.setConnectArgs=function(){var e;return e=arguments[0],this._connectArgs=e},s.prototype.setReceivedMessages=function(){var e;return e=arguments[0],this._receivedMessages=e},s}(fm.object);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.messageTransferFactory=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n._createHttpMessageTransfer=null,n._createWebSocketMessageTransfer=null,n.defaultCreateHttpMessageTransfer=function(){return new fm.websync.httpMessageTransfer},n.defaultCreateWebSocketMessageTransfer=function(){var e;return e=arguments[0],new fm.websync.webSocketMessageTransfer(e)},n.getCreateHttpMessageTransfer=function(){return fm.websync.messageTransferFactory._createHttpMessageTransfer},n.getCreateWebSocketMessageTransfer=function(){return fm.websync.messageTransferFactory._createWebSocketMessageTransfer},n.getHttpMessageTransfer=function(){var e,t,s;return e=fm.websync.messageTransferFactory.getCreateHttpMessageTransfer(),(null===e||"undefined"==typeof e)&&n.setCreateHttpMessageTransfer(n.defaultCreateHttpMessageTransfer),s=fm.websync.messageTransferFactory.getCreateHttpMessageTransfer()(),t=s,(null===t||"undefined"==typeof t)&&(s=fm.websync.messageTransferFactory.defaultCreateHttpMessageTransfer()),s},n.getWebSocketMessageTransfer=function(){var e,t,s,r;return s=arguments[0],e=fm.websync.messageTransferFactory.getCreateWebSocketMessageTransfer(),(null===e||"undefined"==typeof e)&&n.setCreateWebSocketMessageTransfer(n.defaultCreateWebSocketMessageTransfer),r=fm.websync.messageTransferFactory.getCreateWebSocketMessageTransfer()(s),t=r,(null===t||"undefined"==typeof t)&&(r=fm.websync.messageTransferFactory.defaultCreateWebSocketMessageTransfer(s)),r},n.setCreateHttpMessageTransfer=function(){var e;return e=arguments[0],n._createHttpMessageTransfer=e},n.setCreateWebSocketMessageTransfer=function(){var e;return e=arguments[0],n._createWebSocketMessageTransfer=e},n}(fm.object);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.messageTransfer=function(n){function s(){return this.shutdown=e(this.shutdown,this),this.sendMessagesAsync=e(this.sendMessagesAsync,this),this.sendMessages=e(this.sendMessages,this),this.sendAsyncCallback=e(this.sendAsyncCallback,this),this.sendAsync=e(this.sendAsync,this),this.send=e(this.send,this),this.messageRequestArgsToHttpRequestArgs=e(this.messageRequestArgsToHttpRequestArgs,this),this.httpResponseArgsToMessageResponseArgs=e(this.httpResponseArgsToMessageResponseArgs,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),this._messageTransferCallbackKey="fm.websync.messageTransfer.callback",this._requestArgsKey="fm.websync.messageTransfer.requestArgs",void fm.util.attachProperties(this,arguments[0])):(s.__super__.constructor.call(this),this._messageTransferCallbackKey="fm.websync.messageTransfer.callback",void(this._requestArgsKey="fm.websync.messageTransfer.requestArgs"))}return t(s,n),s.prototype._messageTransferCallbackKey=null,s.prototype._requestArgsKey=null,s.raiseRequestCreated=function(){var e,t,n;return n=arguments[0],e=n.getOnRequestCreated(),null!==e&&"undefined"!=typeof e?(t=new fm.websync.messageRequestCreatedArgs,t.setRequests(n.getMessages()),t.setSender(n.getSender()),n.getOnRequestCreated()(t)):void 0},s.raiseResponseReceived=function(){var e,t,n,s;return s=arguments[0],e=s.getException(),t=s.getRequestArgs().getOnResponseReceived(),null!==e&&"undefined"!=typeof e||null===t||"undefined"==typeof t?void 0:(n=new fm.websync.messageResponseReceivedArgs,n.setResponses(s.getMessages()),n.setSender(s.getRequestArgs().getSender()),s.getRequestArgs().getOnResponseReceived()(n))},s.prototype.httpResponseArgsToMessageResponseArgs=function(){var e,t,n,s,r;return r=arguments[0],s=r.getRequestArgs().getDynamicValue(this._requestArgsKey),n=new fm.websync.messageResponseArgs(s),n.setException(r.getException()),n.setHeaders(r.getHeaders()),t=n,fm.stringExtensions.isNullOrEmpty(r.getTextContent())?(e=r.getBinaryContent(),null!==e&&"undefined"!=typeof e&&t.setMessages(fm.websync.message.fromBinaryMultiple(r.getBinaryContent())),t):(t.setMessages(fm.websync.message.fromJsonMultiple(r.getTextContent())),t)},s.prototype.messageRequestArgsToHttpRequestArgs=function(){var e,t,n,s,r,i,o;for(i=arguments[0],n=new fm.httpRequestArgs,n.setMethod(fm.httpMethod.Post),n.setOnRequestCreated(i.getOnHttpRequestCreated()),n.setOnResponseReceived(i.getOnHttpResponseReceived()),n.setSender(i.getSender()),n.setTimeout(i.getTimeout()),n.setUrl(i.getUrl()),n.setDynamicProperties(i.getDynamicProperties()),t=n,t.setDynamicValue(this._requestArgsKey,i),e=i.getHeaders().getAllKeys(),s=0,r=e.length;r>s;s++)o=e[s],t.getHeaders().set(o,i.getHeaders().get(o));return t.setTextContent(fm.websync.message.toJsonMultiple(i.getMessages())),t.getHeaders().set("Content-Type","application/json"),i.getIsBinary()&&(t.setBinaryContent(fm.websync.message.toBinaryMultiple(i.getMessages())),t.getHeaders().set("Content-Type","application/octet-stream")),t},s.prototype.send=function(){var e,t,n,s,r;r=arguments[0],fm.websync.messageTransfer.raiseRequestCreated(r);try{e=this.sendMessages(r),fm.websync.messageTransfer.raiseResponseReceived(e)}catch(n){s=n,t=new fm.websync.messageResponseArgs(r),t.setException(s),e=t}finally{}return e},s.prototype.sendAsync=function(){var e,t,n,s,r;r=arguments[0],e=arguments[1],fm.websync.messageTransfer.raiseRequestCreated(r),r.setDynamicValue(this._messageTransferCallbackKey,e);try{return this.sendMessagesAsync(r,this.sendAsyncCallback)}catch(t){return n=t,s=new fm.websync.messageResponseArgs(r),s.setException(n),e(s)}finally{}},s.prototype.sendAsyncCallback=function(){var e,t;return t=arguments[0],e=t.getRequestArgs().getDynamicValue(this._messageTransferCallbackKey),t.getRequestArgs().unsetDynamicValue(this._messageTransferCallbackKey),fm.websync.messageTransfer.raiseResponseReceived(t),e(t)},s.prototype.sendMessages=function(){var e;return e=arguments[0]},s.prototype.sendMessagesAsync=function(){var e,t;return t=arguments[0],e=arguments[1]},s.prototype.shutdown=function(){},s}(fm.object);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.httpMessageTransfer=function(n){function s(){return this.shutdown=e(this.shutdown,this),this.sendMessagesAsyncCallback=e(this.sendMessagesAsyncCallback,this),this.sendMessagesAsync=e(this.sendMessagesAsync,this),this.sendMessages=e(this.sendMessages,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),this._callbackKey="fm.websync.httpMessageTransfer.callback",this._httpTransfer=fm.httpTransferFactory.getHttpTransfer(),void fm.util.attachProperties(this,arguments[0])):(s.__super__.constructor.call(this),this._callbackKey="fm.websync.httpMessageTransfer.callback",void(this._httpTransfer=fm.httpTransferFactory.getHttpTransfer()))}return t(s,n),s.prototype._callbackKey=null,s.prototype._httpTransfer=null,s.prototype.sendMessages=function(){var e,t,n;return n=arguments[0],e=this.messageRequestArgsToHttpRequestArgs(n),t=this._httpTransfer.send(e),
this.httpResponseArgsToMessageResponseArgs(t)},s.prototype.sendMessagesAsync=function(){var e,t,n;return n=arguments[0],t=arguments[1],e=this.messageRequestArgsToHttpRequestArgs(n),e.setDynamicValue(this._callbackKey,t),this._httpTransfer.sendAsync(e,this.sendMessagesAsyncCallback)},s.prototype.sendMessagesAsyncCallback=function(){var e,t;return t=arguments[0],e=t.getRequestArgs().getDynamicValue(this._callbackKey),t.getRequestArgs().unsetDynamicValue(this._callbackKey),e(this.httpResponseArgsToMessageResponseArgs(t))},s.prototype.shutdown=function(){var e,t;try{return this._httpTransfer.shutdown()}catch(e){t=e}finally{}},s}(fm.websync.messageTransfer);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.notifyingClient=function(n){function s(){this.getBoundRecordValue=e(this.getBoundRecordValue,this),this.toJson=e(this.toJson,this),this.setClientId=e(this.setClientId,this),this.setBoundRecords=e(this.setBoundRecords,this),this.getClientId=e(this.getClientId,this),this.getBoundRecordValueJson=e(this.getBoundRecordValueJson,this),this.getBoundRecords=e(this.getBoundRecords,this);var t,n;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),this.setBoundRecords({}),void fm.util.attachProperties(this,arguments[0])):2===arguments.length?(n=arguments[0],t=arguments[1],s.__super__.constructor.call(this),this.setClientId(n),void this.setBoundRecords(t)):0===arguments.length?(s.__super__.constructor.call(this),void this.setBoundRecords({})):void 0}return t(s,n),s.prototype._boundRecords=null,s.prototype._clientId=null,s.fromJson=function(){var e;return e=arguments[0],fm.websync.serializer.deserializeNotifyingClient(e)},s.toJson=function(){var e;return e=arguments[0],fm.websync.serializer.serializeNotifyingClient(e)},s.prototype.getBoundRecords=function(){return this._boundRecords},s.prototype.getBoundRecordValueJson=function(){var e,t,n,s,r;return s=arguments[0],e=this.getBoundRecords(),null===e||"undefined"==typeof e?null:(r=null,t=new fm.holder(r),n=fm.hashExtensions.tryGetValue(this.getBoundRecords(),s,t),r=t.getValue(),n?r.getValueJson():null)},s.prototype.getClientId=function(){return this._clientId},s.prototype.setBoundRecords=function(){var e;return e=arguments[0],this._boundRecords=e},s.prototype.setClientId=function(){var e;return e=arguments[0],this._clientId=e},s.prototype.toJson=function(){return fm.websync.notifyingClient.toJson(this)},s.prototype.getBoundRecordValue=function(){var e;return e=arguments[0],fm.json.deserialize(this.getBoundRecordValueJson.apply(this,arguments))},s}(fm.serializable);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.baseMessage=function(n){function s(){return this.setData=e(this.setData,this),this.getData=e(this.getData,this),this.setValidate=e(this.setValidate,this),this.setTimestamp=e(this.setTimestamp,this),this.setSuccessful=e(this.setSuccessful,this),this.setError=e(this.setError,this),this.setDataJson=e(this.setDataJson,this),this.setDataBytes=e(this.setDataBytes,this),this.getValidate=e(this.getValidate,this),this.getTimestamp=e(this.getTimestamp,this),this.getSuccessful=e(this.getSuccessful,this),this.getIsBinary=e(this.getIsBinary,this),this.getError=e(this.getError,this),this.getDataJson=e(this.getDataJson,this),this.getDataBytes=e(this.getDataBytes,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),this.setValidate(!0),void fm.util.attachProperties(this,arguments[0])):(s.__super__.constructor.call(this),void this.setValidate(!0))}return t(s,n),s.prototype.__dataBytes=null,s.prototype.__dataJson=null,s.prototype.__error=null,s.prototype.__successful=!1,s.prototype.__timestamp=null,s.prototype._validate=!1,s.prototype.getDataBytes=function(){var e,t,n,s,r,i;return r=this.__dataBytes,i=this.__dataJson,e=r,null!==e&&"undefined"!=typeof e?r:(t=i,null!==t&&"undefined"!=typeof t?(n=new fm.holder(r),s=fm.crypto.tryBase64Decode(fm.serializer.deserializeString(i),n),r=n.getValue(),s||(r=null),this.__dataBytes=r,r):null)},s.prototype.getDataJson=function(){var e,t,n,s;return s=this.__dataJson,n=this.__dataBytes,e=s,null!==e&&"undefined"!=typeof e?s:(t=n,null!==t&&"undefined"!=typeof t?(s=fm.serializer.serializeString(fm.crypto.base64Encode(n)),this.__dataJson=s,s):null)},s.prototype.getError=function(){return this.__error},s.prototype.getIsBinary=function(){var e;return e=this.getDataBytes(),null!==e&&"undefined"!=typeof e},s.prototype.getSuccessful=function(){return this.__successful},s.prototype.getTimestamp=function(){return this.__timestamp},s.prototype.getValidate=function(){return this._validate},s.prototype.setDataBytes=function(){var e;return e=arguments[0],this.__dataJson=null,this.__dataBytes=e,this.setIsDirty(!0)},s.prototype.setDataJson=function(){var e,t;if(t=arguments[0],e=t,this.getValidate()&&null!==e&&"undefined"!=typeof e&&!fm.serializer.isValidJson(t))throw new Error("The value is not valid JSON.");return this.__dataJson=t,this.__dataBytes=null,this.setIsDirty(!0)},s.prototype.setError=function(){var e;return e=arguments[0],this.__error=e,this.setIsDirty(!0)},s.prototype.setSuccessful=function(){var e;return e=arguments[0],this.__successful=e,this.setIsDirty(!0)},s.prototype.setTimestamp=function(){var e;return e=arguments[0],this.__timestamp=e,this.setIsDirty(!0)},s.prototype.setValidate=function(){var e;return e=arguments[0],this._validate=e},s.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments))},s.prototype.setData=function(){var e;return e=arguments[0],arguments[arguments.length-1]=fm.json.serialize(arguments[arguments.length-1]),this.setDataJson.apply(this,arguments)},s}(fm.websync.extensible);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.notification=function(n){function s(){this.toJson=e(this.toJson,this),this.setTag=e(this.setTag,this),this.setClientId=e(this.setClientId,this),this.getTag=e(this.getTag,this),this.getClientId=e(this.getClientId,this);var t,n,r;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):2===arguments.length?(t=arguments[0],n=arguments[1],void s.call(this,t,n,null)):3===arguments.length?(t=arguments[0],n=arguments[1],r=arguments[2],s.__super__.constructor.call(this),this.setClientId(t),this.setDataJson(n),void this.setTag(r)):0===arguments.length?void s.__super__.constructor.call(this):1===arguments.length?(t=arguments[0],s.__super__.constructor.call(this),void this.setClientId(t)):void 0}return t(s,n),s.fromJson=function(){var e;return e=arguments[0],fm.websync.serializer.deserializeNotification(e)},s.fromJsonMultiple=function(){var e;return e=arguments[0],fm.websync.serializer.deserializeNotificationArray(e)},s.fromMessage=function(){var e,t,n;return t=arguments[0],e=t,null===e||"undefined"==typeof e?null:(n=new fm.websync.notification,n.setClientId(t.getNotifyClientId()),n.setSuccessful(t.getSuccessful()),n.setError(t.getError()),n.setTimestamp(t.getTimestamp()),n.setDataJson(t.getDataJson()),n.setExtensions(t.getExtensions()),n)},s.fromMessages=function(){var e,t,n,s;if(n=arguments[0],e=n,null===e||"undefined"==typeof e)return null;for(s=new Array(n.length),t=0;t<n.length;)try{s[t]=fm.websync.notification.fromMessage(n[t])}finally{t++}return s},s.toJson=function(){var e;return e=arguments[0],fm.websync.serializer.serializeNotification(e)},s.toJsonMultiple=function(){var e;return e=arguments[0],fm.websync.serializer.serializeNotificationArray(e)},s.toMessage=function(){var e,t,n;return n=arguments[0],e=n,null===e||"undefined"==typeof e?null:(t=new fm.websync.message,t.setNotifyClientId(n.getClientId()),t.setSuccessful(n.getSuccessful()),t.setError(n.getError()),t.setTimestamp(n.getTimestamp()),t.setDataJson(n.getDataJson()),t.setExtensions(n.getExtensions()),t)},s.toMessages=function(){var e,t,n,s;if(s=arguments[0],e=s,null===e||"undefined"==typeof e)return null;for(n=new Array(s.length),t=0;t<s.length;)try{n[t]=fm.websync.notification.toMessage(s[t])}finally{t++}return n},s.prototype.getClientId=function(){var e;return e=fm.serializer.deserializeGuid(this.getExtensionValueJson("fm.notify")),null!==e?e:fm.guid.empty},s.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"))},s.prototype.setClientId=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.notify",fm.serializer.serializeGuid(e),!1),this.setIsDirty(!0)},s.prototype.setTag=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.tag",fm.serializer.serializeString(e),!1),this.setIsDirty(!0)},s.prototype.toJson=function(){return fm.websync.notification.toJson(this)},s}(fm.websync.baseMessage);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.publisherResponseArgs=function(n){function s(){return this.setResponses=e(this.setResponses,this),this.setResponse=e(this.setResponse,this),this.setException=e(this.setException,this),this.getResponses=e(this.getResponses,this),this.getResponse=e(this.getResponse,this),this.getException=e(this.getException,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._exception=null,s.prototype._responses=null,s.prototype.getException=function(){return this._exception},s.prototype.getResponse=function(){var e;return e=this.getResponses(),null===e||"undefined"==typeof e||0===this.getResponses().length?null:this.getResponses()[0]},s.prototype.getResponses=function(){return this._responses},s.prototype.setException=function(){var e;return e=arguments[0],this._exception=e},s.prototype.setResponse=function(){var e;return e=arguments[0],this.setResponses([e])},s.prototype.setResponses=function(){var e;return e=arguments[0],this._responses=e},s}(fm.object);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.baseClient=function(n){function s(){return this.setRequestUrl=e(this.setRequestUrl,this),this.setRequestTimeout=e(this.setRequestTimeout,this),this.setDomainName=e(this.setDomainName,this),this.setDomainKeyString=e(this.setDomainKeyString,this),this.setDomainKey=e(this.setDomainKey,this),this.setDisableBinary=e(this.setDisableBinary,this),this.setConcurrencyMode=e(this.setConcurrencyMode,this),this.removeOnUnhandledException=e(this.removeOnUnhandledException,this),this.removeOnResponseReceived=e(this.removeOnResponseReceived,this),this.removeOnRequestCreated=e(this.removeOnRequestCreated,this),this.removeOnHttpResponseReceived=e(this.removeOnHttpResponseReceived,this),this.removeOnHttpRequestCreated=e(this.removeOnHttpRequestCreated,this),this.raiseUnhandledException=e(this.raiseUnhandledException,this),this.raiseBaseEvent=e(this.raiseBaseEvent,this),this.internalOnResponseReceived=e(this.internalOnResponseReceived,this),this.internalOnRequestCreated=e(this.internalOnRequestCreated,this),this.internalOnHttpResponseReceived=e(this.internalOnHttpResponseReceived,this),this.internalOnHttpRequestCreated=e(this.internalOnHttpRequestCreated,this),this.getRequestUrl=e(this.getRequestUrl,this),this.getRequestTimeout=e(this.getRequestTimeout,this),this.getDomainName=e(this.getDomainName,this),this.getDomainKeyString=e(this.getDomainKeyString,this),this.getDomainKey=e(this.getDomainKey,this),this.getDisableBinary=e(this.getDisableBinary,this),this.getConcurrencyMode=e(this.getConcurrencyMode,this),this.createHeadersNoCache=e(this.createHeadersNoCache,this),this.createHeaders=e(this.createHeaders,this),this.addOnUnhandledException=e(this.addOnUnhandledException,this),this.addOnResponseReceived=e(this.addOnResponseReceived,this),this.addOnRequestCreated=e(this.addOnRequestCreated,this),this.addOnHttpResponseReceived=e(this.addOnHttpResponseReceived,this),this.addOnHttpRequestCreated=e(this.addOnHttpRequestCreated,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),this.setRequestTimeout(15e3),this.setDomainKey(fm.websync.defaults.getDomainKey()),this.setDomainName(fm.websync.defaults.getDomainName()),this.setConcurrencyMode(fm.websync.concurrencyMode.Low),void fm.util.attachProperties(this,arguments[0])):(s.__super__.constructor.call(this),this.setRequestTimeout(15e3),this.setDomainKey(fm.websync.defaults.getDomainKey()),this.setDomainName(fm.websync.defaults.getDomainName()),void this.setConcurrencyMode(fm.websync.concurrencyMode.Low))}return t(s,n),s.prototype.__domainName=null,s.prototype.__requestUrl=null,s.prototype._concurrencyMode=null,s.prototype._disableBinary=!1,s.prototype._domainKey=null,s._headers=null,s._invalidResponseMessage="Invalid response received from server.",s.prototype._onHttpRequestCreated=null,s.prototype._onHttpResponseReceived=null,s.prototype._onRequestCreated=null,s.prototype._onResponseReceived=null,s.prototype._onUnhandledException=null,s.prototype._requestTimeout=0,s.sanitizeDomainName=function(){var e,t;return e=arguments[0],fm.stringExtensions.startsWith(e,"http://",fm.stringComparison.Ordinal)?e=e.substring("http://".length):fm.stringExtensions.startsWith(e,"https://",fm.stringComparison.Ordinal)&&(e=e.substring("https://".length)),t=fm.stringExtensions.indexOf(e,"/"),-1!==t&&(e=fm.stringExtensions.substring(e,0,t)),e},s.prototype.addOnHttpRequestCreated=function(){var e;return e=arguments[0],this._onHttpRequestCreated=fm.delegate.combine(this._onHttpRequestCreated,e)},s.prototype.addOnHttpResponseReceived=function(){var e;return e=arguments[0],this._onHttpResponseReceived=fm.delegate.combine(this._onHttpResponseReceived,e)},s.prototype.addOnRequestCreated=function(){var e;return e=arguments[0],this._onRequestCreated=fm.delegate.combine(this._onRequestCreated,e)},s.prototype.addOnResponseReceived=function(){var e;return e=arguments[0],this._onResponseReceived=fm.delegate.combine(this._onResponseReceived,e)},s.prototype.addOnUnhandledException=function(){var e;return e=arguments[0],this._onUnhandledException=fm.delegate.combine(this._onUnhandledException,e)},s.prototype.createHeaders=function(){var e;return this.getConcurrencyMode()===fm.websync.concurrencyMode.High?(e=fm.websync.baseClient._headers,(null===e||"undefined"==typeof e)&&(this._headers=this.createHeadersNoCache()),fm.websync.baseClient._headers):this.createHeadersNoCache()},s.prototype.createHeadersNoCache=function(){var e,t;return t=new fm.nameValueCollection,this.getDomainName()!==fm.websync.defaults.getDomainName()&&t.set("X-FM-DomainName",this.getDomainName()),e=this.getDomainKey(),(null===e?e===fm.websync.defaults.getDomainKey():e.equals(fm.websync.defaults.getDomainKey()))||t.set("X-FM-DomainKey",this.getDomainKey().toString()),t},s.prototype.getConcurrencyMode=function(){return this._concurrencyMode},s.prototype.getDisableBinary=function(){return this._disableBinary},s.prototype.getDomainKey=function(){return this._domainKey},s.prototype.getDomainKeyString=function(){return this.getDomainKey().toString()},s.prototype.getDomainName=function(){return this.__domainName},s.prototype.getRequestTimeout=function(){return this._requestTimeout},s.prototype.getRequestUrl=function(){return this.__requestUrl},s.prototype.internalOnHttpRequestCreated=function(){var e;return e=arguments[0],this.raiseBaseEvent(this._onHttpRequestCreated,e,"OnHttpRequestCreated")},s.prototype.internalOnHttpResponseReceived=function(){var e;return e=arguments[0],this.raiseBaseEvent(this._onHttpResponseReceived,e,"OnHttpResponseReceived")},s.prototype.internalOnRequestCreated=function(){var e;return e=arguments[0],this.raiseBaseEvent(this._onRequestCreated,e,"OnRequestCreated")},s.prototype.internalOnResponseReceived=function(){var e;return e=arguments[0],this.raiseBaseEvent(this._onResponseReceived,e,"OnResponseReceived")},s.prototype.raiseBaseEvent=function(){var e,t,n,s,r,i;if(s=arguments[0],t=arguments[1],r=arguments[2],e=s,null!==e&&"undefined"!=typeof e)try{return s(t)}catch(n){if(i=n,!this.raiseUnhandledException(i))return fm.asyncException.asyncThrow(i,fm.stringExtensions.format("BaseClient -> {0}",r))}finally{}},s.prototype.raiseUnhandledException=function(){var e,t,n,s,r,i,o;if(s=arguments[0],i=this._onUnhandledException,e=i,null!==e&&"undefined"!=typeof e){t=new fm.websync.unhandledExceptionArgs,t.__exception=s,o=t;try{i(o)}catch(n){r=n,fm.asyncException.asyncThrow(r,"BaseClient -> OnUnhandledException")}finally{}return o.getHandled()}return!1},s.prototype.removeOnHttpRequestCreated=function(){var e;return e=arguments[0],this._onHttpRequestCreated=fm.delegate.remove(this._onHttpRequestCreated,e)},s.prototype.removeOnHttpResponseReceived=function(){var e;return e=arguments[0],this._onHttpResponseReceived=fm.delegate.remove(this._onHttpResponseReceived,e)},s.prototype.removeOnRequestCreated=function(){var e;return e=arguments[0],this._onRequestCreated=fm.delegate.remove(this._onRequestCreated,e)},s.prototype.removeOnResponseReceived=function(){var e;return e=arguments[0],this._onResponseReceived=fm.delegate.remove(this._onResponseReceived,e)},s.prototype.removeOnUnhandledException=function(){var e;return e=arguments[0],this._onUnhandledException=fm.delegate.remove(this._onUnhandledException,e)},s.prototype.setConcurrencyMode=function(){var e;return e=arguments[0],this._concurrencyMode=e},s.prototype.setDisableBinary=function(){var e;return e=arguments[0],this._disableBinary=e},s.prototype.setDomainKey=function(){var e;return e=arguments[0],this._domainKey=e},s.prototype.setDomainKeyString=function(){var e;return e=arguments[0],this.setDomainKey(new fm.guid(e))},s.prototype.setDomainName=function(){var e,t;return t=arguments[0],e=t,(null===e||"undefined"==typeof e)&&(t=fm.websync.defaults.getDomainName()),this.__domainName=fm.websync.baseClient.sanitizeDomainName(t)},s.prototype.setRequestTimeout=function(){var e;return e=arguments[0],this._requestTimeout=e},s.prototype.setRequestUrl=function(){var e,t;if(t=arguments[0],e=t,null===e||"undefined"==typeof e)throw new Error("Request URL cannot be null.");return this.__requestUrl=fm.httpTransfer.replaceWildcards(t)},s._headers=null,s}(fm.dynamic);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.baseAdvice=function(n){function s(){return this.toJson=e(this.toJson,this),this.setReconnect=e(this.setReconnect,this),this.setInterval=e(this.setInterval,this),this.setHosts=e(this.setHosts,this),this.getReconnect=e(this.getReconnect,this),this.getInterval=e(this.getInterval,this),this.getHosts=e(this.getHosts,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype.__hosts=null,s.prototype.__interval=null,s.prototype.__reconnect=null,s.fromJson=function(){var e;return e=arguments[0],fm.websync.serializer.deserializeBaseAdvice(e)},s.toJson=function(){var e;return e=arguments[0],fm.websync.serializer.serializeBaseAdvice(e)},s.prototype.getHosts=function(){return this.__hosts},s.prototype.getInterval=function(){return this.__interval},s.prototype.getReconnect=function(){return this.__reconnect},s.prototype.setHosts=function(){var e;return e=arguments[0],this.__hosts=e,this.setIsDirty(!0)},s.prototype.setInterval=function(){var e;return e=arguments[0],this.__interval=e,this.setIsDirty(!0)},s.prototype.setReconnect=function(){var e;return e=arguments[0],this.__reconnect=e,this.setIsDirty(!0)},s.prototype.toJson=function(){return fm.websync.baseAdvice.toJson(this)},s}(fm.serializable);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.advice=function(n){function s(){return this.toJson=e(this.toJson,this),this.setWebSocket=e(this.setWebSocket,this),this.setLongPolling=e(this.setLongPolling,this),this.setCallbackPolling=e(this.setCallbackPolling,this),this.getWebSocket=e(this.getWebSocket,this),this.getLongPolling=e(this.getLongPolling,this),this.getCallbackPolling=e(this.getCallbackPolling,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._callbackPolling=null,s.prototype._longPolling=null,s.prototype._webSocket=null,s.fromJson=function(){var e;return e=arguments[0],fm.websync.serializer.deserializeAdvice(e)},s.toJson=function(){var e;return e=arguments[0],fm.websync.serializer.serializeAdvice(e)},s.prototype.getCallbackPolling=function(){return this._callbackPolling},s.prototype.getLongPolling=function(){return this._longPolling},s.prototype.getWebSocket=function(){return this._webSocket},s.prototype.setCallbackPolling=function(){var e;return e=arguments[0],this._callbackPolling=e},s.prototype.setLongPolling=function(){var e;return e=arguments[0],this._longPolling=e},s.prototype.setWebSocket=function(){var e;return e=arguments[0],this._webSocket=e},s.prototype.toJson=function(){return fm.websync.advice.toJson(this)},s}(fm.websync.baseAdvice);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.metaChannels=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void 0}return t(n,e),n._bind="/meta/bind",n._connect="/meta/connect",n._disconnect="/meta/disconnect",n._handshake="/meta/handshake",n._metaPrefix="/meta/",n._notify="/meta/notify",n._servicePrefix="/service/",n._subscribe="/meta/subscribe",n._unbind="/meta/unbind",n._unsubscribe="/meta/unsubscribe",n.convertChannelFromServiced=function(){var e;return e=arguments[0],fm.websync.metaChannels.isServiceChannel(e)?e.substring("/service/".length-1):e},n.convertChannelToServiced=function(){var e,t;return t=arguments[0],e=t,null===e||"undefined"==typeof e||t.length<1?"/service/":fm.stringExtensions.concat("/service/",t.substring(1))},n.getMessageType=function(){var e;return e=arguments[0],"/meta/handshake"===e?fm.websync.messageType.Connect:"/meta/connect"===e?fm.websync.messageType.Stream:"/meta/disconnect"===e?fm.websync.messageType.Disconnect:"/meta/bind"===e?fm.websync.messageType.Bind:"/meta/unbind"===e?fm.websync.messageType.Unbind:"/meta/subscribe"===e?fm.websync.messageType.Subscribe:"/meta/unsubscribe"===e?fm.websync.messageType.Unsubscribe:"/meta/notify"===e?fm.websync.messageType.Notify:fm.websync.metaChannels.isServiceChannel(e)?fm.websync.messageType.Service:fm.websync.metaChannels.isMetaChannel(e)?fm.websync.messageType.Unknown:fm.websync.messageType.Publish},n.isMetaChannel=function(){var e,t;return t=arguments[0],e=t,null!==e&&"undefined"!=typeof e&&fm.stringExtensions.startsWith(t,"/meta/",fm.stringComparison.Ordinal)},n.isReservedChannel=function(){var e;return e=arguments[0],fm.websync.metaChannels.isMetaChannel(e)||fm.websync.metaChannels.isServiceChannel(e)},n.isServiceChannel=function(){var e,t;return t=arguments[0],e=t,null!==e&&"undefined"!=typeof e&&fm.stringExtensions.startsWith(t,"/service/",fm.stringComparison.Ordinal)},n}(fm.object);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.client=function(n){function s(){this.webSocketStreamFailure=e(this.webSocketStreamFailure,this),this.webSocketOpenSuccess=e(this.webSocketOpenSuccess,this),this.webSocketOpenFailure=e(this.webSocketOpenFailure,this),this.unsubscribe=e(this.unsubscribe,this),this.unsetCustomOnReceiveWithTag=e(this.unsetCustomOnReceiveWithTag,this),this.unsetCustomOnReceive=e(this.unsetCustomOnReceive,this),this.unbind=e(this.unbind,this),this.tryWebSocket=e(this.tryWebSocket,this),this.subscribe=e(this.subscribe,this),this.streamDeferred=e(this.streamDeferred,this),this.streamCallback=e(this.streamCallback,this),this.stream=e(this.stream,this),this.startBatch=e(this.startBatch,this),this.setToken=e(this.setToken,this),this.setSynchronous=e(this.setSynchronous,this),this.setStreamRequestUrl=e(this.setStreamRequestUrl,this),this.setSessionId=e(this.setSessionId,this),this.setServerTimeout=e(this.setServerTimeout,this),this.setIsDisconnecting=e(this.setIsDisconnecting,this),this.setIsConnecting=e(this.setIsConnecting,this),this.setIsConnected=e(this.setIsConnected,this),this.setInstanceId=e(this.setInstanceId,this),this.setDisableWebSockets=e(this.setDisableWebSockets,this),this.setCustomOnReceiveWithTag=e(this.setCustomOnReceiveWithTag,this),this.setCustomOnReceive=e(this.setCustomOnReceive,this),this.setClientId=e(this.setClientId,this),this.service=e(this.service,this),this.sendMany=e(this.sendMany,this),this.sendCallback=e(this.sendCallback,this),this.send=e(this.send,this),this.retryConnectDeferred=e(this.retryConnectDeferred,this),this.retryConnect=e(this.retryConnect,this),this.restream=e(this.restream,this),this.removeSubscribedOnReceive=e(this.removeSubscribedOnReceive,this),this.removeSubscribedChannels=e(this.removeSubscribedChannels,this),this.removeOnUnsubscribeSuccess=e(this.removeOnUnsubscribeSuccess,this),this.removeOnUnsubscribeFailure=e(this.removeOnUnsubscribeFailure,this),this.removeOnUnsubscribeComplete=e(this.removeOnUnsubscribeComplete,this),this.removeOnUnbindSuccess=e(this.removeOnUnbindSuccess,this),this.removeOnUnbindFailure=e(this.removeOnUnbindFailure,this),this.removeOnUnbindComplete=e(this.removeOnUnbindComplete,this),this.removeOnSubscribeSuccess=e(this.removeOnSubscribeSuccess,this),this.removeOnSubscribeFailure=e(this.removeOnSubscribeFailure,this),this.removeOnSubscribeComplete=e(this.removeOnSubscribeComplete,this),this.removeOnStreamFailure=e(this.removeOnStreamFailure,this),this.removeOnStateRestored=e(this.removeOnStateRestored,this),this.removeOnServiceSuccess=e(this.removeOnServiceSuccess,this),this.removeOnServiceFailure=e(this.removeOnServiceFailure,this),this.removeOnServiceComplete=e(this.removeOnServiceComplete,this),this.removeOnServerUnsubscribe=e(this.removeOnServerUnsubscribe,this),this.removeOnServerUnbind=e(this.removeOnServerUnbind,this),this.removeOnServerSubscribe=e(this.removeOnServerSubscribe,this),this.removeOnServerBind=e(this.removeOnServerBind,this),this.removeOnPublishSuccess=e(this.removeOnPublishSuccess,this),this.removeOnPublishFailure=e(this.removeOnPublishFailure,this),this.removeOnPublishComplete=e(this.removeOnPublishComplete,this),this.removeOnNotifySuccess=e(this.removeOnNotifySuccess,this),this.removeOnNotifyFailure=e(this.removeOnNotifyFailure,this),this.removeOnNotifyComplete=e(this.removeOnNotifyComplete,this),this.removeOnNotify=e(this.removeOnNotify,this),this.removeOnDisconnectComplete=e(this.removeOnDisconnectComplete,this),this.removeOnConnectSuccess=e(this.removeOnConnectSuccess,this),this.removeOnConnectFailure=e(this.removeOnConnectFailure,this),this.removeOnConnectComplete=e(this.removeOnConnectComplete,this),this.removeOnBindSuccess=e(this.removeOnBindSuccess,this),this.removeOnBindFailure=e(this.removeOnBindFailure,this),this.removeOnBindComplete=e(this.removeOnBindComplete,this),this.removeBoundRecords=e(this.removeBoundRecords,this),this.reconnect=e(this.reconnect,this),this.receiveSink=e(this.receiveSink,this),this.receiveMessage=e(this.receiveMessage,this),this.raiseUnsubscribeSuccess=e(this.raiseUnsubscribeSuccess,this),this.raiseUnsubscribeFailure=e(this.raiseUnsubscribeFailure,this),this.raiseUnsubscribeComplete=e(this.raiseUnsubscribeComplete,this),this.raiseUnbindSuccess=e(this.raiseUnbindSuccess,this),this.raiseUnbindFailure=e(this.raiseUnbindFailure,this),this.raiseUnbindComplete=e(this.raiseUnbindComplete,this),this.raiseSubscribeSuccess=e(this.raiseSubscribeSuccess,this),this.raiseSubscribeFailure=e(this.raiseSubscribeFailure,this),this.raiseSubscribeDelivery=e(this.raiseSubscribeDelivery,this),this.raiseSubscribeComplete=e(this.raiseSubscribeComplete,this),this.raiseStreamFailure=e(this.raiseStreamFailure,this),this.raiseStateRestored=e(this.raiseStateRestored,this),this.raiseServiceSuccess=e(this.raiseServiceSuccess,this),this.raiseServiceFailure=e(this.raiseServiceFailure,this),this.raiseServiceComplete=e(this.raiseServiceComplete,this),this.raiseServerUnsubscribe=e(this.raiseServerUnsubscribe,this),this.raiseServerUnbind=e(this.raiseServerUnbind,this),this.raiseServerSubscribe=e(this.raiseServerSubscribe,this),this.raiseServerBind=e(this.raiseServerBind,this),this.raiseSendException=e(this.raiseSendException,this),this.raiseRetriable=e(this.raiseRetriable,this),this.raiseResponseEvent=e(this.raiseResponseEvent,this),this.raiseRequestEvent=e(this.raiseRequestEvent,this),this.raisePublishSuccess=e(this.raisePublishSuccess,this),this.raisePublishFailure=e(this.raisePublishFailure,this),this.raisePublishComplete=e(this.raisePublishComplete,this),this.raiseNotifySuccess=e(this.raiseNotifySuccess,this),this.raiseNotifyFailure=e(this.raiseNotifyFailure,this),this.raiseNotifyDelivery=e(this.raiseNotifyDelivery,this),this.raiseNotifyComplete=e(this.raiseNotifyComplete,this),this.raiseFunctionManual=e(this.raiseFunctionManual,this),this.raiseFunction=e(this.raiseFunction,this),this.raiseForcedUnsubscribes=e(this.raiseForcedUnsubscribes,this),this.raiseForcedUnbinds=e(this.raiseForcedUnbinds,this),this.raiseEvent=e(this.raiseEvent,this),this.raiseDisconnectComplete=e(this.raiseDisconnectComplete,this),this.raiseConnectSuccess=e(this.raiseConnectSuccess,this),this.raiseConnectFailure=e(this.raiseConnectFailure,this),this.raiseConnectComplete=e(this.raiseConnectComplete,this),this.raiseCompleteEvent=e(this.raiseCompleteEvent,this),this.raiseBindSuccess=e(this.raiseBindSuccess,this),this.raiseBindFailure=e(this.raiseBindFailure,this),this.raiseBindComplete=e(this.raiseBindComplete,this),this.raiseActionManual=e(this.raiseActionManual,this),this.raiseAction=e(this.raiseAction,this),this.publish=e(this.publish,this),this.processServerAction=e(this.processServerAction,this),this.processRequestUrl=e(this.processRequestUrl,this),this.processQueue=e(this.processQueue,this),this.processPendingReceives=e(this.processPendingReceives,this),this.processAdvice=e(this.processAdvice,this),this.preRaise=e(this.preRaise,this),this.postRaise=e(this.postRaise,this),this.performUnsubscribeCallback=e(this.performUnsubscribeCallback,this),this.performUnsubscribe=e(this.performUnsubscribe,this),this.performUnbindCallback=e(this.performUnbindCallback,this),
this.performUnbind=e(this.performUnbind,this),this.performSubscribeCallback=e(this.performSubscribeCallback,this),this.performSubscribe=e(this.performSubscribe,this),this.performServiceCallback=e(this.performServiceCallback,this),this.performService=e(this.performService,this),this.performPublishCallback=e(this.performPublishCallback,this),this.performPublish=e(this.performPublish,this),this.performNotifyCallback=e(this.performNotifyCallback,this),this.performNotify=e(this.performNotify,this),this.performDisconnectCallback=e(this.performDisconnectCallback,this),this.performDisconnect=e(this.performDisconnect,this),this.performConnectCallback=e(this.performConnectCallback,this),this.performConnect=e(this.performConnect,this),this.performBindCallback=e(this.performBindCallback,this),this.performBind=e(this.performBind,this),this.notify=e(this.notify,this),this.maybeRaiseStateRestored=e(this.maybeRaiseStateRestored,this),this.inCallback=e(this.inCallback,this),this.inBatch=e(this.inBatch,this),this.getToken=e(this.getToken,this),this.getThreadId=e(this.getThreadId,this),this.getSynchronous=e(this.getSynchronous,this),this.getSubscribedChannels=e(this.getSubscribedChannels,this),this.getStreamRequestUrl=e(this.getStreamRequestUrl,this),this.getStreamRequestTimeout=e(this.getStreamRequestTimeout,this),this.getSessionId=e(this.getSessionId,this),this.getServerTimeout=e(this.getServerTimeout,this),this.getIsDisconnecting=e(this.getIsDisconnecting,this),this.getIsConnecting=e(this.getIsConnecting,this),this.getIsConnected=e(this.getIsConnected,this),this.getInstanceId=e(this.getInstanceId,this),this.getDisableWebSockets=e(this.getDisableWebSockets,this),this.getCustomOnReceiveWithTag=e(this.getCustomOnReceiveWithTag,this),this.getCustomOnReceive=e(this.getCustomOnReceive,this),this.getClientId=e(this.getClientId,this),this.getBoundRecords=e(this.getBoundRecords,this),this.endBatch=e(this.endBatch,this),this.doLongPolling=e(this.doLongPolling,this),this.disconnect=e(this.disconnect,this),this.decrementPendingRestoreStateCalls=e(this.decrementPendingRestoreStateCalls,this),this.connect=e(this.connect,this),this.clearSubscribedChannels=e(this.clearSubscribedChannels,this),this.clearBoundRecords=e(this.clearBoundRecords,this),this.checkSynchronous=e(this.checkSynchronous,this),this.bind=e(this.bind,this),this.addToQueue=e(this.addToQueue,this),this.addSubscribedOnReceive=e(this.addSubscribedOnReceive,this),this.addSubscribedChannels=e(this.addSubscribedChannels,this),this.addOnUnsubscribeSuccess=e(this.addOnUnsubscribeSuccess,this),this.addOnUnsubscribeFailure=e(this.addOnUnsubscribeFailure,this),this.addOnUnsubscribeComplete=e(this.addOnUnsubscribeComplete,this),this.addOnUnbindSuccess=e(this.addOnUnbindSuccess,this),this.addOnUnbindFailure=e(this.addOnUnbindFailure,this),this.addOnUnbindComplete=e(this.addOnUnbindComplete,this),this.addOnSubscribeSuccess=e(this.addOnSubscribeSuccess,this),this.addOnSubscribeFailure=e(this.addOnSubscribeFailure,this),this.addOnSubscribeComplete=e(this.addOnSubscribeComplete,this),this.addOnStreamFailure=e(this.addOnStreamFailure,this),this.addOnStateRestored=e(this.addOnStateRestored,this),this.addOnServiceSuccess=e(this.addOnServiceSuccess,this),this.addOnServiceFailure=e(this.addOnServiceFailure,this),this.addOnServiceComplete=e(this.addOnServiceComplete,this),this.addOnServerUnsubscribe=e(this.addOnServerUnsubscribe,this),this.addOnServerUnbind=e(this.addOnServerUnbind,this),this.addOnServerSubscribe=e(this.addOnServerSubscribe,this),this.addOnServerBind=e(this.addOnServerBind,this),this.addOnPublishSuccess=e(this.addOnPublishSuccess,this),this.addOnPublishFailure=e(this.addOnPublishFailure,this),this.addOnPublishComplete=e(this.addOnPublishComplete,this),this.addOnNotifySuccess=e(this.addOnNotifySuccess,this),this.addOnNotifyFailure=e(this.addOnNotifyFailure,this),this.addOnNotifyComplete=e(this.addOnNotifyComplete,this),this.addOnNotify=e(this.addOnNotify,this),this.addOnDisconnectComplete=e(this.addOnDisconnectComplete,this),this.addOnConnectSuccess=e(this.addOnConnectSuccess,this),this.addOnConnectFailure=e(this.addOnConnectFailure,this),this.addOnConnectComplete=e(this.addOnConnectComplete,this),this.addOnBindSuccess=e(this.addOnBindSuccess,this),this.addOnBindFailure=e(this.addOnBindFailure,this),this.addOnBindComplete=e(this.addOnBindComplete,this),this.addBoundRecords=e(this.addBoundRecords,this),this.activateStream=e(this.activateStream,this);var t,n;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),this._counter=0,this._lastBackoffTimeout=0,this._lastBackoffIndex=-1,this._threadCounters={},this._threadCountersLock=new fm.object,this._lastInterval=0,this._lastReconnect=null,this._connectArgs=null,this._responseArgs=null,this._reconnectCacheLock=new fm.object,this._reconnectCache=[],this._rebindCache={},this._resubscribeCache={},this._boundRecordsLock=new fm.object,this._boundRecords={},this._subscribedChannelsLock=new fm.object,this._subscribedChannels={},this._subscribedOnReceivesLock=new fm.object,this._subscribedOnReceives={},this._subscribedDynamicProperties={},this._pendingReceives={},this._customOnReceivesLock=new fm.object,this._customOnReceives={},this._stateLock=new fm.object,this._queueLock=new fm.object,this._queueActivated=!1,this._requestQueue={},this._supportedConnectionTypes=new Array(0),this._connectionType=fm.websync.connectionType.LongPolling,this._batchCounter=0,this._batchCounterLock=new fm.object,this._pendingRestoreStateCalls=0,this._pendingRestoreStateCallsLock=new fm.object,this._webSocketOpened=!1,this._counterLock=new fm.object,this.setSynchronous(!1),this.setToken(fm.websync.client.generateToken()),this.setInstanceId(fm.guid.newGuid()),this.setDisableWebSockets(!0),this._requestTransfer=fm.websync.messageTransferFactory.getHttpMessageTransfer(),void fm.util.attachProperties(this,arguments[0])):0===arguments.length?(s.__super__.constructor.call(this),this._counter=0,this._lastBackoffTimeout=0,this._lastBackoffIndex=-1,this._threadCounters={},this._threadCountersLock=new fm.object,this._lastInterval=0,this._lastReconnect=null,this._connectArgs=null,this._responseArgs=null,this._reconnectCacheLock=new fm.object,this._reconnectCache=[],this._rebindCache={},this._resubscribeCache={},this._boundRecordsLock=new fm.object,this._boundRecords={},this._subscribedChannelsLock=new fm.object,this._subscribedChannels={},this._subscribedOnReceivesLock=new fm.object,this._subscribedOnReceives={},this._subscribedDynamicProperties={},this._pendingReceives={},this._customOnReceivesLock=new fm.object,this._customOnReceives={},this._stateLock=new fm.object,this._queueLock=new fm.object,this._queueActivated=!1,this._requestQueue={},this._supportedConnectionTypes=new Array(0),this._connectionType=fm.websync.connectionType.LongPolling,this._batchCounter=0,this._batchCounterLock=new fm.object,this._pendingRestoreStateCalls=0,this._pendingRestoreStateCallsLock=new fm.object,this._webSocketOpened=!1,this._counterLock=new fm.object,this.setSynchronous(!1),this.setToken(fm.websync.client.generateToken()),this.setInstanceId(fm.guid.newGuid()),this.setDisableWebSockets(!0),void(this._requestTransfer=fm.websync.messageTransferFactory.getHttpMessageTransfer())):1===arguments.length?(t=arguments[0],void s.call(this,t,t)):2===arguments.length?(t=arguments[0],n=arguments[1],s.call(this),this.setRequestUrl(t),void this.setStreamRequestUrl(n)):void 0}return t(s,n),s.prototype.__streamRequestUrl=null,s._argsKey=null,s.prototype._batchCounter=0,s.prototype._batchCounterLock=null,s._bayeuxMinimumVersion=null,s._bayeuxVersion=null,s.prototype._boundRecords=null,s.prototype._boundRecordsLock=null,s.prototype._clientId=null,s.prototype._connectArgs=null,s.prototype._connectionType=null,s.prototype._counter=0,s.prototype._counterLock=null,s.prototype._customOnReceives=null,s.prototype._customOnReceivesLock=null,s.prototype._disableWebSockets=!1,s.prototype._instanceId=null,s.prototype._isConnected=!1,s.prototype._isConnecting=!1,s.prototype._isDisconnecting=!1,s.prototype._lastBackoffIndex=0,s.prototype._lastBackoffTimeout=0,s.prototype._lastInterval=0,s.prototype._lastReconnect=null,s.prototype._onBindComplete=null,s._onBindEnd=null,s.prototype._onBindFailure=null,s._onBindRequest=null,s._onBindResponse=null,s.prototype._onBindSuccess=null,s.prototype._onConnectComplete=null,s._onConnectEnd=null,s.prototype._onConnectFailure=null,s._onConnectRequest=null,s._onConnectResponse=null,s.prototype._onConnectSuccess=null,s.prototype._onDisconnectComplete=null,s._onDisconnectEnd=null,s._onDisconnectRequest=null,s._onDisconnectResponse=null,s.prototype._onNotify=null,s.prototype._onNotifyComplete=null,s._onNotifyEnd=null,s.prototype._onNotifyFailure=null,s._onNotifyRequest=null,s._onNotifyResponse=null,s.prototype._onNotifySuccess=null,s.prototype._onPublishComplete=null,s._onPublishEnd=null,s.prototype._onPublishFailure=null,s._onPublishRequest=null,s._onPublishResponse=null,s.prototype._onPublishSuccess=null,s.prototype._onServerBind=null,s.prototype._onServerSubscribe=null,s.prototype._onServerUnbind=null,s.prototype._onServerUnsubscribe=null,s.prototype._onServiceComplete=null,s._onServiceEnd=null,s.prototype._onServiceFailure=null,s._onServiceRequest=null,s._onServiceResponse=null,s.prototype._onServiceSuccess=null,s.prototype._onStateRestored=null,s.prototype._onStreamFailure=null,s.prototype._onSubscribeComplete=null,s._onSubscribeEnd=null,s.prototype._onSubscribeFailure=null,s._onSubscribeRequest=null,s._onSubscribeResponse=null,s.prototype._onSubscribeSuccess=null,s.prototype._onUnbindComplete=null,s._onUnbindEnd=null,s.prototype._onUnbindFailure=null,s._onUnbindRequest=null,s._onUnbindResponse=null,s.prototype._onUnbindSuccess=null,s.prototype._onUnsubscribeComplete=null,s._onUnsubscribeEnd=null,s.prototype._onUnsubscribeFailure=null,s._onUnsubscribeRequest=null,s._onUnsubscribeResponse=null,s.prototype._onUnsubscribeSuccess=null,s.prototype._pendingReceives=null,s.prototype._pendingRestoreStateCalls=0,s.prototype._pendingRestoreStateCallsLock=null,s.prototype._queueActivated=!1,s.prototype._queueLock=null,s.prototype._rebindCache=null,s.prototype._reconnectCache=null,s.prototype._reconnectCacheLock=null,s.prototype._requestQueue=null,s.prototype._requestTransfer=null,s._requestUrlCache=null,s._requestUrlCacheLock=null,s.prototype._responseArgs=null,s.prototype._resubscribeCache=null,s.prototype._serverTimeout=0,s.prototype._sessionId=null,s._stateKey=null,s.prototype._stateLock=null,s.prototype._streamRequestTransfer=null,s.prototype._subscribedChannels=null,s.prototype._subscribedChannelsLock=null,s.prototype._subscribedDynamicProperties=null,s.prototype._subscribedOnReceives=null,s.prototype._subscribedOnReceivesLock=null,s.prototype._supportedConnectionTypes=null,s.prototype._synchronous=null,s.prototype._threadCounters=null,s.prototype._threadCountersLock=null,s.prototype._token=null,s.prototype._webSocketOpened=!1,s.addOnBindEnd=function(){var e;return e=arguments[0],fm.websync.client._onBindEnd=fm.delegate.combine(fm.websync.client._onBindEnd,e)},s.addOnBindRequest=function(){var e;return e=arguments[0],fm.websync.client._onBindRequest=fm.delegate.combine(fm.websync.client._onBindRequest,e)},s.addOnBindResponse=function(){var e;return e=arguments[0],fm.websync.client._onBindResponse=fm.delegate.combine(fm.websync.client._onBindResponse,e)},s.addOnConnectEnd=function(){var e;return e=arguments[0],fm.websync.client._onConnectEnd=fm.delegate.combine(fm.websync.client._onConnectEnd,e)},s.addOnConnectRequest=function(){var e;return e=arguments[0],fm.websync.client._onConnectRequest=fm.delegate.combine(fm.websync.client._onConnectRequest,e)},s.addOnConnectResponse=function(){var e;return e=arguments[0],fm.websync.client._onConnectResponse=fm.delegate.combine(fm.websync.client._onConnectResponse,e)},s.addOnDisconnectEnd=function(){var e;return e=arguments[0],fm.websync.client._onDisconnectEnd=fm.delegate.combine(fm.websync.client._onDisconnectEnd,e)},s.addOnDisconnectRequest=function(){var e;return e=arguments[0],fm.websync.client._onDisconnectRequest=fm.delegate.combine(fm.websync.client._onDisconnectRequest,e)},s.addOnDisconnectResponse=function(){var e;return e=arguments[0],fm.websync.client._onDisconnectResponse=fm.delegate.combine(fm.websync.client._onDisconnectResponse,e)},s.addOnNotifyEnd=function(){var e;return e=arguments[0],fm.websync.client._onNotifyEnd=fm.delegate.combine(fm.websync.client._onNotifyEnd,e)},s.addOnNotifyRequest=function(){var e;return e=arguments[0],fm.websync.client._onNotifyRequest=fm.delegate.combine(fm.websync.client._onNotifyRequest,e)},s.addOnNotifyResponse=function(){var e;return e=arguments[0],fm.websync.client._onNotifyResponse=fm.delegate.combine(fm.websync.client._onNotifyResponse,e)},s.addOnPublishEnd=function(){var e;return e=arguments[0],fm.websync.client._onPublishEnd=fm.delegate.combine(fm.websync.client._onPublishEnd,e)},s.addOnPublishRequest=function(){var e;return e=arguments[0],fm.websync.client._onPublishRequest=fm.delegate.combine(fm.websync.client._onPublishRequest,e)},s.addOnPublishResponse=function(){var e;return e=arguments[0],fm.websync.client._onPublishResponse=fm.delegate.combine(fm.websync.client._onPublishResponse,e)},s.addOnServiceEnd=function(){var e;return e=arguments[0],fm.websync.client._onServiceEnd=fm.delegate.combine(fm.websync.client._onServiceEnd,e)},s.addOnServiceRequest=function(){var e;return e=arguments[0],fm.websync.client._onServiceRequest=fm.delegate.combine(fm.websync.client._onServiceRequest,e)},s.addOnServiceResponse=function(){var e;return e=arguments[0],fm.websync.client._onServiceResponse=fm.delegate.combine(fm.websync.client._onServiceResponse,e)},s.addOnSubscribeEnd=function(){var e;return e=arguments[0],fm.websync.client._onSubscribeEnd=fm.delegate.combine(fm.websync.client._onSubscribeEnd,e)},s.addOnSubscribeRequest=function(){var e;return e=arguments[0],fm.websync.client._onSubscribeRequest=fm.delegate.combine(fm.websync.client._onSubscribeRequest,e)},s.addOnSubscribeResponse=function(){var e;return e=arguments[0],fm.websync.client._onSubscribeResponse=fm.delegate.combine(fm.websync.client._onSubscribeResponse,e)},s.addOnUnbindEnd=function(){var e;return e=arguments[0],fm.websync.client._onUnbindEnd=fm.delegate.combine(fm.websync.client._onUnbindEnd,e)},s.addOnUnbindRequest=function(){var e;return e=arguments[0],fm.websync.client._onUnbindRequest=fm.delegate.combine(fm.websync.client._onUnbindRequest,e)},s.addOnUnbindResponse=function(){var e;return e=arguments[0],fm.websync.client._onUnbindResponse=fm.delegate.combine(fm.websync.client._onUnbindResponse,e)},s.addOnUnsubscribeEnd=function(){var e;return e=arguments[0],fm.websync.client._onUnsubscribeEnd=fm.delegate.combine(fm.websync.client._onUnsubscribeEnd,e)},s.addOnUnsubscribeRequest=function(){var e;return e=arguments[0],fm.websync.client._onUnsubscribeRequest=fm.delegate.combine(fm.websync.client._onUnsubscribeRequest,e)},s.addOnUnsubscribeResponse=function(){var e;return e=arguments[0],fm.websync.client._onUnsubscribeResponse=fm.delegate.combine(fm.websync.client._onUnsubscribeResponse,e)},s.generateToken=function(){var e;return e=fm.intExtensions.toString(fm.dateTime.getUtcNow().getTicks()),fm.stringExtensions.substring(e,e.length-12,8)},s.getChannelForPublish=function(){var e,t,n,s;return s=arguments[0],n=arguments[1],e=s,null===e||"undefined"==typeof e?n.__channel:(t=s.getChannel(),null===t||"undefined"==typeof t?n.__channel:s.getChannel())},s.getChannelForService=function(){var e,t,n,s;return n=arguments[0],s=arguments[1],e=n,null===e||"undefined"==typeof e?s.__channel:(t=n.getChannel(),null===t||"undefined"==typeof t?s.__channel:n.getChannel())},s.getChannelsForSubscribe=function(){var e,t,n,s;return n=arguments[0],s=arguments[1],e=n,null===e||"undefined"==typeof e?s.__channels:(t=n.getChannels(),null===t||"undefined"==typeof t?s.__channels:n.getChannels())},s.getChannelsForUnsubscribe=function(){var e,t,n,s;return n=arguments[0],s=arguments[1],e=n,null===e||"undefined"==typeof e?s.__channels:(t=n.getChannels(),null===t||"undefined"==typeof t?s.__channels:n.getChannels())},s.getDataBytesForNotify=function(){var e,t,n,s;return s=arguments[0],n=arguments[1],e=s,null===e||"undefined"==typeof e?n.__dataBytes:(t=s.getDataBytes(),null===t||"undefined"==typeof t?n.__dataBytes:s.getDataBytes())},s.getDataBytesForPublish=function(){var e,t,n,s;return s=arguments[0],n=arguments[1],e=s,null===e||"undefined"==typeof e?n.__dataBytes:(t=s.getDataBytes(),null===t||"undefined"==typeof t?n.__dataBytes:s.getDataBytes())},s.getDataBytesForService=function(){var e,t,n,s;return n=arguments[0],s=arguments[1],e=n,null===e||"undefined"==typeof e?s.__dataBytes:(t=n.getDataBytes(),null===t||"undefined"==typeof t?s.__dataBytes:n.getDataBytes())},s.getDataJsonForNotify=function(){var e,t,n,s;return s=arguments[0],n=arguments[1],e=s,null===e||"undefined"==typeof e?n.__dataJson:(t=s.getDataJson(),null===t||"undefined"==typeof t?n.__dataJson:s.getDataJson())},s.getDataJsonForPublish=function(){var e,t,n,s;return s=arguments[0],n=arguments[1],e=s,null===e||"undefined"==typeof e?n.__dataJson:(t=s.getDataJson(),null===t||"undefined"==typeof t?n.__dataJson:s.getDataJson())},s.getDataJsonForService=function(){var e,t,n,s;return n=arguments[0],s=arguments[1],e=n,null===e||"undefined"==typeof e?s.__dataJson:(t=n.getDataJson(),null===t||"undefined"==typeof t?s.__dataJson:n.getDataJson())},s.getExtensions=function(){var e,t,n;return n=arguments[0],t=arguments[1],e=n,null!==e&&"undefined"!=typeof e?n.getExtensions():t.getExtensions()},s.getRecordsForBind=function(){var e,t,n,s;return s=arguments[0],n=arguments[1],e=s,null===e||"undefined"==typeof e?n.__records:(t=s.getRecords(),null===t||"undefined"==typeof t?n.__records:s.getRecords())},s.getRecordsForUnbind=function(){var e,t,n,s;return n=arguments[0],s=arguments[1],e=n,null===e||"undefined"==typeof e?s.__records:(t=n.getRecords(),null===t||"undefined"==typeof t?s.__records:n.getRecords())},s.getSubscribeKey=function(){var e,t,n;return t=arguments[0],n=arguments[1],e=n,null===e||"undefined"==typeof e?fm.stringExtensions.format("-1|{0}",t):fm.stringExtensions.format("{0}|{1}{2}",fm.intExtensions.toString(n.length),n,t)},s.getTimestamp=function(){var e,t;return t=arguments[0],e=t,null!==e&&"undefined"!=typeof e?t.getTimestamp():null},s.removeOnBindEnd=function(){var e;return e=arguments[0],fm.websync.client._onBindEnd=fm.delegate.remove(fm.websync.client._onBindEnd,e)},s.removeOnBindRequest=function(){var e;return e=arguments[0],fm.websync.client._onBindRequest=fm.delegate.remove(fm.websync.client._onBindRequest,e)},s.removeOnBindResponse=function(){var e;return e=arguments[0],fm.websync.client._onBindResponse=fm.delegate.remove(fm.websync.client._onBindResponse,e)},s.removeOnConnectEnd=function(){var e;return e=arguments[0],fm.websync.client._onConnectEnd=fm.delegate.remove(fm.websync.client._onConnectEnd,e)},s.removeOnConnectRequest=function(){var e;return e=arguments[0],fm.websync.client._onConnectRequest=fm.delegate.remove(fm.websync.client._onConnectRequest,e)},s.removeOnConnectResponse=function(){var e;return e=arguments[0],fm.websync.client._onConnectResponse=fm.delegate.remove(fm.websync.client._onConnectResponse,e)},s.removeOnDisconnectEnd=function(){var e;return e=arguments[0],fm.websync.client._onDisconnectEnd=fm.delegate.remove(fm.websync.client._onDisconnectEnd,e)},s.removeOnDisconnectRequest=function(){var e;return e=arguments[0],fm.websync.client._onDisconnectRequest=fm.delegate.remove(fm.websync.client._onDisconnectRequest,e)},s.removeOnDisconnectResponse=function(){var e;return e=arguments[0],fm.websync.client._onDisconnectResponse=fm.delegate.remove(fm.websync.client._onDisconnectResponse,e)},s.removeOnNotifyEnd=function(){var e;return e=arguments[0],fm.websync.client._onNotifyEnd=fm.delegate.remove(fm.websync.client._onNotifyEnd,e)},s.removeOnNotifyRequest=function(){var e;return e=arguments[0],fm.websync.client._onNotifyRequest=fm.delegate.remove(fm.websync.client._onNotifyRequest,e)},s.removeOnNotifyResponse=function(){var e;return e=arguments[0],fm.websync.client._onNotifyResponse=fm.delegate.remove(fm.websync.client._onNotifyResponse,e)},s.removeOnPublishEnd=function(){var e;return e=arguments[0],fm.websync.client._onPublishEnd=fm.delegate.remove(fm.websync.client._onPublishEnd,e)},s.removeOnPublishRequest=function(){var e;return e=arguments[0],fm.websync.client._onPublishRequest=fm.delegate.remove(fm.websync.client._onPublishRequest,e)},s.removeOnPublishResponse=function(){var e;return e=arguments[0],fm.websync.client._onPublishResponse=fm.delegate.remove(fm.websync.client._onPublishResponse,e)},s.removeOnServiceEnd=function(){var e;return e=arguments[0],fm.websync.client._onServiceEnd=fm.delegate.remove(fm.websync.client._onServiceEnd,e)},s.removeOnServiceRequest=function(){var e;return e=arguments[0],fm.websync.client._onServiceRequest=fm.delegate.remove(fm.websync.client._onServiceRequest,e)},s.removeOnServiceResponse=function(){var e;return e=arguments[0],fm.websync.client._onServiceResponse=fm.delegate.remove(fm.websync.client._onServiceResponse,e)},s.removeOnSubscribeEnd=function(){var e;return e=arguments[0],fm.websync.client._onSubscribeEnd=fm.delegate.remove(fm.websync.client._onSubscribeEnd,e)},s.removeOnSubscribeRequest=function(){var e;return e=arguments[0],fm.websync.client._onSubscribeRequest=fm.delegate.remove(fm.websync.client._onSubscribeRequest,e)},s.removeOnSubscribeResponse=function(){var e;return e=arguments[0],fm.websync.client._onSubscribeResponse=fm.delegate.remove(fm.websync.client._onSubscribeResponse,e)},s.removeOnUnbindEnd=function(){var e;return e=arguments[0],fm.websync.client._onUnbindEnd=fm.delegate.remove(fm.websync.client._onUnbindEnd,e)},s.removeOnUnbindRequest=function(){var e;return e=arguments[0],fm.websync.client._onUnbindRequest=fm.delegate.remove(fm.websync.client._onUnbindRequest,e)},s.removeOnUnbindResponse=function(){var e;return e=arguments[0],fm.websync.client._onUnbindResponse=fm.delegate.remove(fm.websync.client._onUnbindResponse,e)},s.removeOnUnsubscribeEnd=function(){var e;return e=arguments[0],fm.websync.client._onUnsubscribeEnd=fm.delegate.remove(fm.websync.client._onUnsubscribeEnd,e)},s.removeOnUnsubscribeRequest=function(){var e;return e=arguments[0],fm.websync.client._onUnsubscribeRequest=fm.delegate.remove(fm.websync.client._onUnsubscribeRequest,e)},s.removeOnUnsubscribeResponse=function(){var e;return e=arguments[0],fm.websync.client._onUnsubscribeResponse=fm.delegate.remove(fm.websync.client._onUnsubscribeResponse,e)},s.prototype.activateStream=function(){var e,t,n;return t=arguments[0],n=arguments[1],this.raiseConnectSuccess(this._connectArgs,this._responseArgs),this.raiseConnectComplete(this._connectArgs,this._responseArgs),e=new fm.websync.clientConnectEndArgs,e.setMethodArgs(t),this.raiseCompleteEvent(fm.websync.client._onConnectEnd,e,"OnConnectEnd",n),this.processQueue(!0),this.stream(this._connectArgs,!1)},s.prototype.addBoundRecords=function(){var e,t,n,s,r,i;for(r=arguments[0],e=r,i=[],t=0,n=e.length;n>t;t++)s=e[t],i.push(this._boundRecords[s.getKey()]=s);return i},s.prototype.addOnBindComplete=function(){var e;return e=arguments[0],this._onBindComplete=fm.delegate.combine(this._onBindComplete,e)},s.prototype.addOnBindFailure=function(){var e;return e=arguments[0],this._onBindFailure=fm.delegate.combine(this._onBindFailure,e)},s.prototype.addOnBindSuccess=function(){var e;return e=arguments[0],this._onBindSuccess=fm.delegate.combine(this._onBindSuccess,e)},s.prototype.addOnConnectComplete=function(){var e;return e=arguments[0],this._onConnectComplete=fm.delegate.combine(this._onConnectComplete,e)},s.prototype.addOnConnectFailure=function(){var e;return e=arguments[0],this._onConnectFailure=fm.delegate.combine(this._onConnectFailure,e)},s.prototype.addOnConnectSuccess=function(){var e;return e=arguments[0],this._onConnectSuccess=fm.delegate.combine(this._onConnectSuccess,e)},s.prototype.addOnDisconnectComplete=function(){var e;return e=arguments[0],this._onDisconnectComplete=fm.delegate.combine(this._onDisconnectComplete,e)},s.prototype.addOnNotify=function(){var e;return e=arguments[0],this._onNotify=fm.delegate.combine(this._onNotify,e)},s.prototype.addOnNotifyComplete=function(){var e;return e=arguments[0],this._onNotifyComplete=fm.delegate.combine(this._onNotifyComplete,e)},s.prototype.addOnNotifyFailure=function(){var e;return e=arguments[0],this._onNotifyFailure=fm.delegate.combine(this._onNotifyFailure,e)},s.prototype.addOnNotifySuccess=function(){var e;return e=arguments[0],this._onNotifySuccess=fm.delegate.combine(this._onNotifySuccess,e)},s.prototype.addOnPublishComplete=function(){var e;return e=arguments[0],this._onPublishComplete=fm.delegate.combine(this._onPublishComplete,e)},s.prototype.addOnPublishFailure=function(){var e;return e=arguments[0],this._onPublishFailure=fm.delegate.combine(this._onPublishFailure,e)},s.prototype.addOnPublishSuccess=function(){var e;return e=arguments[0],this._onPublishSuccess=fm.delegate.combine(this._onPublishSuccess,e)},s.prototype.addOnServerBind=function(){var e;return e=arguments[0],this._onServerBind=fm.delegate.combine(this._onServerBind,e)},s.prototype.addOnServerSubscribe=function(){var e;return e=arguments[0],this._onServerSubscribe=fm.delegate.combine(this._onServerSubscribe,e)},s.prototype.addOnServerUnbind=function(){var e;return e=arguments[0],this._onServerUnbind=fm.delegate.combine(this._onServerUnbind,e)},s.prototype.addOnServerUnsubscribe=function(){var e;return e=arguments[0],this._onServerUnsubscribe=fm.delegate.combine(this._onServerUnsubscribe,e)},s.prototype.addOnServiceComplete=function(){var e;return e=arguments[0],this._onServiceComplete=fm.delegate.combine(this._onServiceComplete,e)},s.prototype.addOnServiceFailure=function(){var e;return e=arguments[0],this._onServiceFailure=fm.delegate.combine(this._onServiceFailure,e)},s.prototype.addOnServiceSuccess=function(){var e;return e=arguments[0],this._onServiceSuccess=fm.delegate.combine(this._onServiceSuccess,e)},s.prototype.addOnStateRestored=function(){var e;return e=arguments[0],this._onStateRestored=fm.delegate.combine(this._onStateRestored,e)},s.prototype.addOnStreamFailure=function(){var e;return e=arguments[0],this._onStreamFailure=fm.delegate.combine(this._onStreamFailure,e)},s.prototype.addOnSubscribeComplete=function(){var e;return e=arguments[0],this._onSubscribeComplete=fm.delegate.combine(this._onSubscribeComplete,e)},s.prototype.addOnSubscribeFailure=function(){var e;return e=arguments[0],this._onSubscribeFailure=fm.delegate.combine(this._onSubscribeFailure,e)},s.prototype.addOnSubscribeSuccess=function(){var e;return e=arguments[0],this._onSubscribeSuccess=fm.delegate.combine(this._onSubscribeSuccess,e)},s.prototype.addOnUnbindComplete=function(){var e;return e=arguments[0],this._onUnbindComplete=fm.delegate.combine(this._onUnbindComplete,e)},s.prototype.addOnUnbindFailure=function(){var e;return e=arguments[0],this._onUnbindFailure=fm.delegate.combine(this._onUnbindFailure,e)},s.prototype.addOnUnbindSuccess=function(){var e;return e=arguments[0],this._onUnbindSuccess=fm.delegate.combine(this._onUnbindSuccess,e)},s.prototype.addOnUnsubscribeComplete=function(){var e;return e=arguments[0],this._onUnsubscribeComplete=fm.delegate.combine(this._onUnsubscribeComplete,e)},s.prototype.addOnUnsubscribeFailure=function(){var e;return e=arguments[0],this._onUnsubscribeFailure=fm.delegate.combine(this._onUnsubscribeFailure,e)},s.prototype.addOnUnsubscribeSuccess=function(){var e;return e=arguments[0],this._onUnsubscribeSuccess=fm.delegate.combine(this._onUnsubscribeSuccess,e)},s.prototype.addSubscribedChannels=function(){var e,t,n,s,r,i,o,a,u,c;for(c=arguments[0],s=arguments[1],r=null,e=new fm.holder(r),t=fm.hashExtensions.tryGetValue(this._subscribedChannels,c,e),r=e.getValue(),t||(r={},this._subscribedChannels[c]=r),n=s,a=[],i=0,o=n.length;o>i;i++)u=n[i],fm.hashExtensions.containsKey(r,u)?a.push(void 0):a.push(r[u]=new fm.object);return a},s.prototype.addSubscribedOnReceive=function(){var e,t,n,s,r,i,o,a,u,c,l,h;for(h=arguments[0],s=arguments[1],u=arguments[2],i=arguments[3],c=arguments[4],r=null,e=new fm.holder(r),t=fm.hashExtensions.tryGetValue(this._subscribedOnReceives,h,e),r=e.getValue(),t||(r={},this._subscribedOnReceives[h]=r),n=s,o=0,a=n.length;a>o;o++)l=n[o],r[l]=u,this._subscribedDynamicProperties[fm.websync.client.getSubscribeKey(l,h)]=i;return c=this.processPendingReceives(s,c)},s.prototype.addToQueue=function(){var e,t,n,s,r;return t=arguments[0],r=arguments[1],n=arguments[2],s=arguments[3],r=null!=r?r:this.getRequestUrl(),e=fm.stringExtensions.format("{0}|{1}{2}",fm.intExtensions.toString(s),n?"1":"0",r),fm.hashExtensions.containsKey(this._requestQueue,e)||(this._requestQueue[e]=[]),fm.arrayExtensions.add(this._requestQueue[e],t)},s.prototype.bind=function(){var e,t,n,s,r,i,o,a;if(r=arguments[0],e=r.getRecords(),null===e||"undefined"==typeof e||0===r.getRecords().length)throw new Error("records cannot be null.");for(t=r.getRecords(),i=0,o=t.length;o>i;i++){if(a=t[i],n=a.getKey(),null===n||"undefined"==typeof n)throw new Error("key cannot be null.");if(s=a.getValueJson(),null===s||"undefined"==typeof s)throw new Error("valueJson cannot be null.")}return this.performBind(r),this},s.prototype.checkSynchronous=function(){var e;return e=arguments[0],null!==e?e:null!==this.getSynchronous()?this.getSynchronous():!1},s.prototype.clearBoundRecords=function(){return fm.hashExtensions.clear(this._boundRecords)},s.prototype.clearSubscribedChannels=function(){return fm.hashExtensions.clear(this._subscribedChannels),fm.hashExtensions.clear(this._customOnReceives)},s.prototype.connect=function(){var e;return 1===arguments.length?(e=arguments[0],this.performConnect(e),this):0===arguments.length?this.connect(new fm.websync.connectArgs):void 0},s.prototype.decrementPendingRestoreStateCalls=function(){return this._pendingRestoreStateCalls--,this._pendingRestoreStateCalls},s.prototype.disconnect=function(){var e;return 0===arguments.length?this.disconnect(new fm.websync.disconnectArgs):1===arguments.length?(e=arguments[0],this.performDisconnect(e),this):void 0},s.prototype.doLongPolling=function(){return this._connectionType=fm.websync.connectionType.LongPolling,this._streamRequestTransfer=fm.websync.messageTransferFactory.getHttpMessageTransfer(),this.activateStream(this._connectArgs,this._responseArgs)},s.prototype.endBatch=function(){var e;return e=!1,this._batchCounter--,this._batchCounter<=0&&(this._batchCounter=0,e=!0),e&&this.processQueue(!1),this},s.prototype.getBoundRecords=function(){var e,t,n,s,r;for(t={},e=fm.hashExtensions.getKeys(this._boundRecords),n=0,s=e.length;s>n;n++)r=e[n],t[r]=this._boundRecords[r].duplicate();return t},s.prototype.getClientId=function(){return this._clientId},s.prototype.getCustomOnReceive=function(){var e;return e=arguments[0],this.getCustomOnReceiveWithTag(e,fm.stringExtensions.empty)},s.prototype.getCustomOnReceiveWithTag=function(){var e,t,n,s,r,i,o,a,u,c;if(a=arguments[0],c=arguments[1],e=a,null===e||"undefined"==typeof e)throw new Error("channel cannot be null.");return t=c,(null===t||"undefined"==typeof t)&&(c=fm.stringExtensions.empty),o=null,u=null,n=new fm.holder(u),s=fm.hashExtensions.tryGetValue(this._customOnReceives,c,n),u=n.getValue(),s?(r=new fm.holder(o),i=fm.hashExtensions.tryGetValue(u,a,r),o=r.getValue(),i||(o=null),o):o},s.prototype.getDisableWebSockets=function(){return this._disableWebSockets},s.prototype.getInstanceId=function(){return this._instanceId},s.prototype.getIsConnected=function(){return this._isConnected},s.prototype.getIsConnecting=function(){return this._isConnecting},s.prototype.getIsDisconnecting=function(){return this._isDisconnecting},s.prototype.getServerTimeout=function(){return this._serverTimeout},s.prototype.getSessionId=function(){return this._sessionId},s.prototype.getStreamRequestTimeout=function(){
return this.getRequestTimeout()+this.getServerTimeout()},s.prototype.getStreamRequestUrl=function(){return this.__streamRequestUrl},s.prototype.getSubscribedChannels=function(){var e,t,n,s,r,i,o,a,u,c,l,h,p,g,f;if(1===arguments.length){if(f=arguments[0],h=[],r=null,e=new fm.holder(r),t=fm.hashExtensions.tryGetValue(this._subscribedChannels,f,e),r=e.getValue(),t||(r=null),n=r,null!==n&&"undefined"!=typeof n)for(s=fm.hashExtensions.getKeys(r),i=0,u=s.length;u>i;i++)p=s[i],fm.arrayExtensions.add(h,p);return fm.arrayExtensions.toArray(h)}if(0===arguments.length){for(h=[],e=fm.hashExtensions.getKeys(this._subscribedChannels),o=0,c=e.length;c>o;o++)for(p=e[o],t=fm.hashExtensions.getKeys(this._subscribedChannels[p]),a=0,l=t.length;l>a;a++)g=t[a],fm.arrayExtensions.add(h,g);return fm.arrayExtensions.toArray(h)}},s.prototype.getSynchronous=function(){return this._synchronous},s.prototype.getThreadId=function(){return fm.managedThread.currentThreadId()},s.prototype.getToken=function(){return this._token},s.prototype.inBatch=function(){return this._batchCounter>0},s.prototype.inCallback=function(){var e;return e=this.getThreadId(),fm.hashExtensions.containsKey(this._threadCounters,e)&&this._threadCounters[e]>0},s.prototype.maybeRaiseStateRestored=function(){var e,t;return 0===this.decrementPendingRestoreStateCalls()&&(t=this._connectArgs,e=t,null!==e&&"undefined"!=typeof e)?this.raiseStateRestored(t):void 0},s.prototype.notify=function(){var e;if(e=arguments[0],fm.stringExtensions.isNullOrEmpty(e.getDataJson()))throw new Error("dataJson cannot be null.");return this.performNotify(e),this},s.prototype.performBind=function(){var e,t,n,s,r,i;return t=arguments[0],null===t.getAutoRebind()&&t.setAutoRebind(!this.inCallback()),e=new fm.websync.clientBindRequestArgs,e.setMethodArgs(t),this.raiseRequestEvent(fm.websync.client._onBindRequest,e,"OnBindRequest")?(i=this.checkSynchronous(t.getSynchronous()),r=new fm.websync.clientRequest,n=new fm.websync.message("/meta/bind"),n.setValidate(!1),n.setRecords(t.getRecords()),n.setExtensions(t.getExtensions()),r.setMessage(n),r.setCallback(this.performBindCallback),s=r,s.setDynamicValue(fm.websync.client._argsKey,t),this.addToQueue(s,t.getRequestUrl(),i,null!==t.getRequestTimeout()?t.getRequestTimeout():0),this.processQueue(!1)):void 0},s.prototype.performBindCallback=function(){var e,t,n,s,r,i,o,a,u,c,l;if(l=arguments[0],i=l.getDynamicValue(fm.websync.client._argsKey),n=new fm.websync.clientBindResponseArgs,n.setMethodArgs(i),this.raiseResponseEvent(fm.websync.client._onBindResponse,n,"OnBindResponse",l),e=l.getException(),null!==e&&"undefined"!=typeof e){if(o=this.raiseBindFailure(i,l,!1),this.raiseBindComplete(i,l),s=new fm.websync.clientBindEndArgs,s.setMethodArgs(i),this.raiseCompleteEvent(fm.websync.client._onBindEnd,s,"OnBindEnd",l),o)return i.setIsRetry(!0),this.bind(i);if(i.getIsRebind())return this.maybeRaiseStateRestored()}else{if(i.getAutoRebind()===!0)for(fm.arrayExtensions.add(this._reconnectCache,i),t=l.getResponse().getRecords(),a=0,u=t.length;u>a;a++)c=t[a],this._rebindCache[c.getKey()]=i;if(this.addBoundRecords(l.getResponse().getRecords()),this.raiseBindSuccess(i,l),this.raiseBindComplete(i,l),r=new fm.websync.clientBindEndArgs,r.setMethodArgs(i),this.raiseCompleteEvent(fm.websync.client._onBindEnd,r,"OnBindEnd",l),i.getIsRebind())return this.maybeRaiseStateRestored()}},s.prototype.performConnect=function(){var e,t,n,s,r,i,o,a,u,c,l,h,p;return r=arguments[0],s=new fm.websync.clientConnectRequestArgs,s.setMethodArgs(r),this.raiseRequestEvent(fm.websync.client._onConnectRequest,s,"OnConnectRequest")?this.getIsConnecting()||this.getIsConnected()?(h=this.getIsConnecting()?"Client is already connecting.":"Client is already connected.",t=new fm.websync.clientResponseArgs,t.setDynamicProperties(r.getDynamicProperties()),o=new fm.websync.message("/meta/handshake"),o.setExtensions(r.getExtensions()),o.setTimestamp(fm.dateTime.getUtcNow()),o.setSuccessful(!1),o.setError(h),t.setResponse(o),t.setException(new Error(h)),l=t,e=new fm.websync.clientConnectResponseArgs,e.setMethodArgs(r),this.raiseResponseEvent(fm.websync.client._onConnectResponse,e,"OnConnectResponse",l),this.raiseConnectFailure(r,l,!1),this.raiseConnectComplete(r,l),n=new fm.websync.clientConnectEndArgs,n.setMethodArgs(r),void this.raiseCompleteEvent(fm.websync.client._onConnectEnd,n,"OnConnectEnd",l)):(this.setIsConnecting(!0),this._connectArgs=r,i=[],this.getDisableWebSockets()||fm.arrayExtensions.add(i,fm.websync.connectionType.WebSocket),fm.arrayExtensions.add(i,fm.websync.connectionType.LongPolling),this._supportedConnectionTypes=fm.arrayExtensions.toArray(i),p=this.checkSynchronous(r.getSynchronous()),c=new fm.websync.clientRequest,a=new fm.websync.message("/meta/handshake"),a.setVersion(fm.websync.client._bayeuxVersion),a.setMinimumVersion(fm.websync.client._bayeuxMinimumVersion),a.setSupportedConnectionTypes(this._supportedConnectionTypes),a.setExtensions(r.getExtensions()),c.setMessage(a),c.setCallback(this.performConnectCallback),u=c,null!==r.getLastClientId()&&null!==r.getLastSessionId()&&(u.getMessage().setLastClientId(r.getLastClientId()),u.getMessage().setLastSessionId(r.getLastSessionId())),u.setDynamicValue(fm.websync.client._argsKey,r),this.send(u,r.getRequestUrl(),p,null!==r.getRequestTimeout()?r.getRequestTimeout():0)):void 0},s.prototype.performConnectCallback=function(){var e,t,n,s,r,i,o,a,u,c,l,h,p,g,f,m,d,y,_,b,v,R,C,w,S,O,x,E;if(v=arguments[0],h=v.getDynamicValue(fm.websync.client._argsKey),a=new fm.websync.clientConnectResponseArgs,a.setMethodArgs(h),this.raiseResponseEvent(fm.websync.client._onConnectResponse,a,"OnConnectResponse",v),e=v.getException(),null===e||"undefined"==typeof e){for(this.setClientId(v.getResponse().getClientId()),w=v.getResponse().getSessionId(),null!==w&&this.setSessionId(w),C=v.getResponse().getServerTimeout(),null!==C?this.setServerTimeout(C):this.setServerTimeout(25e3),f=2147483647,t=v.getResponse().getSupportedConnectionTypes(),m=0,y=t.length;y>m;m++)for(E=t[m],g=0;g<this._supportedConnectionTypes.length;)try{if(this._supportedConnectionTypes[g]===E){f>g&&(f=g);break}}finally{g++}0>f||f>this._supportedConnectionTypes.length?v.setException(new Error("Could not negotiate a connection type with the server.")):this._connectionType=this._supportedConnectionTypes[f]}if(n=v.getException(),null===n||"undefined"==typeof n){for(this._lastBackoffIndex=-1,this._lastBackoffTimeout=0,b=[],fm.arrayExtensions.addRange(b,this._reconnectCache),fm.arrayExtensions.clear(this._reconnectCache),fm.hashExtensions.clear(this._rebindCache),fm.hashExtensions.clear(this._resubscribeCache),this._pendingRestoreStateCalls=fm.arrayExtensions.getCount(b),s=b,d=0,_=s.length;_>d;d++)if(p=s[d],l=fm.global.tryCast(p,fm.websync.bindArgs),r=l,null!==r&&"undefined"!=typeof r)l.setIsRetry(!1),l.setIsRebind(!0),this.bind(l);else if(O=fm.global.tryCast(p,fm.websync.subscribeArgs),i=O,null!==i&&"undefined"!=typeof i){O.setIsRetry(!1),O.setIsResubscribe(!0),this.subscribe(O);continue}if(this.setIsConnecting(!1),this.setIsConnected(!0),this._responseArgs=v,this._connectionType!==fm.websync.connectionType.WebSocket||this.getDisableWebSockets())return this.doLongPolling();if(!this.tryWebSocket())return this.doLongPolling()}else{switch(this.setIsConnecting(!1),R=!1,h.getRetryMode()){case fm.websync.connectRetryMode.Aggressive:R=!0;break;case fm.websync.connectRetryMode.Intelligent:R=v.getErrorCode()<800||v.getErrorCode()>899}if(R=this.raiseConnectFailure(h,v,R),this.raiseConnectComplete(h,v),c=new fm.websync.clientConnectEndArgs,c.setMethodArgs(h),this.raiseCompleteEvent(fm.websync.client._onConnectEnd,c,"OnConnectEnd",v),R)return x=0,o=h.getRetryBackoff(),null!==o&&"undefined"!=typeof o&&(u=new fm.websync.backoffArgs,u.setIndex(this._lastBackoffIndex+1),u.setLastTimeout(this._lastBackoffTimeout),x=h.getRetryBackoff()(u)),x>0?(S=new fm.websync.deferredRetryConnectState,S.setConnectArgs(h),S.setBackoffTimeout(x),fm.deferrer.defer(this.retryConnectDeferred,x,S)):this.retryConnect(h,x)}},s.prototype.performDisconnect=function(){var e,t,n,s,r,i,o,a,u,c,l,h;return r=arguments[0],s=new fm.websync.clientDisconnectRequestArgs,s.setMethodArgs(r),this.raiseRequestEvent(fm.websync.client._onDisconnectRequest,s,"OnDisconnectRequest")?this.getIsDisconnecting()||!this.getIsConnected()?(l=this.getIsDisconnecting()?"Client is already disconnecting.":"Client is already disconnected.",t=new fm.websync.clientResponseArgs,t.setDynamicProperties(r.getDynamicProperties()),i=new fm.websync.message("/meta/handshake"),i.setExtensions(r.getExtensions()),i.setTimestamp(fm.dateTime.getUtcNow()),i.setSuccessful(!1),i.setError(l),t.setResponse(i),t.setException(new Error(l)),c=t,e=new fm.websync.clientDisconnectResponseArgs,e.setMethodArgs(r),this.raiseResponseEvent(fm.websync.client._onDisconnectResponse,e,"OnDisonnectResponse",c),this.raiseDisconnectComplete(r,c),n=new fm.websync.clientDisconnectEndArgs,n.setMethodArgs(r),void this.raiseCompleteEvent(fm.websync.client._onDisconnectEnd,n,"OnDisconnectEnd",c)):(this.setIsDisconnecting(!0),h=this.checkSynchronous(r.getSynchronous()),u=new fm.websync.clientRequest,o=new fm.websync.message("/meta/disconnect"),o.setExtensions(r.getExtensions()),u.setMessage(o),u.setCallback(this.performDisconnectCallback),a=u,a.setDynamicValue(fm.websync.client._argsKey,r),this.addToQueue(a,r.getRequestUrl(),h,null!==r.getRequestTimeout()?r.getRequestTimeout():0),this.processQueue(!1)):void 0},s.prototype.performDisconnectCallback=function(){var e,t,n,s,r,i,o,a;a=arguments[0],r=a.getDynamicValue(fm.websync.client._argsKey),n=new fm.websync.clientDisconnectResponseArgs,n.setMethodArgs(r),this.raiseResponseEvent(fm.websync.client._onDisconnectResponse,n,"OnDisconnectResponse",a),this.raiseForcedUnsubscribes(r,a),this.raiseForcedUnbinds(r,a),this.clearBoundRecords(),this.clearSubscribedChannels(),this.setIsDisconnecting(!1),this.setIsConnected(!1),this._webSocketOpened=!1;try{e=this._requestTransfer,null!==e&&"undefined"!=typeof e&&this._requestTransfer.shutdown(),t=this._streamRequestTransfer,null!==t&&"undefined"!=typeof t&&this._streamRequestTransfer.shutdown()}catch(i){o=i}finally{}return this.raiseDisconnectComplete(r,a),this._queueActivated=!1,s=new fm.websync.clientDisconnectEndArgs,s.setMethodArgs(r),this.raiseCompleteEvent(fm.websync.client._onDisconnectEnd,s,"OnDisconnectEnd",a)},s.prototype.performNotify=function(){var e,t,n,s,r,i;return n=arguments[0],e=new fm.websync.clientNotifyRequestArgs,e.setMethodArgs(n),this.raiseRequestEvent(fm.websync.client._onNotifyRequest,e,"OnNotifyRequest")?(i=this.checkSynchronous(n.getSynchronous()),r=new fm.websync.clientRequest,t=new fm.websync.message("/meta/notify"),t.setValidate(!1),t.setDataJson(n.getDataJson()),t.setExtensions(n.getExtensions()),r.setMessage(t),r.setCallback(this.performNotifyCallback),s=r,s.setDynamicValue(fm.websync.client._argsKey,n),this.addToQueue(s,n.getRequestUrl(),i,null!==n.getRequestTimeout()?n.getRequestTimeout():0),this.processQueue(!1)):void 0},s.prototype.performNotifyCallback=function(){var e,t,n,s,r,i,o;return o=arguments[0],r=o.getDynamicValue(fm.websync.client._argsKey),t=new fm.websync.clientNotifyResponseArgs,t.setMethodArgs(r),this.raiseResponseEvent(fm.websync.client._onNotifyResponse,t,"OnNotifyResponse",o),e=o.getException(),null===e||"undefined"==typeof e?(this.raiseNotifySuccess(r,o),this.raiseNotifyComplete(r,o),s=new fm.websync.clientNotifyEndArgs,s.setMethodArgs(r),this.raiseCompleteEvent(fm.websync.client._onNotifyEnd,s,"OnNotifyEnd",o)):(i=this.raiseNotifyFailure(r,o,!1),this.raiseNotifyComplete(r,o),n=new fm.websync.clientNotifyEndArgs,n.setMethodArgs(r),this.raiseCompleteEvent(fm.websync.client._onNotifyEnd,n,"OnNotifyEnd",o),i?(r.setIsRetry(!0),this.notify(r)):void 0)},s.prototype.performPublish=function(){var e,t,n,s,r,i;return n=arguments[0],e=new fm.websync.clientPublishRequestArgs,e.setMethodArgs(n),this.raiseRequestEvent(fm.websync.client._onPublishRequest,e,"OnPublishRequest")?(i=this.checkSynchronous(n.getSynchronous()),r=new fm.websync.clientRequest,t=new fm.websync.message(n.getChannel()),t.setValidate(!1),t.setDataJson(n.getDataJson()),t.setExtensions(n.getExtensions()),r.setMessage(t),r.setCallback(this.performPublishCallback),s=r,s.setDynamicValue(fm.websync.client._argsKey,n),this.addToQueue(s,n.getRequestUrl(),i,null!==n.getRequestTimeout()?n.getRequestTimeout():0),this.processQueue(!1)):void 0},s.prototype.performPublishCallback=function(){var e,t,n,s,r,i,o;return o=arguments[0],r=o.getDynamicValue(fm.websync.client._argsKey),t=new fm.websync.clientPublishResponseArgs,t.setMethodArgs(r),this.raiseResponseEvent(fm.websync.client._onPublishResponse,t,"OnPublishResponse",o),e=o.getException(),null===e||"undefined"==typeof e?(this.raisePublishSuccess(r,o),this.raisePublishComplete(r,o),s=new fm.websync.clientPublishEndArgs,s.setMethodArgs(r),this.raiseCompleteEvent(fm.websync.client._onPublishEnd,s,"OnPublishEnd",o)):(i=this.raisePublishFailure(r,o,!1),this.raisePublishComplete(r,o),n=new fm.websync.clientPublishEndArgs,n.setMethodArgs(r),this.raiseCompleteEvent(fm.websync.client._onPublishEnd,n,"OnPublishEnd",o),i?(r.setIsRetry(!0),this.publish(r)):void 0)},s.prototype.performService=function(){var e,t,n,s,r,i;return r=arguments[0],e=new fm.websync.clientServiceRequestArgs,e.setMethodArgs(r),this.raiseRequestEvent(fm.websync.client._onServiceRequest,e,"OnServiceRequest")?(i=this.checkSynchronous(r.getSynchronous()),s=new fm.websync.clientRequest,t=new fm.websync.message(fm.websync.metaChannels.convertChannelToServiced(r.getChannel())),t.setValidate(!1),t.setDataJson(r.getDataJson()),t.setExtensions(r.getExtensions()),s.setMessage(t),s.setCallback(this.performServiceCallback),n=s,n.setDynamicValue(fm.websync.client._argsKey,r),this.addToQueue(n,r.getRequestUrl(),i,null!==r.getRequestTimeout()?r.getRequestTimeout():0),this.processQueue(!1)):void 0},s.prototype.performServiceCallback=function(){var e,t,n,s,r,i,o;return o=arguments[0],r=o.getDynamicValue(fm.websync.client._argsKey),t=new fm.websync.clientServiceResponseArgs,t.setMethodArgs(r),this.raiseResponseEvent(fm.websync.client._onServiceResponse,t,"OnServiceResponse",o),e=o.getException(),null===e||"undefined"==typeof e?(this.raiseServiceSuccess(r,o),this.raiseServiceComplete(r,o),s=new fm.websync.clientServiceEndArgs,s.setMethodArgs(r),this.raiseCompleteEvent(fm.websync.client._onServiceEnd,s,"OnServiceEnd",o)):(i=this.raiseServiceFailure(r,o,!1),this.raiseServiceComplete(r,o),n=new fm.websync.clientServiceEndArgs,n.setMethodArgs(r),this.raiseCompleteEvent(fm.websync.client._onServiceEnd,n,"OnServiceEnd",o),i?(r.setIsRetry(!0),this.service(r)):void 0)},s.prototype.performSubscribe=function(){var e,t,n,s,r,i;return r=arguments[0],null===r.getAutoResubscribe()&&r.setAutoResubscribe(!this.inCallback()),e=new fm.websync.clientSubscribeRequestArgs,e.setMethodArgs(r),this.raiseRequestEvent(fm.websync.client._onSubscribeRequest,e,"OnSubscribeRequest")?(i=this.checkSynchronous(r.getSynchronous()),s=new fm.websync.clientRequest,t=new fm.websync.message("/meta/subscribe"),t.setValidate(!1),t.setChannels(r.getChannels()),t.setExtensions(r.getExtensions()),s.setMessage(t),s.setCallback(this.performSubscribeCallback),n=s,n.setDynamicValue(fm.websync.client._argsKey,r),this.addToQueue(n,r.getRequestUrl(),i,null!==r.getRequestTimeout()?r.getRequestTimeout():0),this.processQueue(!1)):void 0},s.prototype.performSubscribeCallback=function(){var e,t,n,s,r,i,o,a,u,c,l,h,p,g;if(p=arguments[0],o=p.getDynamicValue(fm.websync.client._argsKey),s=new fm.websync.clientSubscribeResponseArgs,s.setMethodArgs(o),this.raiseResponseEvent(fm.websync.client._onSubscribeResponse,s,"OnSubscribeResponse",p),e=p.getException(),null!==e&&"undefined"!=typeof e){if(a=this.raiseSubscribeFailure(o,p,!1),this.raiseSubscribeComplete(o,p),r=new fm.websync.clientSubscribeEndArgs,r.setMethodArgs(o),this.raiseCompleteEvent(fm.websync.client._onSubscribeEnd,r,"OnSubscribeEnd",p),a)return o.setIsRetry(!0),this.subscribe(o);if(o.getIsResubscribe())return this.maybeRaiseStateRestored()}else{if(o.getAutoResubscribe()===!0)for(fm.arrayExtensions.add(this._reconnectCache,o),t=p.getResponse().getChannels(),u=0,l=t.length;l>u;u++)g=t[u],this._resubscribeCache[fm.websync.client.getSubscribeKey(g,o.getTag())]=o;for(n=p.getResponse().getChannels(),c=0,h=n.length;h>c;c++)g=n[c],this._subscribedDynamicProperties[fm.websync.client.getSubscribeKey(g,o.getTag())]=o.getDynamicProperties();if(this.addSubscribedChannels(p.getResponse().getTag(),p.getResponse().getChannels()),this.raiseSubscribeSuccess(o,p),this.raiseSubscribeComplete(o,p),this.addSubscribedOnReceive(p.getResponse().getTag(),p.getResponse().getChannels(),o.getOnReceive(),o.getDynamicProperties(),this._lastInterval),i=new fm.websync.clientSubscribeEndArgs,i.setMethodArgs(o),this.raiseCompleteEvent(fm.websync.client._onSubscribeEnd,i,"OnSubscribeEnd",p),o.getIsResubscribe())return this.maybeRaiseStateRestored()}},s.prototype.performUnbind=function(){var e,t,n,s,r,i;return i=arguments[0],e=new fm.websync.clientUnbindRequestArgs,e.setMethodArgs(i),this.raiseRequestEvent(fm.websync.client._onUnbindRequest,e,"OnUnbindRequest")?(r=this.checkSynchronous(i.getSynchronous()),s=new fm.websync.clientRequest,t=new fm.websync.message("/meta/unbind"),t.setValidate(!1),t.setRecords(i.getRecords()),t.setExtensions(i.getExtensions()),s.setMessage(t),s.setCallback(this.performUnbindCallback),n=s,n.setDynamicValue(fm.websync.client._argsKey,i),this.addToQueue(n,i.getRequestUrl(),r,null!==i.getRequestTimeout()?i.getRequestTimeout():0),this.processQueue(!1)):void 0},s.prototype.performUnbindCallback=function(){var e,t,n,s,r,i,o,a,u,c,l,h,p,g,f,m,d;if(d=arguments[0],c=d.getDynamicValue(fm.websync.client._argsKey),i=new fm.websync.clientUnbindResponseArgs,i.setMethodArgs(c),this.raiseResponseEvent(fm.websync.client._onUnbindResponse,i,"OnUnbindResponse",d),e=d.getException(),null===e||"undefined"==typeof e){for(t=d.getResponse().getRecords(),p=0,g=t.length;g>p;p++)if(m=t[p],a=null,n=new fm.holder(a),s=fm.hashExtensions.tryGetValue(this._rebindCache,m.getKey(),n),a=n.getValue(),s||(a=null),r=a,null!==r&&"undefined"!=typeof r){for(f=[],h=0;h<fm.arrayExtensions.getCount(f);)try{f[h].getKey()===m.getKey()&&(f.removeAt(h),h--)}finally{h++}a.setRecords(fm.arrayExtensions.toArray(f)),fm.hashExtensions.remove(this._rebindCache,m.getKey()),fm.hashExtensions.containsValue(this._rebindCache,a)||fm.arrayExtensions.remove(this._reconnectCache,a)}return this.removeBoundRecords(d.getResponse().getRecords()),this.raiseUnbindSuccess(c,d,!1),this.raiseUnbindComplete(c,d,!1),u=new fm.websync.clientUnbindEndArgs,u.setMethodArgs(c),this.raiseCompleteEvent(fm.websync.client._onUnbindEnd,u,"OnUnbindEnd",d)}return l=this.raiseUnbindFailure(c,d,!1),this.raiseUnbindComplete(c,d,!1),o=new fm.websync.clientUnbindEndArgs,o.setMethodArgs(c),this.raiseCompleteEvent(fm.websync.client._onUnbindEnd,o,"OnUnbindEnd",d),l?(c.setIsRetry(!0),this.unbind(c)):void 0},s.prototype.performUnsubscribe=function(){var e,t,n,s,r,i;return i=arguments[0],e=new fm.websync.clientUnsubscribeRequestArgs,e.setMethodArgs(i),this.raiseRequestEvent(fm.websync.client._onUnsubscribeRequest,e,"OnUnsubscribeRequest")?(r=this.checkSynchronous(i.getSynchronous()),s=new fm.websync.clientRequest,t=new fm.websync.message("/meta/unsubscribe"),t.setValidate(!1),t.setChannels(i.getChannels()),t.setExtensions(i.getExtensions()),s.setMessage(t),s.setCallback(this.performUnsubscribeCallback),n=s,n.setDynamicValue(fm.websync.client._argsKey,i),this.addToQueue(n,i.getRequestUrl(),r,null!==i.getRequestTimeout()?i.getRequestTimeout():0),this.processQueue(!1)):void 0},s.prototype.performUnsubscribeCallback=function(){var e,t,n,s,r,i,o,a,u,c,l,h,p,g,f,m,d;if(f=arguments[0],c=f.getDynamicValue(fm.websync.client._argsKey),i=new fm.websync.clientUnsubscribeResponseArgs,i.setMethodArgs(c),this.raiseResponseEvent(fm.websync.client._onUnsubscribeResponse,i,"OnUnsubscribeResponse",f),e=f.getException(),null===e||"undefined"==typeof e){for(t=f.getResponse().getChannels(),h=0,p=t.length;p>h;h++)m=t[h],a=null,d=fm.websync.client.getSubscribeKey(m,c.getTag()),n=new fm.holder(a),s=fm.hashExtensions.tryGetValue(this._resubscribeCache,d,n),a=n.getValue(),s||(a=null),r=a,null!==r&&"undefined"!=typeof r&&(g=[],fm.arrayExtensions.remove(g,m),a.setChannels(fm.arrayExtensions.toArray(g)),fm.hashExtensions.remove(this._resubscribeCache,d),fm.hashExtensions.containsValue(this._resubscribeCache,a)||fm.arrayExtensions.remove(this._reconnectCache,a));return this.removeSubscribedChannels(f.getResponse().getTag(),f.getResponse().getChannels()),this.removeSubscribedOnReceive(f.getResponse().getTag(),f.getResponse().getChannels()),this.raiseUnsubscribeSuccess(c,f,!1),this.raiseUnsubscribeComplete(c,f,!1),u=new fm.websync.clientUnsubscribeEndArgs,u.setMethodArgs(c),this.raiseCompleteEvent(fm.websync.client._onUnsubscribeEnd,u,"OnUnsubscribeEnd",f)}return l=this.raiseUnsubscribeFailure(c,f,!1),this.raiseUnsubscribeComplete(c,f,!1),o=new fm.websync.clientUnsubscribeEndArgs,o.setMethodArgs(c),this.raiseCompleteEvent(fm.websync.client._onUnsubscribeEnd,o,"OnUnsubscribeEnd",f),l?(c.setIsRetry(!0),this.unsubscribe(c)):void 0},s.prototype.postRaise=function(){var e,t;return t=arguments[0],this.getConcurrencyMode()===fm.websync.concurrencyMode.Low?(e=this._threadCounters[t],1===e?fm.hashExtensions.remove(this._threadCounters,t):this._threadCounters[t]=e-1):(e=this._threadCounters[t],this._threadCounters[t]=e-1)},s.prototype.preRaise=function(){var e,t;return t=arguments[0],e=0,fm.hashExtensions.containsKey(this._threadCounters,t)&&(e=this._threadCounters[t]),this._threadCounters[t]=e+1},s.prototype.processAdvice=function(){var e;return e=arguments[0],null!==e.getInterval()&&(this._lastInterval=e.getInterval()),null!==e.getReconnect()?this._lastReconnect=e.getReconnect():void 0},s.prototype.processPendingReceives=function(){var e,t,n,s,r,i,o,a,u,c,l,h,p,g;for(i=arguments[0],p=arguments[1],e=i,o=0,u=e.length;u>o;o++)if(g=e[o],l=null,t=new fm.holder(l),n=fm.hashExtensions.tryGetValue(this._pendingReceives,g,t),l=t.getValue(),n&&fm.hashExtensions.remove(this._pendingReceives,g),s=l,null!==s&&"undefined"!=typeof s)for(r=l,a=0,c=r.length;c>a;a++)h=r[a],p=this.receiveMessage(h,p);return p},s.prototype.processQueue=function(){var e,t,n,s,r,i,o,a,u,c,l,h,p,g;if(t=arguments[0],t&&(this._queueActivated=!0),this._queueActivated&&!this.inBatch()){for(i=this._requestQueue,this._requestQueue={},e=fm.hashExtensions.getKeys(i),a=[],s=0,r=e.length;r>s;s++)c=e[s],n=fm.stringExtensions.indexOf(c,"|"),u=fm.stringExtensions.substring(c,0,n),l=c.substring(n+1),p=fm.parseAssistant.parseIntegerValue(u),h="1"===fm.stringExtensions.substring(l,0,1),g=l.substring(1),o=fm.arrayExtensions.toArray(i[c]),a.push(this.sendMany(o,g,h,p));return a}},s.prototype.processRequestUrl=function(){var e,t,n,s,r;if(s=arguments[0],fm.stringExtensions.isNullOrEmpty(s)&&(s=this.getRequestUrl()),n=!1,r=null,this.getConcurrencyMode()===fm.websync.concurrencyMode.High&&(e=new fm.holder(r),t=fm.hashExtensions.tryGetValue(fm.websync.client._requestUrlCache,s,e),r=e.getValue(),n=t),!n){if(r=s,r=fm.httpTransfer.addQueryToUrl(fm.httpTransfer.addQueryToUrl(fm.httpTransfer.addQueryToUrl(r,"token",this.getToken()),"src",fm.httpWebRequestTransfer.getPlatformCode()),"AspxAutoDetectCookieSupport","1"),this.getConcurrencyMode()!==fm.websync.concurrencyMode.High)return r;fm.websync.client._requestUrlCache[s]=r}return r},s.prototype.processServerAction=function(){var e,t,n,s;if(s=arguments[0],n=arguments[1],"/meta/bind"===s.getBayeuxChannel())return this.addBoundRecords(s.getRecords()),this.raiseServerBind(s),n;if("/meta/unbind"===s.getBayeuxChannel())return this.removeBoundRecords(s.getRecords()),this.raiseServerUnbind(s),n;if("/meta/subscribe"===s.getBayeuxChannel()){if(this.addSubscribedChannels(s.getTag(),s.getChannels()),t=this.raiseServerSubscribe(s),e=t,null===e||"undefined"==typeof e)throw new Error(fm.stringExtensions.format("The server subscribed the client to [{0}], but the client did not supply a callback to handle received messages. A callback must be specified in the client's OnServerSubscribe event.",fm.stringExtensions.join(", ",s.getChannels())));return n=this.addSubscribedOnReceive(s.getTag(),s.getChannels(),t,s.getDynamicProperties(),n)}return"/meta/unsubscribe"===s.getBayeuxChannel()&&(this.removeSubscribedChannels(s.getTag(),s.getChannels()),this.raiseServerUnsubscribe(s),this.removeSubscribedOnReceive(s.getTag(),s.getChannels())),n},s.prototype.publish=function(){var e;if(e=arguments[0],fm.stringExtensions.isNullOrEmpty(e.getChannel()))throw new Error("channel cannot be null.");if(fm.stringExtensions.isNullOrEmpty(e.getDataJson()))throw new Error("dataJson cannot be null.");return this.performPublish(e),this},s.prototype.raiseAction=function(){var e,t,n;return t=arguments[0],e=arguments[1],n=arguments[2],this.raiseActionManual(t,e,n,!1)},s.prototype.raiseActionManual=function(){var e,t,n,s,r,i,o,a,u,c;if(t=arguments[0],e=arguments[1],u=arguments[2],a=arguments[3])try{return t(e)}catch(n){if(i=n,r=i,!this.raiseUnhandledException(r))return fm.asyncException.asyncThrow(r,u)}finally{}else{c=this.getThreadId(),this.preRaise(c);try{return t(e)}catch(s){if(o=s,r=o,!this.raiseUnhandledException(r))return fm.asyncException.asyncThrow(r,u)}finally{this.postRaise(c)}}},s.prototype.raiseBindComplete=function(){var e,t,n,s,r,i,o;return r=arguments[0],o=arguments[1],s=new fm.websync.bindCompleteArgs,s.setExtensions(fm.websync.client.getExtensions(o.getResponse(),r)),s.setIsRebind(r.getIsRebind()),s.setTimestamp(fm.websync.client.getTimestamp(o.getResponse())),s.setClient(this),s.setDynamicProperties(r.getDynamicProperties()),n=s,i=this._onBindComplete,e=i,null!==e&&"undefined"!=typeof e&&this.raiseAction(i,n,"Client -> OnBindComplete"),t=r.getOnComplete(),null!==t&&"undefined"!=typeof t?this.raiseAction(r.getOnComplete(),n,"Client -> Bind -> OnComplete"):void 0},s.prototype.raiseBindFailure=function(){var e,t,n,s,r,i,o,a;return r=arguments[0],o=arguments[1],a=arguments[2],s=new fm.websync.bindFailureArgs,s.__records=fm.websync.client.getRecordsForBind(o.getResponse(),r),s.setException(o.getException()),s.setExtensions(fm.websync.client.getExtensions(o.getResponse(),r)),s.setIsRebind(r.getIsRebind()),s.setTimestamp(fm.websync.client.getTimestamp(o.getResponse())),s.setClient(this),s.setDynamicProperties(r.getDynamicProperties()),n=s,i=this._onBindFailure,e=i,null!==e&&"undefined"!=typeof e&&this.raiseAction(i,n,"Client -> OnBindFailure"),t=r.getOnFailure(),null!==t&&"undefined"!=typeof t&&(a=this.raiseRetriable(r.getOnFailure(),a,n,"Client -> Bind -> OnFailure")),a},s.prototype.raiseBindSuccess=function(){var e,t,n,s,r,i,o;return r=arguments[0],o=arguments[1],s=new fm.websync.bindSuccessArgs,s.__records=fm.websync.client.getRecordsForBind(o.getResponse(),r),s.setExtensions(fm.websync.client.getExtensions(o.getResponse(),r)),s.setIsRebind(r.getIsRebind()),s.setTimestamp(fm.websync.client.getTimestamp(o.getResponse())),s.setClient(this),s.setDynamicProperties(r.getDynamicProperties()),n=s,i=this._onBindSuccess,e=i,null!==e&&"undefined"!=typeof e&&this.raiseAction(i,n,"Client -> OnBindSuccess"),t=r.getOnSuccess(),null!==t&&"undefined"!=typeof t?this.raiseAction(r.getOnSuccess(),n,"Client -> Bind -> OnSuccess"):void 0},s.prototype.raiseCompleteEvent=function(){var e,t,n,s;return t=arguments[0],e=arguments[1],n=arguments[2],s=arguments[3],e.setException(s.getException()),e.setResponse(s.getResponse()),this.raiseEvent(t,e,n)},s.prototype.raiseConnectComplete=function(){var e,t,n,s,r,i,o;return r=arguments[0],o=arguments[1],s=new fm.websync.connectCompleteArgs,s.setExtensions(fm.websync.client.getExtensions(o.getResponse(),r)),s.setIsReconnect(r.getIsReconnect()),s.setTimestamp(fm.websync.client.getTimestamp(o.getResponse())),s.setClient(this),s.setDynamicProperties(r.getDynamicProperties()),n=s,i=this._onConnectComplete,e=i,null!==e&&"undefined"!=typeof e&&this.raiseAction(i,n,"Client -> OnConnectComplete"),t=r.getOnComplete(),null!==t&&"undefined"!=typeof t?this.raiseAction(r.getOnComplete(),n,"Client -> Connect -> OnComplete"):void 0},s.prototype.raiseConnectFailure=function(){var e,t,n,s,r,i,o,a;return r=arguments[0],o=arguments[1],a=arguments[2],s=new fm.websync.connectFailureArgs,s.setException(o.getException()),s.setExtensions(fm.websync.client.getExtensions(o.getResponse(),r)),s.setIsReconnect(r.getIsReconnect()),s.setTimestamp(fm.websync.client.getTimestamp(o.getResponse())),s.setClient(this),s.setDynamicProperties(r.getDynamicProperties()),n=s,i=this._onConnectFailure,e=i,null!==e&&"undefined"!=typeof e&&this.raiseAction(i,n,"Client -> OnConnectFailure"),t=r.getOnFailure(),null!==t&&"undefined"!=typeof t&&(a=this.raiseRetriable(r.getOnFailure(),a,n,"Client -> Connect -> OnFailure")),a},s.prototype.raiseConnectSuccess=function(){var e,t,n,s,r,i,o;return r=arguments[0],o=arguments[1],s=new fm.websync.connectSuccessArgs,s.setExtensions(fm.websync.client.getExtensions(o.getResponse(),r)),s.setConnectionType(this._connectionType),s.setIsReconnect(r.getIsReconnect()),s.setTimestamp(fm.websync.client.getTimestamp(o.getResponse())),s.setClient(this),s.setDynamicProperties(r.getDynamicProperties()),n=s,i=this._onConnectSuccess,e=i,null!==e&&"undefined"!=typeof e&&this.raiseAction(i,n,"Client -> OnConnectSuccess"),t=r.getOnSuccess(),null!==t&&"undefined"!=typeof t?this.raiseAction(r.getOnSuccess(),n,"Client -> Connect -> OnSuccess"):void 0},s.prototype.raiseDisconnectComplete=function(){var e,t,n,s,r,i,o;return r=arguments[0],o=arguments[1],s=new fm.websync.disconnectCompleteArgs,s.setException(o.getException()),s.setExtensions(fm.websync.client.getExtensions(o.getResponse(),r)),s.setTimestamp(fm.websync.client.getTimestamp(o.getResponse())),s.setClient(this),s.setDynamicProperties(r.getDynamicProperties()),n=s,i=this._onDisconnectComplete,e=i,null!==e&&"undefined"!=typeof e&&this.raiseAction(i,n,"Client -> OnDisconnectComplete"),t=r.getOnComplete(),null!==t&&"undefined"!=typeof t?this.raiseAction(r.getOnComplete(),n,"Client -> Disconnect -> OnComplete"):void 0},s.prototype.raiseEvent=function(){var e,t,n,s,r,i;if(s=arguments[0],t=arguments[1],r=arguments[2],t.setClient(this),e=s,null!==e&&"undefined"!=typeof e)try{return s(this,t)}catch(n){if(i=n,!this.raiseUnhandledException(i))return fm.asyncException.asyncThrow(i,fm.stringExtensions.format("Client -> {0}",r))}finally{}},s.prototype.raiseForcedUnbinds=function(){var e,t,n,s,r,i,o,a,u,c,l,h,p;for(s=arguments[0],l=arguments[1],c=[],e=fm.hashExtensions.getKeys(this._boundRecords),i=0,a=e.length;a>i;i++)p=e[i],r=new fm.websync.unbindArgs([this._boundRecords[p]]),r.setRequestUrl(s.getRequestUrl()),r.setSynchronous(s.getSynchronous()),r.setIsRetry(s.getIsRetry()),r.setExtensions(fm.websync.client.getExtensions(l.getResponse(),s)),r.setDynamicProperties(s.getDynamicProperties()),fm.arrayExtensions.add(c,r);for(t=c,h=[],o=0,u=t.length;u>o;o++)n=t[o],this.raiseUnbindSuccess(n,l,!0),h.push(this.raiseUnbindComplete(n,l,!0));return h},s.prototype.raiseForcedUnsubscribes=function(){var e,t,n,s,r,i,o,a,u,c,l,h,p,g,f,m,d;for(r=arguments[0],g=arguments[1],p=[],e=fm.hashExtensions.getKeys(this._subscribedChannels),o=0,c=e.length;c>o;o++)for(m=e[o],t=fm.hashExtensions.getKeys(this._subscribedChannels[m]),a=0,l=t.length;l>a;a++)d=t[a],i=new fm.websync.unsubscribeArgs([d],m),i.setRequestUrl(r.getRequestUrl()),i.setSynchronous(r.getSynchronous()),i.setIsRetry(r.getIsRetry()),i.setExtensions(fm.websync.client.getExtensions(g.getResponse(),r)),i.setDynamicProperties(r.getDynamicProperties()),fm.arrayExtensions.add(p,i);for(n=p,f=[],u=0,h=n.length;h>u;u++)s=n[u],this.raiseUnsubscribeSuccess(s,g,!0),f.push(this.raiseUnsubscribeComplete(s,g,!0));return f},s.prototype.raiseFunction=function(){var e,t,n;return t=arguments[0],e=arguments[1],n=arguments[2],this.raiseFunctionManual(t,e,n,!1)},s.prototype.raiseFunctionManual=function(){
var e,t,n,s,r,i,o,a,u,c,l;if(t=arguments[0],e=arguments[1],c=arguments[2],u=arguments[3])try{return t(e)}catch(n){return i=n,r=i,this.raiseUnhandledException(r)||fm.asyncException.asyncThrow(r,c),null}finally{}l=this.getThreadId(),this.preRaise(l);try{a=t(e)}catch(s){o=s,r=o,this.raiseUnhandledException(r)||fm.asyncException.asyncThrow(r,c),a=null}finally{this.postRaise(l)}return a},s.prototype.raiseNotifyComplete=function(){var e,t,n,s,r,i,o;return r=arguments[0],o=arguments[1],s=new fm.websync.notifyCompleteArgs,s.setExtensions(fm.websync.client.getExtensions(o.getResponse(),r)),s.setTimestamp(fm.websync.client.getTimestamp(o.getResponse())),s.setClient(this),s.setDynamicProperties(r.getDynamicProperties()),n=s,i=this._onNotifyComplete,e=i,null!==e&&"undefined"!=typeof e&&this.raiseAction(i,n,"Client -> OnNotifyComplete"),t=r.getOnComplete(),null!==t&&"undefined"!=typeof t?this.raiseAction(r.getOnComplete(),n,"Client -> Notify -> OnComplete"):void 0},s.prototype.raiseNotifyDelivery=function(){var e,t,n,s,r,i;return s=arguments[0],i=arguments[1],r=arguments[2],n=new fm.websync.notifyReceiveArgs(i.__dataJson,i.__dataBytes,this._connectionType,r),n.setExtensions(i.getExtensions()),n.setTimestamp(fm.websync.client.getTimestamp(i)),n.setClient(this),t=n,e=s,null!==e&&"undefined"!=typeof e&&this.raiseActionManual(s,t,"Client -> OnNotify",!0),t.getReconnectAfter()},s.prototype.raiseNotifyFailure=function(){var e,t,n,s,r,i,o,a;return r=arguments[0],o=arguments[1],a=arguments[2],s=new fm.websync.notifyFailureArgs,s.__dataJson=fm.websync.client.getDataJsonForNotify(o.getResponse(),r),s.__dataBytes=fm.websync.client.getDataBytesForNotify(o.getResponse(),r),s.setException(o.getException()),s.setExtensions(fm.websync.client.getExtensions(o.getResponse(),r)),s.setTimestamp(fm.websync.client.getTimestamp(o.getResponse())),s.setClient(this),s.setDynamicProperties(r.getDynamicProperties()),n=s,i=this._onNotifyFailure,e=i,null!==e&&"undefined"!=typeof e&&this.raiseAction(i,n,"Client -> OnNotifyFailure"),t=r.getOnFailure(),null!==t&&"undefined"!=typeof t&&(a=this.raiseRetriable(r.getOnFailure(),a,n,"Client -> Notify -> OnFailure")),a},s.prototype.raiseNotifySuccess=function(){var e,t,n,s,r,i,o;return r=arguments[0],o=arguments[1],s=new fm.websync.notifySuccessArgs,s.__dataJson=fm.websync.client.getDataJsonForNotify(o.getResponse(),r),s.__dataBytes=fm.websync.client.getDataBytesForNotify(o.getResponse(),r),s.setExtensions(fm.websync.client.getExtensions(o.getResponse(),r)),s.setTimestamp(fm.websync.client.getTimestamp(o.getResponse())),s.setClient(this),s.setDynamicProperties(r.getDynamicProperties()),n=s,i=this._onNotifySuccess,e=i,null!==e&&"undefined"!=typeof e&&this.raiseAction(i,n,"Client -> OnNotifySuccess"),t=r.getOnSuccess(),null!==t&&"undefined"!=typeof t?this.raiseAction(r.getOnSuccess(),n,"Client -> Notify -> OnSuccess"):void 0},s.prototype.raisePublishComplete=function(){var e,t,n,s,r,i,o;return i=arguments[0],o=arguments[1],s=new fm.websync.publishCompleteArgs,s.setExtensions(fm.websync.client.getExtensions(o.getResponse(),i)),s.setTimestamp(fm.websync.client.getTimestamp(o.getResponse())),s.setClient(this),s.setDynamicProperties(i.getDynamicProperties()),n=s,r=this._onPublishComplete,e=r,null!==e&&"undefined"!=typeof e&&this.raiseAction(r,n,"Client -> OnPublishComplete"),t=i.getOnComplete(),null!==t&&"undefined"!=typeof t?this.raiseAction(i.getOnComplete(),n,"Client -> Publish -> OnComplete"):void 0},s.prototype.raisePublishFailure=function(){var e,t,n,s,r,i,o,a;return i=arguments[0],o=arguments[1],a=arguments[2],s=new fm.websync.publishFailureArgs,s.__channel=fm.websync.client.getChannelForPublish(o.getResponse(),i),s.__dataJson=fm.websync.client.getDataJsonForPublish(o.getResponse(),i),s.__dataBytes=fm.websync.client.getDataBytesForPublish(o.getResponse(),i),s.setException(o.getException()),s.setExtensions(fm.websync.client.getExtensions(o.getResponse(),i)),s.setTimestamp(fm.websync.client.getTimestamp(o.getResponse())),s.setClient(this),s.setDynamicProperties(i.getDynamicProperties()),n=s,r=this._onPublishFailure,e=r,null!==e&&"undefined"!=typeof e&&this.raiseAction(r,n,"Client -> OnPublishFailure"),t=i.getOnFailure(),null!==t&&"undefined"!=typeof t&&(a=this.raiseRetriable(i.getOnFailure(),a,n,"Client -> Publish -> OnFailure")),a},s.prototype.raisePublishSuccess=function(){var e,t,n,s,r,i,o;return i=arguments[0],o=arguments[1],s=new fm.websync.publishSuccessArgs,s.__channel=fm.websync.client.getChannelForPublish(o.getResponse(),i),s.__dataJson=fm.websync.client.getDataJsonForPublish(o.getResponse(),i),s.__dataBytes=fm.websync.client.getDataBytesForPublish(o.getResponse(),i),s.setExtensions(fm.websync.client.getExtensions(o.getResponse(),i)),s.setTimestamp(fm.websync.client.getTimestamp(o.getResponse())),s.setClient(this),s.setDynamicProperties(i.getDynamicProperties()),n=s,r=this._onPublishSuccess,e=r,null!==e&&"undefined"!=typeof e&&this.raiseAction(r,n,"Client -> OnPublishSuccess"),t=i.getOnSuccess(),null!==t&&"undefined"!=typeof t?this.raiseAction(i.getOnSuccess(),n,"Client -> Publish -> OnSuccess"):void 0},s.prototype.raiseRequestEvent=function(){var e,t,n;return t=arguments[0],e=arguments[1],n=arguments[2],this.raiseEvent(t,e,n),!e.getCancel()},s.prototype.raiseResponseEvent=function(){var e,t,n,s;return t=arguments[0],e=arguments[1],n=arguments[2],s=arguments[3],e.setException(s.getException()),e.setResponse(s.getResponse()),this.raiseEvent(t,e,n)},s.prototype.raiseRetriable=function(){var e,t,n,s;return t=arguments[0],n=arguments[1],e=arguments[2],s=arguments[3],e.setRetry(n),this.raiseAction(t,e,s),e.getRetry()},s.prototype.raiseSendException=function(){var e,t,n,s,r,i,o,a;for(a=arguments[0],t=arguments[1],e=a.getRequests(),o=[],n=0,s=e.length;s>n;n++)i=e[n],r=new fm.websync.clientResponseArgs,r.setDynamicProperties(i.getDynamicProperties()),r.setException(t),o.push(i.getCallback()(r));return o},s.prototype.raiseServerBind=function(){var e,t,n,s;return s=arguments[0],n=this._onServerBind,e=n,null!==e&&"undefined"!=typeof e?(t=new fm.websync.serverBindArgs,t.__records=s.getRecords(),t.setExtensions(s.getExtensions()),t.setTimestamp(s.getTimestamp()),t.setClient(this),this.raiseAction(n,t,"Client -> OnServerBind")):void 0},s.prototype.raiseServerSubscribe=function(){var e,t,n,s;return s=arguments[0],n=this._onServerSubscribe,e=n,null!==e&&"undefined"!=typeof e?(t=new fm.websync.serverSubscribeArgs,t.__channels=s.getChannels(),t.setExtensions(s.getExtensions()),t.setTimestamp(s.getTimestamp()),t.setClient(this),this.raiseFunction(n,t,"Client -> OnServerSubscribe")):null},s.prototype.raiseServerUnbind=function(){var e,t,n,s;return s=arguments[0],n=this._onServerUnbind,e=n,null!==e&&"undefined"!=typeof e?(t=new fm.websync.serverUnbindArgs,t.__records=s.getRecords(),t.setExtensions(s.getExtensions()),t.setTimestamp(s.getTimestamp()),t.setClient(this),this.raiseAction(n,t,"Client -> OnServerUnbind")):void 0},s.prototype.raiseServerUnsubscribe=function(){var e,t,n,s;return s=arguments[0],n=this._onServerUnsubscribe,e=n,null!==e&&"undefined"!=typeof e?(t=new fm.websync.serverUnsubscribeArgs,t.__channels=s.getChannels(),t.setExtensions(s.getExtensions()),t.setTimestamp(s.getTimestamp()),t.setClient(this),this.raiseAction(n,t,"Client -> OnServerUnsubscribe")):void 0},s.prototype.raiseServiceComplete=function(){var e,t,n,s,r,i,o;return o=arguments[0],i=arguments[1],s=new fm.websync.serviceCompleteArgs,s.setExtensions(fm.websync.client.getExtensions(i.getResponse(),o)),s.setTimestamp(fm.websync.client.getTimestamp(i.getResponse())),s.setClient(this),s.setDynamicProperties(o.getDynamicProperties()),n=s,r=this._onServiceComplete,e=r,null!==e&&"undefined"!=typeof e&&this.raiseAction(r,n,"Client -> OnServiceComplete"),t=o.getOnComplete(),null!==t&&"undefined"!=typeof t?this.raiseAction(o.getOnComplete(),n,"Client -> Service -> OnComplete"):void 0},s.prototype.raiseServiceFailure=function(){var e,t,n,s,r,i,o,a;return a=arguments[0],i=arguments[1],o=arguments[2],s=new fm.websync.serviceFailureArgs,s.__channel=fm.websync.client.getChannelForService(i.getResponse(),a),s.__dataJson=fm.websync.client.getDataJsonForService(i.getResponse(),a),s.__dataBytes=fm.websync.client.getDataBytesForService(i.getResponse(),a),s.setException(i.getException()),s.setExtensions(fm.websync.client.getExtensions(i.getResponse(),a)),s.setTimestamp(fm.websync.client.getTimestamp(i.getResponse())),s.setClient(this),s.setDynamicProperties(a.getDynamicProperties()),n=s,r=this._onServiceFailure,e=r,null!==e&&"undefined"!=typeof e&&this.raiseAction(r,n,"Client -> OnServiceFailure"),t=a.getOnFailure(),null!==t&&"undefined"!=typeof t&&(o=this.raiseRetriable(a.getOnFailure(),o,n,"Client -> Service -> OnFailure")),o},s.prototype.raiseServiceSuccess=function(){var e,t,n,s,r,i,o;return o=arguments[0],i=arguments[1],s=new fm.websync.serviceSuccessArgs,s.__channel=fm.websync.client.getChannelForService(i.getResponse(),o),s.__dataJson=fm.websync.client.getDataJsonForService(i.getResponse(),o),s.__dataBytes=fm.websync.client.getDataBytesForService(i.getResponse(),o),s.setExtensions(fm.websync.client.getExtensions(i.getResponse(),o)),s.setTimestamp(fm.websync.client.getTimestamp(i.getResponse())),s.setClient(this),s.setDynamicProperties(o.getDynamicProperties()),n=s,r=this._onServiceSuccess,e=r,null!==e&&"undefined"!=typeof e&&this.raiseAction(r,n,"Client -> OnServiceSuccess"),t=o.getOnSuccess(),null!==t&&"undefined"!=typeof t?this.raiseAction(o.getOnSuccess(),n,"Client -> Service -> OnSuccess"):void 0},s.prototype.raiseStateRestored=function(){var e,t,n,s,r,i;return r=arguments[0],s=new fm.websync.stateRestoredArgs,s.setExtensions(r.getExtensions()),s.setClient(this),s.setDynamicProperties(r.getDynamicProperties()),n=s,i=this._onStateRestored,e=i,null!==e&&"undefined"!=typeof e&&this.raiseAction(i,n,"Client -> OnStateRestored"),t=r.getOnStateRestored(),null!==t&&"undefined"!=typeof t?this.raiseAction(r.getOnStateRestored(),n,"Client -> Connect -> OnStateRestored"):void 0},s.prototype.raiseStreamFailure=function(){var e,t,n,s,r,i,o,a,u;return r=arguments[0],a=arguments[1],u=arguments[2],i=arguments[3],s=new fm.websync.streamFailureArgs,s.setException(a.getException()),s.setExtensions(fm.websync.client.getExtensions(a.getResponse(),r)),s.setTimestamp(fm.websync.client.getTimestamp(a.getResponse())),s.setClient(this),s.setConnectArgs(r),s.setDynamicProperties(r.getDynamicProperties()),n=s,o=this._onStreamFailure,e=o,null!==e&&"undefined"!=typeof e&&this.raiseAction(o,n,"Client -> OnStreamFailure"),t=r.getOnStreamFailure(),null!==t&&"undefined"!=typeof t&&(u=this.raiseRetriable(r.getOnStreamFailure(),u,n,"Client -> Connect -> OnStreamFailure")),i.setValue(n.getConnectArgs()),u},s.prototype.raiseSubscribeComplete=function(){var e,t,n,s,r,i,o;return o=arguments[0],i=arguments[1],s=new fm.websync.subscribeCompleteArgs,s.setExtensions(fm.websync.client.getExtensions(i.getResponse(),o)),s.setIsResubscribe(o.getIsResubscribe()),s.setTimestamp(fm.websync.client.getTimestamp(i.getResponse())),s.setClient(this),s.setDynamicProperties(o.getDynamicProperties()),n=s,r=this._onSubscribeComplete,e=r,null!==e&&"undefined"!=typeof e&&this.raiseAction(r,n,"Client -> OnSubscribeComplete"),t=o.getOnComplete(),null!==t&&"undefined"!=typeof t?this.raiseAction(o.getOnComplete(),n,"Client -> Subscribe -> OnComplete"):void 0},s.prototype.raiseSubscribeDelivery=function(){var e,t,n,s,r,i,o;return r=arguments[0],s=arguments[1],o=arguments[2],i=arguments[3],n=new fm.websync.subscribeReceiveArgs(o.getBayeuxChannel(),o.__dataJson,o.__dataBytes,this._connectionType,i),n.setExtensions(o.getExtensions()),n.setTimestamp(fm.websync.client.getTimestamp(o)),n.setClient(this),n.setDynamicProperties(s),t=n,e=r,null!==e&&"undefined"!=typeof e&&this.raiseActionManual(r,t,"Client -> Subscribe -> OnReceive",!0),t.getReconnectAfter()},s.prototype.raiseSubscribeFailure=function(){var e,t,n,s,r,i,o,a;return a=arguments[0],i=arguments[1],o=arguments[2],s=new fm.websync.subscribeFailureArgs,s.__channels=fm.websync.client.getChannelsForSubscribe(i.getResponse(),a),s.setException(i.getException()),s.setExtensions(fm.websync.client.getExtensions(i.getResponse(),a)),s.setIsResubscribe(a.getIsResubscribe()),s.setTimestamp(fm.websync.client.getTimestamp(i.getResponse())),s.setClient(this),s.setDynamicProperties(a.getDynamicProperties()),n=s,r=this._onSubscribeFailure,e=r,null!==e&&"undefined"!=typeof e&&this.raiseAction(r,n,"Client -> OnSubscribeFailure"),t=a.getOnFailure(),null!==t&&"undefined"!=typeof t&&(o=this.raiseRetriable(a.getOnFailure(),o,n,"Client -> Subscribe -> OnFailure")),o},s.prototype.raiseSubscribeSuccess=function(){var e,t,n,s,r,i,o;return o=arguments[0],i=arguments[1],s=new fm.websync.subscribeSuccessArgs,s.__channels=fm.websync.client.getChannelsForSubscribe(i.getResponse(),o),s.setExtensions(fm.websync.client.getExtensions(i.getResponse(),o)),s.setIsResubscribe(o.getIsResubscribe()),s.setTimestamp(fm.websync.client.getTimestamp(i.getResponse())),s.setClient(this),s.setDynamicProperties(o.getDynamicProperties()),n=s,r=this._onSubscribeSuccess,e=r,null!==e&&"undefined"!=typeof e&&this.raiseAction(r,n,"Client -> OnSubscribeSuccess"),t=o.getOnSuccess(),null!==t&&"undefined"!=typeof t?this.raiseAction(o.getOnSuccess(),n,"Client -> Subscribe -> OnSuccess"):void 0},s.prototype.raiseUnbindComplete=function(){var e,t,n,s,r,i,o,a;return a=arguments[0],o=arguments[1],r=arguments[2],s=new fm.websync.unbindCompleteArgs,s.setExtensions(fm.websync.client.getExtensions(o.getResponse(),a)),s.setTimestamp(fm.websync.client.getTimestamp(o.getResponse())),s.setClient(this),s.setDynamicProperties(a.getDynamicProperties()),s.__forced=r,n=s,i=this._onUnbindComplete,e=i,null!==e&&"undefined"!=typeof e&&this.raiseAction(i,n,"Client -> OnUnbindComplete"),t=a.getOnComplete(),null!==t&&"undefined"!=typeof t?this.raiseAction(a.getOnComplete(),n,"Client -> Unbind -> OnComplete"):void 0},s.prototype.raiseUnbindFailure=function(){var e,t,n,s,r,i,o,a;return a=arguments[0],i=arguments[1],o=arguments[2],s=new fm.websync.unbindFailureArgs,s.__records=fm.websync.client.getRecordsForUnbind(i.getResponse(),a),s.setException(i.getException()),s.setExtensions(fm.websync.client.getExtensions(i.getResponse(),a)),s.setTimestamp(fm.websync.client.getTimestamp(i.getResponse())),s.setClient(this),s.setDynamicProperties(a.getDynamicProperties()),n=s,r=this._onUnbindFailure,e=r,null!==e&&"undefined"!=typeof e&&this.raiseAction(r,n,"Client -> OnUnbindFailure"),t=a.getOnFailure(),null!==t&&"undefined"!=typeof t&&(o=this.raiseRetriable(a.getOnFailure(),o,n,"Client -> Unbind -> OnFailure")),o},s.prototype.raiseUnbindSuccess=function(){var e,t,n,s,r,i,o,a;return a=arguments[0],o=arguments[1],r=arguments[2],s=new fm.websync.unbindSuccessArgs,s.__records=fm.websync.client.getRecordsForUnbind(o.getResponse(),a),s.setExtensions(fm.websync.client.getExtensions(o.getResponse(),a)),s.setTimestamp(fm.websync.client.getTimestamp(o.getResponse())),s.setClient(this),s.setDynamicProperties(a.getDynamicProperties()),s.__forced=r,n=s,i=this._onUnbindSuccess,e=i,null!==e&&"undefined"!=typeof e&&this.raiseAction(i,n,"Client -> OnUnbindSuccess"),t=a.getOnSuccess(),null!==t&&"undefined"!=typeof t?this.raiseAction(a.getOnSuccess(),n,"Client -> Unbind -> OnSuccess"):void 0},s.prototype.raiseUnsubscribeComplete=function(){var e,t,n,s,r,i,o,a;return a=arguments[0],o=arguments[1],r=arguments[2],s=new fm.websync.unsubscribeCompleteArgs,s.setExtensions(fm.websync.client.getExtensions(o.getResponse(),a)),s.setTimestamp(fm.websync.client.getTimestamp(o.getResponse())),s.setClient(this),s.setDynamicProperties(a.getDynamicProperties()),s.__forced=r,n=s,i=this._onUnsubscribeComplete,e=i,null!==e&&"undefined"!=typeof e&&this.raiseAction(i,n,"Client -> OnUnsubscribeComplete"),t=a.getOnComplete(),null!==t&&"undefined"!=typeof t?this.raiseAction(a.getOnComplete(),n,"Client -> Unsubscribe -> OnComplete"):void 0},s.prototype.raiseUnsubscribeFailure=function(){var e,t,n,s,r,i,o,a;return a=arguments[0],i=arguments[1],o=arguments[2],s=new fm.websync.unsubscribeFailureArgs,s.__channels=fm.websync.client.getChannelsForUnsubscribe(i.getResponse(),a),s.setException(i.getException()),s.setExtensions(fm.websync.client.getExtensions(i.getResponse(),a)),s.setTimestamp(fm.websync.client.getTimestamp(i.getResponse())),s.setClient(this),s.setDynamicProperties(a.getDynamicProperties()),n=s,r=this._onUnsubscribeFailure,e=r,null!==e&&"undefined"!=typeof e&&this.raiseAction(r,n,"Client -> OnUnsubscribeFailure"),t=a.getOnFailure(),null!==t&&"undefined"!=typeof t&&(o=this.raiseRetriable(a.getOnFailure(),o,n,"Client -> Unsubscribe -> OnFailure")),o},s.prototype.raiseUnsubscribeSuccess=function(){var e,t,n,s,r,i,o,a;return a=arguments[0],o=arguments[1],r=arguments[2],s=new fm.websync.unsubscribeSuccessArgs,s.__channels=fm.websync.client.getChannelsForUnsubscribe(o.getResponse(),a),s.setExtensions(fm.websync.client.getExtensions(o.getResponse(),a)),s.setTimestamp(fm.websync.client.getTimestamp(o.getResponse())),s.setClient(this),s.setDynamicProperties(a.getDynamicProperties()),s.__forced=r,n=s,i=this._onUnsubscribeSuccess,e=i,null!==e&&"undefined"!=typeof e&&this.raiseAction(i,n,"Client -> OnUnsubscribeSuccess"),t=a.getOnSuccess(),null!==t&&"undefined"!=typeof t?this.raiseAction(a.getOnSuccess(),n,"Client -> Unsubscribe -> OnSuccess"):void 0},s.prototype.receiveMessage=function(){var e,t,n,s,r,i,o,a,u,c,l,h,p,g,f,m,d,y,_,b,v,R,C,w,S,O,x,E,P,A,T;if(S=arguments[0],E=arguments[1],"/meta/notify"===S.getBayeuxChannel())return"fm.server"===S.getTag()?(P=fm.websync.message.fromJson(S.getDataJson()),E=this.processServerAction(P,E)):(O=this._onNotify,e=O,null!==e&&"undefined"!=typeof e&&(E=this.raiseNotifyDelivery(O,S,E))),E;for(v=[],R=[],t=fm.hashExtensions.getKeys(this._customOnReceives),g=0,d=t.length;d>g;g++)for(A=t[g],c=this._customOnReceives[A],n=fm.hashExtensions.getKeys(c),f=0,y=n.length;y>f;f++)T=n[f],T===S.getChannel()&&(fm.arrayExtensions.add(v,c[T]),fm.arrayExtensions.add(R,{}));for(s=fm.hashExtensions.getKeys(this._subscribedOnReceives),m=0,_=s.length;_>m;m++)for(A=s[m],l=this._subscribedOnReceives[A],r=fm.hashExtensions.getKeys(l),w=0,b=r.length;b>w;w++)T=r[w],T===S.getChannel()&&(fm.arrayExtensions.add(v,l[T]),h=null,i=new fm.holder(h),o=fm.hashExtensions.tryGetValue(this._subscribedDynamicProperties,fm.websync.client.getSubscribeKey(T,A),i),h=i.getValue(),o||(h={}),fm.arrayExtensions.add(R,h));if(0===fm.arrayExtensions.getCount(v))return C=null,a=new fm.holder(C),u=fm.hashExtensions.tryGetValue(this._pendingReceives,S.getChannel(),a),C=a.getValue(),u||(C=[],this._pendingReceives[S.getChannel()]=C),fm.arrayExtensions.add(C,S),E;for(p=0;p<fm.arrayExtensions.getCount(v);)try{x=v[p],h=null,p<fm.arrayExtensions.getCount(R)&&(h=R[p]),E=this.raiseSubscribeDelivery(x,h,S,E)}finally{p++}return E},s.prototype.receiveSink=function(){var e;return e=arguments[0],fm.log.warn("Received message on channel with no receive handler.")},s.prototype.reconnect=function(){var e,t,n,s,r,i,o;return s=arguments[0],o=arguments[1],r=null,e=new fm.holder(r),t=this.raiseStreamFailure(s,o,!0,e),r=e.getValue(),i=t,n=r,(null===n||"undefined"==typeof n)&&(r=s),this.raiseForcedUnsubscribes(s,o),this.raiseForcedUnbinds(s,o),this.clearBoundRecords(),this.clearSubscribedChannels(),this.setIsConnected(!1),this._queueActivated=!1,i?(s.setIsReconnect(!0),s.setLastClientId(this.getClientId()),s.setLastSessionId(this.getSessionId()),this.connect(s)):void 0},s.prototype.removeBoundRecords=function(){var e,t,n,s,r,i;for(r=arguments[0],e=r,i=[],t=0,n=e.length;n>t;t++)s=e[t],i.push(fm.hashExtensions.remove(this._boundRecords,s.getKey()));return i},s.prototype.removeOnBindComplete=function(){var e;return e=arguments[0],this._onBindComplete=fm.delegate.remove(this._onBindComplete,e)},s.prototype.removeOnBindFailure=function(){var e;return e=arguments[0],this._onBindFailure=fm.delegate.remove(this._onBindFailure,e)},s.prototype.removeOnBindSuccess=function(){var e;return e=arguments[0],this._onBindSuccess=fm.delegate.remove(this._onBindSuccess,e)},s.prototype.removeOnConnectComplete=function(){var e;return e=arguments[0],this._onConnectComplete=fm.delegate.remove(this._onConnectComplete,e)},s.prototype.removeOnConnectFailure=function(){var e;return e=arguments[0],this._onConnectFailure=fm.delegate.remove(this._onConnectFailure,e)},s.prototype.removeOnConnectSuccess=function(){var e;return e=arguments[0],this._onConnectSuccess=fm.delegate.remove(this._onConnectSuccess,e)},s.prototype.removeOnDisconnectComplete=function(){var e;return e=arguments[0],this._onDisconnectComplete=fm.delegate.remove(this._onDisconnectComplete,e)},s.prototype.removeOnNotify=function(){var e;return e=arguments[0],this._onNotify=fm.delegate.remove(this._onNotify,e)},s.prototype.removeOnNotifyComplete=function(){var e;return e=arguments[0],this._onNotifyComplete=fm.delegate.remove(this._onNotifyComplete,e)},s.prototype.removeOnNotifyFailure=function(){var e;return e=arguments[0],this._onNotifyFailure=fm.delegate.remove(this._onNotifyFailure,e)},s.prototype.removeOnNotifySuccess=function(){var e;return e=arguments[0],this._onNotifySuccess=fm.delegate.remove(this._onNotifySuccess,e)},s.prototype.removeOnPublishComplete=function(){var e;return e=arguments[0],this._onPublishComplete=fm.delegate.remove(this._onPublishComplete,e)},s.prototype.removeOnPublishFailure=function(){var e;return e=arguments[0],this._onPublishFailure=fm.delegate.remove(this._onPublishFailure,e)},s.prototype.removeOnPublishSuccess=function(){var e;return e=arguments[0],this._onPublishSuccess=fm.delegate.remove(this._onPublishSuccess,e)},s.prototype.removeOnServerBind=function(){var e;return e=arguments[0],this._onServerBind=fm.delegate.remove(this._onServerBind,e)},s.prototype.removeOnServerSubscribe=function(){var e;return e=arguments[0],this._onServerSubscribe=fm.delegate.remove(this._onServerSubscribe,e)},s.prototype.removeOnServerUnbind=function(){var e;return e=arguments[0],this._onServerUnbind=fm.delegate.remove(this._onServerUnbind,e)},s.prototype.removeOnServerUnsubscribe=function(){var e;return e=arguments[0],this._onServerUnsubscribe=fm.delegate.remove(this._onServerUnsubscribe,e)},s.prototype.removeOnServiceComplete=function(){var e;return e=arguments[0],this._onServiceComplete=fm.delegate.remove(this._onServiceComplete,e)},s.prototype.removeOnServiceFailure=function(){var e;return e=arguments[0],this._onServiceFailure=fm.delegate.remove(this._onServiceFailure,e)},s.prototype.removeOnServiceSuccess=function(){var e;return e=arguments[0],this._onServiceSuccess=fm.delegate.remove(this._onServiceSuccess,e)},s.prototype.removeOnStateRestored=function(){var e;return e=arguments[0],this._onStateRestored=fm.delegate.remove(this._onStateRestored,e)},s.prototype.removeOnStreamFailure=function(){var e;return e=arguments[0],this._onStreamFailure=fm.delegate.remove(this._onStreamFailure,e)},s.prototype.removeOnSubscribeComplete=function(){var e;return e=arguments[0],this._onSubscribeComplete=fm.delegate.remove(this._onSubscribeComplete,e)},s.prototype.removeOnSubscribeFailure=function(){var e;return e=arguments[0],this._onSubscribeFailure=fm.delegate.remove(this._onSubscribeFailure,e)},s.prototype.removeOnSubscribeSuccess=function(){var e;return e=arguments[0],this._onSubscribeSuccess=fm.delegate.remove(this._onSubscribeSuccess,e)},s.prototype.removeOnUnbindComplete=function(){var e;return e=arguments[0],this._onUnbindComplete=fm.delegate.remove(this._onUnbindComplete,e)},s.prototype.removeOnUnbindFailure=function(){var e;return e=arguments[0],this._onUnbindFailure=fm.delegate.remove(this._onUnbindFailure,e)},s.prototype.removeOnUnbindSuccess=function(){var e;return e=arguments[0],this._onUnbindSuccess=fm.delegate.remove(this._onUnbindSuccess,e)},s.prototype.removeOnUnsubscribeComplete=function(){var e;return e=arguments[0],this._onUnsubscribeComplete=fm.delegate.remove(this._onUnsubscribeComplete,e)},s.prototype.removeOnUnsubscribeFailure=function(){var e;return e=arguments[0],this._onUnsubscribeFailure=fm.delegate.remove(this._onUnsubscribeFailure,e)},s.prototype.removeOnUnsubscribeSuccess=function(){var e;return e=arguments[0],this._onUnsubscribeSuccess=fm.delegate.remove(this._onUnsubscribeSuccess,e)},s.prototype.removeSubscribedChannels=function(){var e,t,n,s,r,i,o,a,u;if(u=arguments[0],s=arguments[1],r=null,e=new fm.holder(r),t=fm.hashExtensions.tryGetValue(this._subscribedChannels,u,e),r=e.getValue(),t){for(n=s,i=0,o=n.length;o>i;i++)a=n[i],fm.hashExtensions.remove(r,a);if(0===fm.hashExtensions.getCount(r))return fm.hashExtensions.remove(this._subscribedChannels,u)}},s.prototype.removeSubscribedOnReceive=function(){var e,t,n,s,r,i,o,a,u;if(u=arguments[0],s=arguments[1],r=null,e=new fm.holder(r),t=fm.hashExtensions.tryGetValue(this._subscribedOnReceives,u,e),r=e.getValue(),t){for(n=s,i=0,o=n.length;o>i;i++)a=n[i],fm.hashExtensions.remove(r,a),fm.hashExtensions.remove(this._subscribedDynamicProperties,fm.websync.client.getSubscribeKey(a,u));if(0===fm.hashExtensions.getCount(r))return fm.hashExtensions.remove(this._subscribedOnReceives,u)}},s.prototype.restream=function(){var e,t,n,s;return e=arguments[0],t=arguments[1],n=arguments[2],n<this._lastInterval&&(n=this._lastInterval),this.getConcurrencyMode()===fm.websync.concurrencyMode.Low&&n>0?(s=new fm.websync.deferredStreamState,s.setConnectArgs(e),s.setReceivedMessages(t),fm.deferrer.defer(this.streamDeferred,n,s)):this.stream(e,t)},s.prototype.retryConnect=function(){var e,t;return t=arguments[0],e=arguments[1],this._lastBackoffIndex++,this._lastBackoffTimeout=e,t.setIsRetry(!0),this.connect(t)},s.prototype.retryConnectDeferred=function(){var e,t;return e=arguments[0],t=e,this.retryConnect(t.getConnectArgs(),t.getBackoffTimeout())},s.prototype.send=function(){var e,t,n,s;return e=arguments[0],s=arguments[1],t=arguments[2],n=arguments[3],this.sendMany([e],s,t,n)},s.prototype.sendCallback=function(){var e,t,n,s,r,i,o,a,u,c,l,h,p,g,f,m,d,y,_,b,v,R,C,w,S,O,x;if(S=arguments[0],f=S.getRequestArgs().getDynamicValue(fm.websync.client._stateKey),S.getRequestArgs().unsetDynamicValue(fm.websync.client._stateKey),e=S.getException(),null!==e&&"undefined"!=typeof e)return this.raiseSendException(f,S.getException());if(t=S.getMessages(),null===t||"undefined"==typeof t||0===S.getMessages().length)return this.raiseSendException(f,new Error("Invalid response received from server."));for(b=[],r=S.getMessages(),m=0,y=r.length;y>m;m++){if(v=r[m],p=v.getAdvice(),i=p,null!==i&&"undefined"!=typeof i)switch(this.processAdvice(p),this._connectionType){case fm.websync.connectionType.WebSocket:o=p.getWebSocket(),null!==o&&"undefined"!=typeof o&&this.processAdvice(p.getWebSocket());break;case fm.websync.connectionType.LongPolling:a=p.getLongPolling(),null!==a&&"undefined"!=typeof a&&this.processAdvice(p.getLongPolling());break;case fm.websync.connectionType.CallbackPolling:u=p.getCallbackPolling(),null!==u&&"undefined"!=typeof u&&this.processAdvice(p.getCallbackPolling())}if(f.getIsStream()&&"/meta/connect"!==v.getBayeuxChannel())fm.arrayExtensions.add(b,v);else{if(fm.stringExtensions.isNullOrEmpty(v.getId()))return void this.raiseSendException(f,new Error(v.getError()));if(w=null,c=new fm.holder(w),l=fm.hashExtensions.tryGetValue(f.getRequestMapping(),v.getId(),c),w=c.getValue(),!l)return void this.raiseSendException(f,new Error(v.getError()));C=new fm.websync.clientResponseArgs,C.setDynamicProperties(w.getDynamicProperties()),C.setResponse(v),C.setException(v.getSuccessful()?null:new Error(v.getError())),w.getCallback()(C)}}for(fm.arrayExtensions.getCount(b)>0&&(g=new fm.websync.clientResponseArgs,g.setDynamicProperties(f.getRequests()[0].getDynamicProperties()),g.setResponses(fm.arrayExtensions.toArray(b)),f.getRequests()[0].getCallback()(g)),h=S.getMessages(),O=[],d=0,_=h.length;_>d;d++)v=h[d],x=v.getServerActions(),n=x,null!==n&&"undefined"!=typeof n?(s=x,O.push(function(){var e,t,n;for(n=[],e=0,t=s.length;t>e;e++)R=s[e],n.push(this.processServerAction(R,this._lastInterval));return n}.call(this))):O.push(void 0);return O},s.prototype.sendMany=function(){var e,t,n,s,r,i,o,a,u,c,l,h,p,g,f,m,d,y;for(l=arguments[0],y=arguments[1],f=arguments[2],m=arguments[3],r=!1,1===l.length&&(r="/meta/connect"===l[0].getMessage().getBayeuxChannel()),s={},a=[],e=l,i=0,o=e.length;o>i;i++)u=e[i],t=this.getClientId(),(null===t?t===fm.guid.empty:t.equals(fm.guid.empty))||u.getMessage().isConnect()||(u.getMessage().setClientId(this.getClientId()),u.getMessage().setSessionId(this.getSessionId())),this.getDisableBinary()&&u.getMessage().setDisableBinary(this.getDisableBinary()),this._counter++,u.getMessage().setId(fm.intExtensions.toString(this._counter)),fm.arrayExtensions.add(a,u.getMessage()),s[u.getMessage().getId()]=u;return g=this.processRequestUrl(y),y=this.processRequestUrl(y),r?m=this.getStreamRequestTimeout():0===m&&(m=this.getRequestTimeout()),d=r?this._streamRequestTransfer:this._requestTransfer,n=new fm.websync.messageRequestArgs(this.createHeaders()),n.setMessages(fm.arrayExtensions.toArray(a)),n.setOnRequestCreated(this.internalOnRequestCreated),n.setOnResponseReceived(this.internalOnResponseReceived),n.setOnHttpRequestCreated(this.internalOnHttpRequestCreated),n.setOnHttpResponseReceived(this.internalOnHttpResponseReceived),n.setSender(this),n.setTimeout(m),n.setUrl(y),c=n,c.setDynamicValue("frameUrl",g),p=new fm.websync.clientSendState,p.setRequests(l),p.setRequestMapping(s),p.setIsStream(r),c.setDynamicValue(fm.websync.client._stateKey,p),f?(h=d.send(c),this.sendCallback(h)):d.sendAsync(c,this.sendCallback)},s.prototype.service=function(){var e;if(e=arguments[0],fm.stringExtensions.isNullOrEmpty(e.getChannel()))throw new Error("channel cannot be null.");return this.performService(e),this},s.prototype.setClientId=function(){var e;return e=arguments[0],this._clientId=e},s.prototype.setCustomOnReceive=function(){var e,t;return e=arguments[0],t=arguments[1],this.setCustomOnReceiveWithTag(e,fm.stringExtensions.empty,t)},s.prototype.setCustomOnReceiveWithTag=function(){var e,t,n,s,r,i,o,a,u;if(i=arguments[0],u=arguments[1],a=arguments[2],e=i,null===e||"undefined"==typeof e)throw new Error("channel cannot be null.");if(t=a,null===t||"undefined"==typeof t)throw new Error("onReceive cannot be null.");return n=u,(null===n||"undefined"==typeof n)&&(u=fm.stringExtensions.empty),o=null,s=new fm.holder(o),r=fm.hashExtensions.tryGetValue(this._customOnReceives,u,s),o=s.getValue(),r||(o={},this._customOnReceives[u]=o),o[i]=a,this.processPendingReceives([i],this._lastInterval)},s.prototype.setDisableWebSockets=function(){var e;return e=arguments[0],this._disableWebSockets=e},s.prototype.setInstanceId=function(){var e;return e=arguments[0],this._instanceId=e},s.prototype.setIsConnected=function(){var e;return e=arguments[0],this._isConnected=e},s.prototype.setIsConnecting=function(){var e;return e=arguments[0],this._isConnecting=e},s.prototype.setIsDisconnecting=function(){var e;return e=arguments[0],this._isDisconnecting=e},s.prototype.setServerTimeout=function(){var e;return e=arguments[0],this._serverTimeout=e},s.prototype.setSessionId=function(){var e;return e=arguments[0],this._sessionId=e},s.prototype.setStreamRequestUrl=function(){var e,t;if(t=arguments[0],e=t,null===e||"undefined"==typeof e)throw new Error("Stream request URL cannot be null.");return this.__streamRequestUrl=fm.httpTransfer.replaceWildcards(t)},s.prototype.setSynchronous=function(){var e;return e=arguments[0],this._synchronous=e},s.prototype.setToken=function(){var e;return e=arguments[0],this._token=e},s.prototype.startBatch=function(){return this._batchCounter++,this},s.prototype.stream=function(){var e,t,n,s,r;return e=arguments[0],n=arguments[1],r=new fm.websync.clientRequest,t=new fm.websync.message("/meta/connect"),t.setConnectionType(this._connectionType),t.setAcknowledgement(n),r.setMessage(t),r.setCallback(this.streamCallback),s=r,s.setDynamicValue(fm.websync.client._argsKey,e),this.send(s,this.getStreamRequestUrl(),!1,0);
},s.prototype.streamCallback=function(){var e,t,n,s,r,i,o,a,u,c;if(u=arguments[0],s=u.getDynamicValue(fm.websync.client._argsKey),this.getIsConnected()&&!this.getIsConnecting()&&!this.getIsDisconnecting()){if(e=u.getException(),null!==e&&"undefined"!=typeof e)return t=u.getResponses(),null!==t&&"undefined"!=typeof t&&null!==this._lastReconnect&&this._lastReconnect===fm.websync.reconnect.Retry?this.restream(s,!1,this._lastInterval):this.reconnect(s,u);if(1===u.getResponses().length&&"/meta/connect"===u.getResponses()[0].getBayeuxChannel())return this.restream(s,!1,this._lastInterval);i=this._lastInterval,c=this.getThreadId(),this.preRaise(c);try{for(n=u.getResponses(),r=0,o=n.length;o>r;r++)a=n[r],i=this.receiveMessage(a,i)}finally{this.postRaise(c)}return this.restream(s,!0,i)}},s.prototype.streamDeferred=function(){var e,t;return e=arguments[0],t=e,this.stream(t.getConnectArgs(),t.getReceivedMessages())},s.prototype.subscribe=function(){var e,t,n,s;if(s=arguments[0],e=s.getChannels(),null===e||"undefined"==typeof e||0===s.getChannels().length)throw new Error("channels cannot be null.");return t=s.getOnReceive(),(null===t||"undefined"==typeof t)&&s.setOnReceive(this.receiveSink),n=s.getTag(),(null===n||"undefined"==typeof n)&&s.setTag(fm.stringExtensions.empty),this.performSubscribe(s),this},s.prototype.tryWebSocket=function(){var e,t,n;try{return n=fm.websync.messageTransferFactory.getWebSocketMessageTransfer(this.processRequestUrl(this.getStreamRequestUrl())),n.setHandshakeTimeout(this.getRequestTimeout()),n.setStreamTimeout(this.getStreamRequestTimeout()),n.setOnRequestCreated(this.internalOnHttpRequestCreated),n.setOnResponseReceived(this.internalOnHttpResponseReceived),n.setOnOpenSuccess(this.webSocketOpenSuccess),n.setOnOpenFailure(this.webSocketOpenFailure),n.setOnStreamFailure(this.webSocketStreamFailure),n.setSender(this),this._connectionType=fm.websync.connectionType.WebSocket,this._streamRequestTransfer=n,n.open(this.createHeaders()),!0}catch(e){return t=e,!1}finally{}},s.prototype.unbind=function(){var e,t,n,s,r,i,o;if(o=arguments[0],e=o.getRecords(),null===e||"undefined"==typeof e||0===o.getRecords().length)throw new Error("records cannot be null.");for(t=o.getRecords(),s=0,r=t.length;r>s;s++)if(i=t[s],n=i.getKey(),null===n||"undefined"==typeof n)throw new Error("key cannot be null.");return this.performUnbind(o),this},s.prototype.unsetCustomOnReceive=function(){var e;return e=arguments[0],this.unsetCustomOnReceiveWithTag(e,fm.stringExtensions.empty)},s.prototype.unsetCustomOnReceiveWithTag=function(){var e,t,n,s,r,i,o;if(r=arguments[0],o=arguments[1],e=r,null===e||"undefined"==typeof e)throw new Error("channel cannot be null.");return t=o,(null===t||"undefined"==typeof t)&&(o=fm.stringExtensions.empty),i=null,n=new fm.holder(i),s=fm.hashExtensions.tryGetValue(this._customOnReceives,o,n),i=n.getValue(),s&&fm.hashExtensions.remove(i,r)?(0===fm.hashExtensions.getCount(i)&&fm.hashExtensions.remove(this._customOnReceives,o),!0):!1},s.prototype.unsubscribe=function(){var e,t,n;if(n=arguments[0],e=n.getChannels(),null===e||"undefined"==typeof e||0===n.getChannels().length)throw new Error("channels cannot be null.");return t=n.getTag(),(null===t||"undefined"==typeof t)&&n.setTag(fm.stringExtensions.empty),this.performUnsubscribe(n),this},s.prototype.webSocketOpenFailure=function(){var e;return e=arguments[0],this._webSocketOpened&&this.tryWebSocket()?void 0:this.doLongPolling()},s.prototype.webSocketOpenSuccess=function(){var e;return e=arguments[0],this._webSocketOpened=!0,this.activateStream(this._connectArgs,this._responseArgs)},s.prototype.webSocketStreamFailure=function(){var e,t;return e=arguments[0],t=new fm.websync.clientResponseArgs,t.setDynamicProperties(this._responseArgs.getDynamicProperties()),t.setException(new Error(fm.stringExtensions.format("WebSocket stream error. {0}",e.getException().message))),this.streamCallback(t)},s._bayeuxVersion="1.0",s._bayeuxMinimumVersion="1.0",s._argsKey="fm.args",s._stateKey="fm.state",s._requestUrlCache={},s._requestUrlCacheLock=new fm.object,s}(fm.websync.baseClient);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientSendState=function(n){function s(){return this.setRequests=e(this.setRequests,this),this.setRequestMapping=e(this.setRequestMapping,this),this.setIsStream=e(this.setIsStream,this),this.getRequests=e(this.getRequests,this),this.getRequestMapping=e(this.getRequestMapping,this),this.getIsStream=e(this.getIsStream,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._isStream=!1,s.prototype._requestMapping=null,s.prototype._requests=null,s.prototype.getIsStream=function(){return this._isStream},s.prototype.getRequestMapping=function(){return this._requestMapping},s.prototype.getRequests=function(){return this._requests},s.prototype.setIsStream=function(){var e;return e=arguments[0],this._isStream=e},s.prototype.setRequestMapping=function(){var e;return e=arguments[0],this._requestMapping=e},s.prototype.setRequests=function(){var e;return e=arguments[0],this._requests=e},s}(fm.object);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.clientRequest=function(n){function s(){return this.setMessage=e(this.setMessage,this),this.setCallback=e(this.setCallback,this),this.getMessage=e(this.getMessage,this),this.getCallback=e(this.getCallback,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void s.__super__.constructor.call(this)}return t(s,n),s.prototype._callback=null,s.prototype._message=null,s.prototype.getCallback=function(){return this._callback},s.prototype.getMessage=function(){return this._message},s.prototype.setCallback=function(){var e;return e=arguments[0],this._callback=e},s.prototype.setMessage=function(){var e;return e=arguments[0],this._message=e},s}(fm.dynamic);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.defaults=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n.__domainKey=null,n.__domainName=null,n.getDomainKey=function(){return fm.websync.defaults.__domainKey},n.getDomainName=function(){return fm.websync.defaults.__domainName},n.__domainKey=new fm.guid("11111111-1111-1111-1111-111111111111"),n.__domainName="localhost",n}(fm.object);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.publishingClient=function(n){function s(){this.getBoundRecordValue=e(this.getBoundRecordValue,this),this.toJson=e(this.toJson,this),this.setClientId=e(this.setClientId,this),this.setBoundRecords=e(this.setBoundRecords,this),this.getClientId=e(this.getClientId,this),this.getBoundRecordValueJson=e(this.getBoundRecordValueJson,this),this.getBoundRecords=e(this.getBoundRecords,this);var t,n;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),this.setBoundRecords({}),void fm.util.attachProperties(this,arguments[0])):2===arguments.length?(n=arguments[0],t=arguments[1],s.__super__.constructor.call(this),this.setClientId(n),void this.setBoundRecords(t)):0===arguments.length?(s.__super__.constructor.call(this),void this.setBoundRecords({})):void 0}return t(s,n),s.prototype._boundRecords=null,s.prototype._clientId=null,s.fromJson=function(){var e;return e=arguments[0],fm.websync.serializer.deserializePublishingClient(e)},s.toJson=function(){var e;return e=arguments[0],fm.websync.serializer.serializePublishingClient(e)},s.prototype.getBoundRecords=function(){return this._boundRecords},s.prototype.getBoundRecordValueJson=function(){var e,t,n,s,r;return s=arguments[0],e=this.getBoundRecords(),null===e||"undefined"==typeof e?null:(r=null,t=new fm.holder(r),n=fm.hashExtensions.tryGetValue(this.getBoundRecords(),s,t),r=t.getValue(),n?r.getValueJson():null)},s.prototype.getClientId=function(){return this._clientId},s.prototype.setBoundRecords=function(){var e;return e=arguments[0],this._boundRecords=e},s.prototype.setClientId=function(){var e;return e=arguments[0],this._clientId=e},s.prototype.toJson=function(){return fm.websync.publishingClient.toJson(this)},s.prototype.getBoundRecordValue=function(){var e;return e=arguments[0],fm.json.deserialize(this.getBoundRecordValueJson.apply(this,arguments))},s}(fm.serializable);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.extensions=function(n){function s(){return this.setValue=e(this.setValue,this),this.getValue=e(this.getValue,this),this.toJson=e(this.toJson,this),this.setValueJson=e(this.setValueJson,this),this.setExtensionJsons=e(this.setExtensionJsons,this),this.getValueJson=e(this.getValueJson,this),this.getNames=e(this.getNames,this),this.getExtensionJsons=e(this.getExtensionJsons,this),this.getCount=e(this.getCount,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),this.setExtensionJsons({}),void fm.util.attachProperties(this,arguments[0])):(s.__super__.constructor.call(this),void this.setExtensionJsons({}))}return t(s,n),s.prototype._extensionJsons=null,s.fromJson=function(){var e;return e=arguments[0],fm.websync.serializer.deserializeExtensions(e)},s.toJson=function(){var e;return e=arguments[0],fm.websync.serializer.serializeExtensions(e)},s.prototype.getCount=function(){return fm.hashExtensions.getCount(this.getExtensionJsons())},s.prototype.getExtensionJsons=function(){return this._extensionJsons},s.prototype.getNames=function(){var e;return e=[],fm.arrayExtensions.addRange(e,fm.hashExtensions.getKeys(this.getExtensionJsons())),e},s.prototype.getValueJson=function(){var e;return e=arguments[0],fm.hashExtensions.containsKey(this.getExtensionJsons(),e)?this.getExtensionJsons()[e]:null},s.prototype.setExtensionJsons=function(){var e;return e=arguments[0],this._extensionJsons=e},s.prototype.setValueJson=function(){var e,t,n,s;if(3===arguments.length){if(t=arguments[0],s=arguments[1],n=arguments[2],e=s,null===e||"undefined"==typeof e)fm.hashExtensions.containsKey(this.getExtensionJsons(),t)&&fm.hashExtensions.remove(this.getExtensionJsons(),t);else{if(n&&!fm.serializer.isValidJson(s))throw new Error("The value is not valid JSON.");this.getExtensionJsons()[t]=s}return void this.setIsDirty(!0)}2===arguments.length&&(t=arguments[0],s=arguments[1],this.setValueJson(t,s,!0))},s.prototype.toJson=function(){return fm.websync.extensions.toJson(this)},s.prototype.getValue=function(){var e;return e=arguments[0],fm.json.deserialize(this.getValueJson.apply(this,arguments))},s.prototype.setValue=function(){var e,t,n;return 3===arguments.length?(e=arguments[0],n=arguments[1],t=arguments[2],arguments[arguments.length-1]=fm.json.serialize(arguments[arguments.length-1]),void this.setValueJson.apply(this,arguments)):void(2===arguments.length&&(e=arguments[0],t=arguments[1],arguments[arguments.length-1]=fm.json.serialize(arguments[arguments.length-1]),this.setValueJson.apply(this,arguments)))},s}(fm.dynamic);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.message=function(n){function s(){this.toJsonNoData=e(this.toJsonNoData,this),this.toJson=e(this.toJson,this),this.toBinary=e(this.toBinary,this),this.setVersion=e(this.setVersion,this),this.setTag=e(this.setTag,this),this.setSupportedConnectionTypes=e(this.setSupportedConnectionTypes,this),this.setSessionId=e(this.setSessionId,this),this.setServerTimeout=e(this.setServerTimeout,this),this.setServerActions=e(this.setServerActions,this),this.setRecords=e(this.setRecords,this),this.setRecord=e(this.setRecord,this),this.setPublishingClient=e(this.setPublishingClient,this),this.setNotifyingClient=e(this.setNotifyingClient,this),this.setNotifyClientId=e(this.setNotifyClientId,this),this.setMinimumVersion=e(this.setMinimumVersion,this),this.setLastSessionId=e(this.setLastSessionId,this),this.setLastClientId=e(this.setLastClientId,this),this.setKeys=e(this.setKeys,this),this.setKey=e(this.setKey,this),this.setId=e(this.setId,this),this.setDisableBinary=e(this.setDisableBinary,this),this.setConnectionType=e(this.setConnectionType,this),this.setClientId=e(this.setClientId,this),this.setChannels=e(this.setChannels,this),this.setChannel=e(this.setChannel,this),this.setBayeuxChannel=e(this.setBayeuxChannel,this),this.setAdvice=e(this.setAdvice,this),this.setAcknowledgement=e(this.setAcknowledgement,this),this.isUnsubscribingFrom=e(this.isUnsubscribingFrom,this),this.isUnsubscribe=e(this.isUnsubscribe,this),this.isUnbindingFrom=e(this.isUnbindingFrom,this),this.isUnbind=e(this.isUnbind,this),this.isSubscribingTo=e(this.isSubscribingTo,this),this.isSubscribe=e(this.isSubscribe,this),this.isStream=e(this.isStream,this),this.isService=e(this.isService,this),this.isPublish=e(this.isPublish,this),this.isNotify=e(this.isNotify,this),this.isDisconnect=e(this.isDisconnect,this),this.isConnect=e(this.isConnect,this),this.isBindingTo=e(this.isBindingTo,this),this.isBind=e(this.isBind,this),this.getVersion=e(this.getVersion,this),this.getType=e(this.getType,this),this.getTag=e(this.getTag,this),this.getSupportedConnectionTypes=e(this.getSupportedConnectionTypes,this),this.getSessionId=e(this.getSessionId,this),this.getServerTimeout=e(this.getServerTimeout,this),this.getServerActions=e(this.getServerActions,this),this.getRecords=e(this.getRecords,this),this.getRecord=e(this.getRecord,this),this.getPublishingClient=e(this.getPublishingClient,this),this.getNotifyingClient=e(this.getNotifyingClient,this),this.getNotifyClientId=e(this.getNotifyClientId,this),this.getMinimumVersion=e(this.getMinimumVersion,this),this.getLastSessionId=e(this.getLastSessionId,this),this.getLastClientId=e(this.getLastClientId,this),this.getKeys=e(this.getKeys,this),this.getKey=e(this.getKey,this),this.getId=e(this.getId,this),this.getDisableBinary=e(this.getDisableBinary,this),this.getConnectionType=e(this.getConnectionType,this),this.getClientId=e(this.getClientId,this),this.getChannels=e(this.getChannels,this),this.getChannel=e(this.getChannel,this),this.getBayeuxChannel=e(this.getBayeuxChannel,this),this.getAdvice=e(this.getAdvice,this),this.getAcknowledgement=e(this.getAcknowledgement,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),this._toJsonNoDataLock=new fm.object,void fm.util.attachProperties(this,arguments[0])):0===arguments.length?(s.__super__.constructor.call(this),void(this._toJsonNoDataLock=new fm.object)):1===arguments.length?(t=arguments[0],s.__super__.constructor.call(this),this._toJsonNoDataLock=new fm.object,this.setValidate(!1),this.setBayeuxChannel(t),void this.setValidate(!0)):void 0}return t(s,n),s.prototype.__advice=null,s.prototype.__bayeuxChannel=null,s.prototype.__channels=null,s.prototype.__clientId=null,s.prototype.__connectionType=null,s.prototype.__id=null,s.prototype.__minimumVersion=null,s.prototype.__records=null,s.prototype.__supportedConnectionTypes=null,s.prototype.__version=null,s.prototype._toJsonNoDataLock=null,s.bytesToInt=function(){var e,t;return e=arguments[0],t=arguments[1],e.length<t+4?-1:fm.bitAssistant.toIntegerNetwork(e,t)},s.fromBinary=function(){var e,t,n,s,r,i,o;return 1===arguments.length?(n=arguments[0],fm.websync.message.fromBinary(n,0)):2===arguments.length?(n=arguments[0],o=arguments[1],s=fm.websync.message.bytesToInt(n,o),0>s?null:(o+=4,i=fm.websync.message.bytesToInt(n,o),0>i?null:(o+=4,e=fm.bitAssistant.subArray(n,o,s),o+=s,t=fm.bitAssistant.subArray(n,o,i),o+=i,r=fm.websync.message.fromJson(fm.encoding.getUtf8().getString(e,0,e.length)),r.setDataBytes(t),r))):void 0},s.fromBinaryMultiple=function(){var e,t,n,s,r,i,o,a;if(t=arguments[0],s=0,o=fm.websync.message.bytesToInt(t,s),0>o)return new Array(0);for(s+=4,i=new Array(o),n=0;o>n;)try{if(a=fm.websync.message.bytesToInt(t,s),0>a)return new Array(0);if(s+=4,r=fm.websync.message.fromBinary(t,s),e=r,null===e||"undefined"==typeof e)return new Array(0);s+=a,i[n]=r}finally{n++}return i},s.fromJson=function(){var e;return e=arguments[0],fm.websync.serializer.deserializeMessage(e)},s.fromJsonMultiple=function(){var e;return e=arguments[0],fm.websync.serializer.deserializeMessageArray(e)},s.intToBytes=function(){var e;return e=arguments[0],fm.bitAssistant.getIntegerBytesNetwork(e)},s.toBinary=function(){var e,t,n,s,r,i,o,a,u,c,l,h,p;if(h=arguments[0],a=null,u=null,e=new fm.holder(a),t=new fm.holder(u),n=h.toJsonNoData(e,t),a=e.getValue(),u=t.getValue(),p=n,s=a,null===s||"undefined"==typeof s){if(r=u,null===r||"undefined"==typeof r)throw new Error("Message data bytes cannot be null.");throw new Error(fm.stringExtensions.format("Message data bytes cannot be null (JSON: {0}).",u))}if(i=p,null===i||"undefined"==typeof i)throw new Error("Message JSON cannot be null.");return o=fm.encoding.getUtf8().getBytes(p),c=new Uint8Array(8+o.length+a.length),l=0,fm.bitAssistant.copy(fm.websync.message.intToBytes(o.length),0,c,l,4),l+=4,fm.bitAssistant.copy(fm.websync.message.intToBytes(a.length),0,c,l,4),l+=4,fm.bitAssistant.copy(o,0,c,l,o.length),l+=o.length,fm.bitAssistant.copy(a,0,c,l,a.length),l+=a.length,c},s.toBinaryMultiple=function(){var e,t,n,s,r,i,o,a,u,c,l,h,p,g;for(p=arguments[0],g=4,l=[],e=p,o=0,u=e.length;u>o;o++)h=e[o],i=fm.websync.message.toBinary(h),fm.arrayExtensions.add(l,i),g+=4+i.length;for(s=new Uint8Array(g),r=0,fm.bitAssistant.copy(fm.websync.message.intToBytes(fm.arrayExtensions.getCount(l)),0,s,r,4),r+=4,t=l,a=0,c=t.length;c>a;a++)n=t[a],fm.bitAssistant.copy(fm.websync.message.intToBytes(n.length),0,s,r,4),r+=4,fm.bitAssistant.copy(n,0,s,r,n.length),r+=n.length;return s},s.toJson=function(){var e;return e=arguments[0],fm.websync.serializer.serializeMessage(e)},s.toJsonMultiple=function(){var e;return e=arguments[0],fm.websync.serializer.serializeMessageArray(e)},s.prototype.getAcknowledgement=function(){return fm.serializer.deserializeBoolean(this.getExtensionValueJson("fm.ack"))},s.prototype.getAdvice=function(){return this.__advice},s.prototype.getBayeuxChannel=function(){return this.__bayeuxChannel},s.prototype.getChannel=function(){return fm.websync.extensible.sharedGetChannel(this.__channels)},s.prototype.getChannels=function(){return fm.websync.extensible.sharedGetChannels(this.__channels)},s.prototype.getClientId=function(){return this.__clientId},s.prototype.getConnectionType=function(){return this.__connectionType},s.prototype.getDisableBinary=function(){return fm.serializer.deserializeBoolean(this.getExtensionValueJson("fm.dbin"))},s.prototype.getId=function(){return this.__id},s.prototype.getKey=function(){return fm.websync.extensible.sharedGetKey(this.__records)},s.prototype.getKeys=function(){return fm.websync.extensible.sharedGetKeys(this.__records)},s.prototype.getLastClientId=function(){return fm.serializer.deserializeGuid(this.getExtensionValueJson("fm.lcid"))},s.prototype.getLastSessionId=function(){return fm.serializer.deserializeGuid(this.getExtensionValueJson("fm.lsid"))},s.prototype.getMinimumVersion=function(){return this.__minimumVersion},s.prototype.getNotifyClientId=function(){return fm.serializer.deserializeGuid(this.getExtensionValueJson("fm.notify"))},s.prototype.getNotifyingClient=function(){return fm.websync.serializer.deserializeNotifyingClient(this.getExtensionValueJson("fm.notifying"))},s.prototype.getPublishingClient=function(){return fm.websync.serializer.deserializePublishingClient(this.getExtensionValueJson("fm.publishing"))},s.prototype.getRecord=function(){return fm.websync.extensible.sharedGetRecord(this.__records)},s.prototype.getRecords=function(){return fm.websync.extensible.sharedGetRecords(this.__records)},s.prototype.getServerActions=function(){var e,t,n;return t=this.getExtensionValueJson("fm.server"),fm.stringExtensions.isNullOrEmpty(t)||(n=fm.websync.message.fromJsonMultiple(t),e=n,null===e||"undefined"==typeof e)?null:n},s.prototype.getServerTimeout=function(){return fm.serializer.deserializeInteger(this.getExtensionValueJson("fm.timeout"))},s.prototype.getSessionId=function(){return fm.serializer.deserializeGuid(this.getExtensionValueJson("fm.sessionId"))},s.prototype.getSupportedConnectionTypes=function(){return this.__supportedConnectionTypes},s.prototype.getTag=function(){var e;return null!=(e=fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag")))?e:fm.stringExtensions.empty},s.prototype.getType=function(){return fm.websync.metaChannels.getMessageType(this.getBayeuxChannel())},s.prototype.getVersion=function(){return this.__version},s.prototype.isBind=function(){return this.getType()===fm.websync.messageType.Bind},s.prototype.isBindingTo=function(){var e,t,n,s,r,i;if(s=arguments[0],this.getType()===fm.websync.messageType.Bind){if(e=this.getRecords(),null===e||"undefined"==typeof e)return!1;for(t=this.getRecords(),n=0,r=t.length;r>n;n++)if(i=t[n],i.getKey()===s)return!0}return!1},s.prototype.isConnect=function(){return this.getType()===fm.websync.messageType.Connect},s.prototype.isDisconnect=function(){return this.getType()===fm.websync.messageType.Disconnect},s.prototype.isNotify=function(){return this.getType()===fm.websync.messageType.Notify},s.prototype.isPublish=function(){return this.getType()===fm.websync.messageType.Publish},s.prototype.isService=function(){return this.getType()===fm.websync.messageType.Service},s.prototype.isStream=function(){return this.getType()===fm.websync.messageType.Stream},s.prototype.isSubscribe=function(){return this.getType()===fm.websync.messageType.Subscribe},s.prototype.isSubscribingTo=function(){var e,t,n,s,r,i;if(n=arguments[0],this.getType()===fm.websync.messageType.Subscribe){if(e=this.getChannels(),null===e||"undefined"==typeof e)return!1;for(t=this.getChannels(),s=0,r=t.length;r>s;s++)if(i=t[s],i===n)return!0}return!1},s.prototype.isUnbind=function(){return this.getType()===fm.websync.messageType.Unbind},s.prototype.isUnbindingFrom=function(){var e,t,n,s,r,i;if(s=arguments[0],this.getType()===fm.websync.messageType.Unbind){if(e=this.getRecords(),null===e||"undefined"==typeof e)return!1;for(t=this.getRecords(),n=0,r=t.length;r>n;n++)if(i=t[n],i.getKey()===s)return!0}return!1},s.prototype.isUnsubscribe=function(){return this.getType()===fm.websync.messageType.Unsubscribe},s.prototype.isUnsubscribingFrom=function(){var e,t,n,s,r,i;if(n=arguments[0],this.getType()===fm.websync.messageType.Unsubscribe){if(e=this.getChannels(),null===e||"undefined"==typeof e)return!1;for(t=this.getChannels(),s=0,r=t.length;r>s;s++)if(i=t[s],i===n)return!0}return!1},s.prototype.setAcknowledgement=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.ack",fm.serializer.serializeBoolean(e),!1),this.setIsDirty(!0)},s.prototype.setAdvice=function(){var e;return e=arguments[0],this.__advice=e,this.setIsDirty(!0)},s.prototype.setBayeuxChannel=function(){var e;return e=arguments[0],this.__bayeuxChannel=e,fm.websync.metaChannels.isServiceChannel(e)?this.setChannel(fm.websync.metaChannels.convertChannelFromServiced(e)):fm.websync.metaChannels.isMetaChannel(e)||this.setChannel(e),this.setIsDirty(!0)},s.prototype.setChannel=function(){var e;return e=arguments[0],this.__channels=fm.websync.extensible.sharedSetChannel(e,this.getValidate()),this.setIsDirty(!0)},s.prototype.setChannels=function(){var e;return e=arguments[0],this.__channels=fm.websync.extensible.sharedSetChannels(e,this.getValidate()),this.setIsDirty(!0)},s.prototype.setClientId=function(){var e;return e=arguments[0],this.__clientId=e,this.setIsDirty(!0)},s.prototype.setConnectionType=function(){var e;return e=arguments[0],this.__connectionType=e,this.setIsDirty(!0)},s.prototype.setDisableBinary=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.dbin",fm.serializer.serializeBoolean(e),!1),this.setIsDirty(!0)},s.prototype.setId=function(){var e;return e=arguments[0],this.__id=e,this.setIsDirty(!0)},s.prototype.setKey=function(){var e;return e=arguments[0],this.__records=fm.websync.extensible.sharedSetKey(e,this.getValidate()),this.setIsDirty(!0)},s.prototype.setKeys=function(){var e;return e=arguments[0],this.__records=fm.websync.extensible.sharedSetKeys(e,this.getValidate()),this.setIsDirty(!0)},s.prototype.setLastClientId=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.lcid",fm.serializer.serializeGuid(e),!1),this.setIsDirty(!0)},s.prototype.setLastSessionId=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.lsid",fm.serializer.serializeGuid(e),!1),this.setIsDirty(!0)},s.prototype.setMinimumVersion=function(){var e;return e=arguments[0],this.__minimumVersion=e,this.setIsDirty(!0)},s.prototype.setNotifyClientId=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.notify",fm.serializer.serializeGuid(e),!1),this.setIsDirty(!0)},s.prototype.setNotifyingClient=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.notifying",fm.websync.serializer.serializeNotifyingClient(e),!1),this.setIsDirty(!0)},s.prototype.setPublishingClient=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.publishing",fm.websync.serializer.serializePublishingClient(e),!1),this.setIsDirty(!0)},s.prototype.setRecord=function(){var e;return e=arguments[0],this.__records=fm.websync.extensible.sharedSetRecord(e,this.getValidate()),this.setIsDirty(!0)},s.prototype.setRecords=function(){var e;return e=arguments[0],this.__records=fm.websync.extensible.sharedSetRecords(e,this.getValidate()),this.setIsDirty(!0)},s.prototype.setServerActions=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.server",fm.websync.message.toJsonMultiple(e),!1),this.setIsDirty(!0)},s.prototype.setServerTimeout=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.timeout",fm.serializer.serializeInteger(e),!1),this.setIsDirty(!0)},s.prototype.setSessionId=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.sessionId",fm.serializer.serializeGuid(e),!1),this.setIsDirty(!0)},s.prototype.setSupportedConnectionTypes=function(){var e;return e=arguments[0],this.__supportedConnectionTypes=e,this.setIsDirty(!0)},s.prototype.setTag=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.tag",fm.serializer.serializeString(null!=e?e:fm.stringExtensions.empty),!1),this.setIsDirty(!0)},s.prototype.setVersion=function(){var e;return e=arguments[0],this.__version=e,this.setIsDirty(!0)},s.prototype.toBinary=function(){return fm.websync.message.toBinary(this)},s.prototype.toJson=function(){return fm.websync.message.toJson(this)},s.prototype.toJsonNoData=function(){var e,t,n;return e=arguments[0],t=arguments[1],this.getIsBinary()?(e.setValue(this.getDataBytes()),t.setValue(null),this.setDataBytes(null),n=this.toJson(),this.setDataBytes(e.getValue()),n):(e.setValue(null),t.setValue(this.getDataJson()),this.setDataJson(null),n=this.toJson(),this.setDataJson(t.getValue()),n)},s}(fm.websync.baseMessage);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.publication=function(n){function s(){this.toJson=e(this.toJson,this),this.setTag=e(this.setTag,this),this.setChannel=e(this.setChannel,this),this.getTag=e(this.getTag,this),this.getChannel=e(this.getChannel,this);var t,n,r;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):2===arguments.length?(t=arguments[0],n=arguments[1],void s.call(this,t,n,null)):3===arguments.length?(t=arguments[0],n=arguments[1],r=arguments[2],s.__super__.constructor.call(this),this.setChannel(t),this.setDataJson(n),void this.setTag(r)):0===arguments.length?void s.__super__.constructor.call(this):1===arguments.length?(t=arguments[0],s.__super__.constructor.call(this),void this.setChannel(t)):void 0}return t(s,n),s.prototype.__channel=null,s.fromJson=function(){var e;return e=arguments[0],fm.websync.serializer.deserializePublication(e)},s.fromJsonMultiple=function(){var e;return e=arguments[0],fm.websync.serializer.deserializePublicationArray(e)},s.fromMessage=function(){var e,t,n;return t=arguments[0],e=t,null===e||"undefined"==typeof e?null:(n=new fm.websync.publication,n.setChannel(t.getBayeuxChannel()),n.setSuccessful(t.getSuccessful()),n.setError(t.getError()),n.setTimestamp(t.getTimestamp()),n.setDataJson(t.getDataJson()),n.setExtensions(t.getExtensions()),n)},s.fromMessages=function(){var e,t,n,s;if(n=arguments[0],e=n,null===e||"undefined"==typeof e)return null;for(s=new Array(n.length),t=0;t<n.length;)try{s[t]=fm.websync.publication.fromMessage(n[t])}finally{t++}return s},s.toJson=function(){var e;return e=arguments[0],fm.websync.serializer.serializePublication(e)},s.toJsonMultiple=function(){var e;return e=arguments[0],fm.websync.serializer.serializePublicationArray(e)},s.toMessage=function(){var e,t,n;return n=arguments[0],e=n,null===e||"undefined"==typeof e?null:(t=new fm.websync.message,t.setBayeuxChannel(n.getChannel()),t.setSuccessful(n.getSuccessful()),t.setError(n.getError()),t.setTimestamp(n.getTimestamp()),t.setDataJson(n.getDataJson()),t.setExtensions(n.getExtensions()),t)},s.toMessages=function(){var e,t,n,s;if(s=arguments[0],e=s,null===e||"undefined"==typeof e)return null;for(n=new Array(s.length),t=0;t<s.length;)try{n[t]=fm.websync.publication.toMessage(s[t])}finally{t++}return n},s.prototype.getChannel=function(){return this.__channel},s.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"))},s.prototype.setChannel=function(){var e,t,n,s,r;if(r=arguments[0],e=r,null===e||"undefined"==typeof e)return this.__channel=r,this.setIsDirty(!0);if(s=null,t=new fm.holder(s),n=fm.websync.extensible.validateChannel(r,t),s=t.getValue(),this.getValidate()&&!n)throw new Error(fm.stringExtensions.format("Invalid channel. {0}",s));return this.__channel=r,this.setIsDirty(!0)},s.prototype.setTag=function(){var e;return e=arguments[0],this.setExtensionValueJson("fm.tag",fm.serializer.serializeString(e),!1),this.setIsDirty(!0)},s.prototype.toJson=function(){return fm.websync.publication.toJson(this)},s}(fm.websync.baseMessage);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.publisher=function(n){function s(){this.send=e(this.send,this),this.raiseResponseEvent=e(this.raiseResponseEvent,this),this.raiseRequestEvent=e(this.raiseRequestEvent,this),this.raiseEvent=e(this.raiseEvent,this),
this.publishMany=e(this.publishMany,this),this.publish=e(this.publish,this),this.processRequestUrl=e(this.processRequestUrl,this),this.performPublish=e(this.performPublish,this),this.performNotify=e(this.performNotify,this),this.notifyMany=e(this.notifyMany,this),this.notify=e(this.notify,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):(t=arguments[0],s.__super__.constructor.call(this),void this.setRequestUrl(t))}return t(s,n),s._onNotifyRequest=null,s._onNotifyResponse=null,s._onPublishRequest=null,s._onPublishResponse=null,s._requestUrlCache=null,s._requestUrlCacheLock=null,s.addOnNotifyRequest=function(){var e;return e=arguments[0],fm.websync.publisher._onNotifyRequest=fm.delegate.combine(fm.websync.publisher._onNotifyRequest,e)},s.addOnNotifyResponse=function(){var e;return e=arguments[0],fm.websync.publisher._onNotifyResponse=fm.delegate.combine(fm.websync.publisher._onNotifyResponse,e)},s.addOnPublishRequest=function(){var e;return e=arguments[0],fm.websync.publisher._onPublishRequest=fm.delegate.combine(fm.websync.publisher._onPublishRequest,e)},s.addOnPublishResponse=function(){var e;return e=arguments[0],fm.websync.publisher._onPublishResponse=fm.delegate.combine(fm.websync.publisher._onPublishResponse,e)},s.removeOnNotifyRequest=function(){var e;return e=arguments[0],fm.websync.publisher._onNotifyRequest=fm.delegate.remove(fm.websync.publisher._onNotifyRequest,e)},s.removeOnNotifyResponse=function(){var e;return e=arguments[0],fm.websync.publisher._onNotifyResponse=fm.delegate.remove(fm.websync.publisher._onNotifyResponse,e)},s.removeOnPublishRequest=function(){var e;return e=arguments[0],fm.websync.publisher._onPublishRequest=fm.delegate.remove(fm.websync.publisher._onPublishRequest,e)},s.removeOnPublishResponse=function(){var e;return e=arguments[0],fm.websync.publisher._onPublishResponse=fm.delegate.remove(fm.websync.publisher._onPublishResponse,e)},s.prototype.notify=function(){var e,t,n,s,r,i;return 3===arguments.length?(t=arguments[0],n=arguments[1],i=arguments[2],this.notify(new fm.websync.notification(t,n,i))):1===arguments.length?(s=arguments[0],r=this.notifyMany([s]),e=r,null===e||"undefined"==typeof e||0===r.length?null:r[0]):2===arguments.length?(t=arguments[0],n=arguments[1],this.notify(new fm.websync.notification(t,n))):void 0},s.prototype.notifyMany=function(){var e,t;if(t=arguments[0],e=t,null===e||"undefined"==typeof e||0===t.length)throw new Error("notifications cannot be null/empty.");return this.performNotify(t)},s.prototype.performNotify=function(){var e,t,n,s,r,i,o;if(i=arguments[0],n=new fm.websync.publisherNotifyRequestArgs,n.setRequests(i),this.raiseRequestEvent(fm.websync.publisher._onNotifyRequest,n)){if(r=fm.websync.notification.toMessages(i),o=this.send(r,this.getRequestUrl()),s=fm.websync.notification.fromMessages(o.getResponses()),t=new fm.websync.publisherNotifyResponseArgs,t.setRequests(i),t.setResponses(s),this.raiseResponseEvent(fm.websync.publisher._onNotifyResponse,t,o),e=o.getException(),null!==e&&"undefined"!=typeof e)throw o.getException();return s}return null},s.prototype.performPublish=function(){var e,t,n,s,r,i,o;if(i=arguments[0],n=new fm.websync.publisherPublishRequestArgs,n.setRequests(i),this.raiseRequestEvent(fm.websync.publisher._onPublishRequest,n)){if(r=fm.websync.publication.toMessages(i),o=this.send(r,this.getRequestUrl()),s=fm.websync.publication.fromMessages(o.getResponses()),t=new fm.websync.publisherPublishResponseArgs,t.setRequests(i),t.setResponses(s),this.raiseResponseEvent(fm.websync.publisher._onPublishResponse,t,o),e=o.getException(),null!==e&&"undefined"!=typeof e)throw o.getException();return s}return null},s.prototype.processRequestUrl=function(){var e,t,n,s,r;if(s=arguments[0],fm.stringExtensions.isNullOrEmpty(s)&&(s=this.getRequestUrl()),n=!1,r=null,this.getConcurrencyMode()===fm.websync.concurrencyMode.High&&(e=new fm.holder(r),t=fm.hashExtensions.tryGetValue(fm.websync.publisher._requestUrlCache,s,e),r=e.getValue(),n=t),!n){if(r=s,r=fm.httpTransfer.addQueryToUrl(fm.httpTransfer.addQueryToUrl(r,"src",fm.httpWebRequestTransfer.getPlatformCode()),"AspxAutoDetectCookieSupport","1"),this.getConcurrencyMode()!==fm.websync.concurrencyMode.High)return r;fm.websync.publisher._requestUrlCache[s]=r}return r},s.prototype.publish=function(){var e,t,n,s,r,i;return 3===arguments.length?(t=arguments[0],n=arguments[1],i=arguments[2],this.publish(new fm.websync.publication(t,n,i))):1===arguments.length?(s=arguments[0],r=this.publishMany([s]),e=r,null===e||"undefined"==typeof e||0===r.length?null:r[0]):2===arguments.length?(t=arguments[0],n=arguments[1],this.publish(new fm.websync.publication(t,n))):void 0},s.prototype.publishMany=function(){var e,t;if(t=arguments[0],e=t,null===e||"undefined"==typeof e||0===t.length)throw new Error("publications cannot be null/empty.");return this.performPublish(t)},s.prototype.raiseEvent=function(){var e,t,n;return n=arguments[0],t=arguments[1],t.setPublisher(this),e=n,null!==e&&"undefined"!=typeof e?n(this,t):void 0},s.prototype.raiseRequestEvent=function(){var e,t;return t=arguments[0],e=arguments[1],this.raiseEvent(t,e),!e.getCancel()},s.prototype.raiseResponseEvent=function(){var e,t,n;return t=arguments[0],e=arguments[1],n=arguments[2],e.setException(n.getException()),this.raiseEvent(t,e)},s.prototype.send=function(){var e,t,n,s,r,i,o,a,u,c,l,h,p,g,f,m,d,y;for(m=arguments[0],y=arguments[1],d=this.processRequestUrl(y),y=this.processRequestUrl(y),e=m,h=0,p=e.length;p>h;h++)g=e[h],this.getDisableBinary()&&g.setDisableBinary(this.getDisableBinary());a=new fm.websync.messageRequestArgs(this.createHeaders()),a.setMessages(m),a.setOnRequestCreated(this.internalOnRequestCreated),a.setOnResponseReceived(this.internalOnResponseReceived),a.setOnHttpRequestCreated(this.internalOnHttpRequestCreated),a.setOnHttpResponseReceived(this.internalOnHttpResponseReceived),a.setSender(this),a.setTimeout(this.getRequestTimeout()),a.setUrl(y),f=a,f.setDynamicValue("frameUrl",d),l=fm.websync.messageTransferFactory.getHttpMessageTransfer(),s=l.send(f);try{l.shutdown()}catch(u){c=u}finally{}return t=s.getException(),null!==t&&"undefined"!=typeof t?(r=new fm.websync.publisherResponseArgs,r.setException(s.getException()),r):(n=s.getMessages(),null===n||"undefined"==typeof n||0===s.getMessages().length?(i=new fm.websync.publisherResponseArgs,i.setException(new Error("Invalid response received from server.")),i):(o=new fm.websync.publisherResponseArgs,o.setResponses(s.getMessages()),o))},s._requestUrlCache={},s._requestUrlCacheLock=new fm.object,s}(fm.websync.baseClient);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.record=function(n){function s(){this.setValue=e(this.setValue,this),this.getValue=e(this.getValue,this),this.toString=e(this.toString,this),this.toJson=e(this.toJson,this),this.setValueJson=e(this.setValueJson,this),this.setValidate=e(this.setValidate,this),this.setPrivate=e(this.setPrivate,this),this.setKey=e(this.setKey,this),this.getValueJson=e(this.getValueJson,this),this.getValidate=e(this.getValidate,this),this.getPrivate=e(this.getPrivate,this),this.getKey=e(this.getKey,this),this.getHashCode=e(this.getHashCode,this),this.equals=e(this.equals,this),this.duplicate=e(this.duplicate,this);var t,n,r;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),this.setValidate(!0),void fm.util.attachProperties(this,arguments[0])):1===arguments.length?(t=arguments[0],void s.call(this,t,null)):0===arguments.length?(s.__super__.constructor.call(this),void this.setValidate(!0)):3===arguments.length?(t=arguments[0],r=arguments[1],n=arguments[2],s.call(this),this.setKey(t),this.setValueJson(r),void this.setPrivate(n)):2===arguments.length?(t=arguments[0],r=arguments[1],void s.call(this,t,r,!1)):void 0}return t(s,n),s.prototype.__key=null,s.prototype.__priv=!1,s.prototype.__valueJson=null,s.prototype._validate=!1,s.fromJson=function(){var e;return e=arguments[0],fm.websync.serializer.deserializeRecord(e)},s.fromJsonMultiple=function(){var e;return e=arguments[0],fm.websync.serializer.deserializeRecordArray(e)},s.toJson=function(){var e;return e=arguments[0],fm.websync.serializer.serializeRecord(e)},s.toJsonMultiple=function(){var e;return e=arguments[0],fm.websync.serializer.serializeRecordArray(e)},s.prototype.duplicate=function(){return new fm.websync.record(this.getKey(),this.getValueJson(),this.getPrivate())},s.prototype.equals=function(){var e,t;return e=arguments[0],t=fm.global.tryCast(e,fm.websync.record),t===this},s.prototype.getHashCode=function(){var e,t,n;return n=17,e=this.getKey(),null!==e&&"undefined"!=typeof e&&(n=23*n+this.getKey().hashCode()),t=this.getValueJson(),null!==t&&"undefined"!=typeof t&&(n=23*n+this.getValueJson().hashCode()),23*n+this.getPrivate().hashCode()},s.prototype.getKey=function(){return this.__key},s.prototype.getPrivate=function(){return this.__priv},s.prototype.getValidate=function(){return this._validate},s.prototype.getValueJson=function(){return this.__valueJson},s.prototype.setKey=function(){var e,t;if(t=arguments[0],e=t,null===e||"undefined"==typeof e)throw new Error("key cannot be null.");return this.__key=t,this.setIsDirty(!0)},s.prototype.setPrivate=function(){var e;return e=arguments[0],this.__priv=e,this.setIsDirty(!0)},s.prototype.setValidate=function(){var e;return e=arguments[0],this._validate=e},s.prototype.setValueJson=function(){var e,t;if(t=arguments[0],e=t,this.getValidate()&&null!==e&&"undefined"!=typeof e&&!fm.serializer.isValidJson(t))throw new Error("value is not valid JSON.");return this.__valueJson=t,this.setIsDirty(!0)},s.prototype.toJson=function(){return fm.websync.record.toJson(this)},s.prototype.toString=function(){return this.toJson()},s.prototype.getValue=function(){return fm.json.deserialize(this.getValueJson.apply(this,arguments))},s.prototype.setValue=function(){var e;return e=arguments[0],arguments[arguments.length-1]=fm.json.serialize(arguments[arguments.length-1]),this.setValueJson.apply(this,arguments)},s}(fm.dynamic);var t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.serializer=function(e){function n(){return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(n.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):void n.__super__.constructor.call(this)}return t(n,e),n.createAdvice=function(){return new fm.websync.advice},n.createBaseAdvice=function(){return new fm.websync.baseAdvice},n.createBoundRecords=function(){return{}},n.createExtensions=function(){return new fm.websync.extensions},n.createMessage=function(){return new fm.websync.message},n.createNotification=function(){return new fm.websync.notification},n.createNotifyingClient=function(){return new fm.websync.notifyingClient},n.createPublication=function(){return new fm.websync.publication},n.createPublishingClient=function(){return new fm.websync.publishingClient},n.createRecord=function(){return new fm.websync.record("key")},n.createSubscribedClient=function(){return new fm.websync.subscribedClient},n.createSubscription=function(){return new fm.websync.subscription("/")},n.deserializeAdvice=function(){var e;return e=arguments[0],fm.serializer.deserializeObjectFast(e,n.createAdvice,n.deserializeAdviceCallback)},n.deserializeAdviceCallback=function(){var e,t,n;switch(e=arguments[0],t=arguments[1],n=arguments[2],t){case"websocket":return void e.setWebSocket(fm.websync.serializer.deserializeBaseAdvice(n));case"long-polling":return void e.setLongPolling(fm.websync.serializer.deserializeBaseAdvice(n));case"callback-polling":return void e.setCallbackPolling(fm.websync.serializer.deserializeBaseAdvice(n))}return fm.websync.serializer.deserializeBaseAdviceCallback(e,t,n)},n.deserializeBaseAdvice=function(){var e;return e=arguments[0],fm.serializer.deserializeObjectFast(e,n.createBaseAdvice,n.deserializeBaseAdviceCallback)},n.deserializeBaseAdviceCallback=function(){var e,t,n,s,r;if(t=arguments[0],n=arguments[1],r=arguments[2],s=n,e=s,null!==e&&"undefined"!=typeof e){if("hosts"===s)return t.setHosts(fm.serializer.deserializeStringArray(r));if("interval"===s)return t.setInterval(fm.serializer.deserializeInteger(r));if("reconnect"===s)return t.setReconnect(fm.websync.serializer.deserializeReconnect(r))}},n.deserializeBoundRecords=function(){var e;return e=arguments[0],fm.serializer.deserializeObject(e,n.createBoundRecords,n.deserializeBoundRecordsCallback)},n.deserializeBoundRecordsCallback=function(){var e,t,n;return e=arguments[0],t=arguments[1],n=arguments[2],e[t]=new fm.websync.record(t,fm.serializer.deserializeRaw(n))},n.deserializeConnectionType=function(){var e;switch(e=arguments[0],fm.serializer.deserializeString(e)){case"long-polling":return fm.websync.connectionType.LongPolling;case"callback-polling":return fm.websync.connectionType.CallbackPolling;case"websocket":return fm.websync.connectionType.WebSocket;case"iframe":return fm.websync.connectionType.IFrame;case"flash":return fm.websync.connectionType.Flash}return fm.websync.connectionType.Unknown},n.deserializeConnectionTypeArray=function(){var e,t,n,s;if(e=arguments[0],fm.stringExtensions.isNullOrEmpty(e)||"null"===e||e.length<2||"["!==e.charAt(0)||"]"!==e.charAt(e.length-1))return null;for(e=fm.stringExtensions.substring(e,1,e.length-2),n=fm.stringExtensions.split(e,[","]),s=new Array(n.length),t=0;t<n.length;)try{s[t]=fm.websync.serializer.deserializeConnectionType(n[t])}finally{t++}return s},n.deserializeExtensions=function(){var e;return e=arguments[0],fm.serializer.deserializeObjectFast(e,n.createExtensions,n.deserializeExtensionsCallback)},n.deserializeExtensionsCallback=function(){var e,t,n;return e=arguments[0],t=arguments[1],n=arguments[2],e.setValueJson(t,fm.serializer.deserializeRaw(n),!1)},n.deserializeMessage=function(){var e;return e=arguments[0],fm.serializer.deserializeObjectFast(e,n.createMessage,n.deserializeMessageCallback)},n.deserializeMessageArray=function(){var e,t,s;return s=arguments[0],t=fm.serializer.deserializeObjectArrayFast(s,n.createMessage,n.deserializeMessageCallback),e=t,null===e||"undefined"==typeof e?null:fm.arrayExtensions.toArray(t)},n.deserializeMessageCallback=function(){var e,t,n,s,r;switch(e=arguments[0],t=arguments[1],r=arguments[2],e.setValidate(!1),t){case"advice":e.setAdvice(fm.websync.serializer.deserializeAdvice(r));break;case"binding":e.setRecords(fm.websync.serializer.deserializeRecordArray(r));break;case"channel":e.setBayeuxChannel(fm.serializer.deserializeString(r));break;case"clientId":e.setClientId(fm.serializer.deserializeGuid(r));break;case"connectionType":e.setConnectionType(fm.websync.serializer.deserializeConnectionType(r));break;case"data":e.setDataJson(fm.serializer.deserializeRaw(r));break;case"error":e.setError(fm.serializer.deserializeString(r));break;case"ext":e.setExtensions(fm.websync.serializer.deserializeExtensions(r));break;case"id":e.setId(fm.serializer.deserializeString(r));break;case"minimumVersion":e.setMinimumVersion(fm.serializer.deserializeString(r));break;case"subscription":if(!fm.stringExtensions.startsWith(r,"[")){s=fm.serializer.deserializeString(r),fm.stringExtensions.isNullOrEmpty(s)||e.setChannels([s]);break}e.setChannels(fm.serializer.deserializeStringArray(r));break;case"successful":n=fm.serializer.deserializeBoolean(r),e.setSuccessful(n===!0);break;case"supportedConnectionTypes":e.setSupportedConnectionTypes(fm.websync.serializer.deserializeConnectionTypeArray(r));break;case"timestamp":e.setTimestamp(fm.websync.serializer.deserializeTimestamp(r));break;case"version":e.setVersion(fm.serializer.deserializeString(r))}return e.setValidate(!0)},n.deserializeNotification=function(){var e;return e=arguments[0],fm.serializer.deserializeObjectFast(e,n.createNotification,n.deserializeNotificationCallback)},n.deserializeNotificationArray=function(){var e,t,s;return s=arguments[0],t=fm.serializer.deserializeObjectArrayFast(s,n.createNotification,n.deserializeNotificationCallback),e=t,null===e||"undefined"==typeof e?null:fm.arrayExtensions.toArray(t)},n.deserializeNotificationCallback=function(){var e,t,n,s,r,i;return n=arguments[0],t=arguments[1],i=arguments[2],n.setValidate(!1),r=t,e=r,null!==e&&"undefined"!=typeof e&&("data"!==r?"ext"===r?n.setExtensions(fm.websync.serializer.deserializeExtensions(i)):"successful"===r?(s=fm.serializer.deserializeBoolean(i),n.setSuccessful(s===!0)):"error"===r?n.setError(fm.serializer.deserializeString(i)):"timestamp"===r&&n.setTimestamp(fm.websync.serializer.deserializeTimestamp(i)):n.setDataJson(fm.serializer.deserializeRaw(i))),n.setValidate(!0)},n.deserializeNotifyingClient=function(){var e;return e=arguments[0],fm.serializer.deserializeObjectFast(e,n.createNotifyingClient,n.deserializeNotifyingClientCallback)},n.deserializeNotifyingClientCallback=function(){var e,t,n,s,r;if(n=arguments[0],t=arguments[1],r=arguments[2],s=t,e=s,null!==e&&"undefined"!=typeof e){if("clientId"===s)return n.setClientId(fm.serializer.deserializeGuid(r));if("boundRecords"===s)return n.setBoundRecords(fm.websync.serializer.deserializeBoundRecords(r))}},n.deserializePublication=function(){var e;return e=arguments[0],fm.serializer.deserializeObjectFast(e,n.createPublication,n.deserializePublicationCallback)},n.deserializePublicationArray=function(){var e,t,s;return s=arguments[0],t=fm.serializer.deserializeObjectArrayFast(s,n.createPublication,n.deserializePublicationCallback),e=t,null===e||"undefined"==typeof e?null:fm.arrayExtensions.toArray(t)},n.deserializePublicationCallback=function(){var e,t,n,s,r,i;return s=arguments[0],t=arguments[1],i=arguments[2],s.setValidate(!1),r=t,e=r,null!==e&&"undefined"!=typeof e&&("channel"!==r?"data"===r?s.setDataJson(fm.serializer.deserializeRaw(i)):"ext"===r?s.setExtensions(fm.websync.serializer.deserializeExtensions(i)):"successful"===r?(n=fm.serializer.deserializeBoolean(i),s.setSuccessful(n===!0)):"error"===r?s.setError(fm.serializer.deserializeString(i)):"timestamp"===r&&s.setTimestamp(fm.websync.serializer.deserializeTimestamp(i)):s.setChannel(fm.serializer.deserializeString(i))),s.setValidate(!0)},n.deserializePublishingClient=function(){var e;return e=arguments[0],fm.serializer.deserializeObjectFast(e,n.createPublishingClient,n.deserializePublishingClientCallback)},n.deserializePublishingClientCallback=function(){var e,t,n,s,r;if(n=arguments[0],t=arguments[1],r=arguments[2],s=t,e=s,null!==e&&"undefined"!=typeof e){if("clientId"===s)return n.setClientId(fm.serializer.deserializeGuid(r));if("boundRecords"===s)return n.setBoundRecords(fm.websync.serializer.deserializeBoundRecords(r))}},n.deserializeReconnect=function(){var e;switch(e=arguments[0],fm.serializer.deserializeString(e)){case"retry":return fm.websync.reconnect.Retry;case"handshake":return fm.websync.reconnect.Handshake;case"none":return fm.websync.reconnect.None}throw new Error("Unknown reconnect advice.")},n.deserializeRecord=function(){var e;return e=arguments[0],fm.serializer.deserializeObjectFast(e,n.createRecord,n.deserializeRecordCallback)},n.deserializeRecordArray=function(){var e,t,s;return s=arguments[0],t=fm.serializer.deserializeObjectArrayFast(s,n.createRecord,n.deserializeRecordCallback),e=t,null===e||"undefined"==typeof e?null:fm.arrayExtensions.toArray(t)},n.deserializeRecordCallback=function(){var e,t,n,s,r,i;return s=arguments[0],t=arguments[1],i=arguments[2],s.setValidate(!1),r=t,e=r,null!==e&&"undefined"!=typeof e&&("key"!==r?"private"===r?(n=fm.serializer.deserializeBoolean(i),s.setPrivate(n===!0)):"value"===r&&s.setValueJson(fm.serializer.deserializeRaw(i)):s.setKey(fm.serializer.deserializeString(i))),s.setValidate(!0)},n.deserializeSubscribedClient=function(){var e;return e=arguments[0],fm.serializer.deserializeObjectFast(e,n.createSubscribedClient,n.deserializeSubscribedClientCallback)},n.deserializeSubscribedClientArray=function(){var e,t,s;return s=arguments[0],t=fm.serializer.deserializeObjectArrayFast(s,n.createSubscribedClient,n.deserializeSubscribedClientCallback),e=t,null===e||"undefined"==typeof e?null:fm.arrayExtensions.toArray(t)},n.deserializeSubscribedClientCallback=function(){var e,t,n,s,r;if(s=arguments[0],t=arguments[1],r=arguments[2],n=t,e=n,null!==e&&"undefined"!=typeof e){if("clientId"===n)return s.setClientId(fm.serializer.deserializeGuid(r));if("boundRecords"===n)return s.setBoundRecords(fm.websync.serializer.deserializeBoundRecords(r))}},n.deserializeSubscription=function(){var e;return e=arguments[0],fm.serializer.deserializeObjectFast(e,n.createSubscription,n.deserializeSubscriptionCallback)},n.deserializeSubscriptionArray=function(){var e,t,s;return s=arguments[0],t=fm.serializer.deserializeObjectArrayFast(s,n.createSubscription,n.deserializeSubscriptionCallback),e=t,null===e||"undefined"==typeof e?null:fm.arrayExtensions.toArray(t)},n.deserializeSubscriptionCallback=function(){var e,t,n,s,r;if(s=arguments[0],t=arguments[1],r=arguments[2],n=t,e=n,null!==e&&"undefined"!=typeof e){if("channel"===n)return s.setChannel(fm.serializer.deserializeString(r));if("tag"===n)return s.setTag(fm.serializer.deserializeString(r))}},n.deserializeTimestamp=function(){var e,t,n,s,r,i,o,a,u,c,l,h,p,g,f,m,d,y,_,b,v,R,C,w,S,O,x,E,P,A;if(P=arguments[0],b=fm.serializer.deserializeString(P),A=fm.dateTime.getUtcNow(),!fm.stringExtensions.isNullOrEmpty(b)){if(E=fm.stringExtensions.split(b,["T"]),2!==E.length)return A;if(R=E[0],C=E[1],E=fm.stringExtensions.split(R,["-"]),3!==E.length)return A;if(_=E[0],w=E[1],S=E[2],E=fm.stringExtensions.split(C,[":"]),3!==E.length)return A;if(O=E[0],x=E[1],E=fm.stringExtensions.split(E[2],["."]),2!==E.length)return A;v=E[0],p=0,g=0,f=0,m=0,d=0,y=0,e=new fm.holder(p),t=fm.parseAssistant.tryParseIntegerValue(_,e),p=e.getValue(),r=new fm.holder(g),i=fm.parseAssistant.tryParseIntegerValue(w,r),g=r.getValue(),o=new fm.holder(f),a=fm.parseAssistant.tryParseIntegerValue(S,o),f=o.getValue(),u=new fm.holder(m),c=fm.parseAssistant.tryParseIntegerValue(O,u),m=u.getValue(),l=new fm.holder(d),h=fm.parseAssistant.tryParseIntegerValue(x,l),d=l.getValue(),n=new fm.holder(y),s=fm.parseAssistant.tryParseIntegerValue(v,n),y=n.getValue(),t&&i&&a&&c&&h&&s&&(A=new fm.dateTime(p,g,f,m,d,y))}return A},n.serializeAdvice=function(){var e;return e=arguments[0],fm.serializer.serializeObjectFast(e,n.serializeAdviceCallback)},n.serializeAdviceCallback=function(){var e,t,n,s,r;return s=arguments[0],r=arguments[1],fm.websync.serializer.serializeBaseAdviceCallback(s,r),e=s.getWebSocket(),null!==e&&"undefined"!=typeof e&&(r.websocket=fm.websync.serializer.serializeBaseAdvice(s.getWebSocket())),t=s.getLongPolling(),null!==t&&"undefined"!=typeof t&&(r["long-polling"]=fm.websync.serializer.serializeBaseAdvice(s.getLongPolling())),n=s.getCallbackPolling(),null!==n&&"undefined"!=typeof n?r["callback-polling"]=fm.websync.serializer.serializeBaseAdvice(s.getCallbackPolling()):void 0},n.serializeBaseAdvice=function(){var e;return e=arguments[0],fm.serializer.serializeObjectFast(e,n.serializeBaseAdviceCallback)},n.serializeBaseAdviceCallback=function(){var e,t,n;return t=arguments[0],n=arguments[1],e=t.getHosts(),null!==e&&"undefined"!=typeof e&&(n.hosts=fm.serializer.serializeStringArray(t.getHosts())),null!==t.getInterval()&&(n.interval=fm.serializer.serializeInteger(t.getInterval())),null!==t.getReconnect()?n.reconnect=fm.websync.serializer.serializeReconnect(t.getReconnect()):void 0},n.serializeBoundRecords=function(){var e;return e=arguments[0],fm.serializer.serializeObject(e,n.serializeBoundRecordsCallback)},n.serializeBoundRecordsCallback=function(){var e,t,n,s,r,i,o;for(t=arguments[0],s=arguments[1],e=fm.hashExtensions.getKeys(t),i=[],n=0,r=e.length;r>n;n++)o=e[n],i.push(s[o]=fm.serializer.serializeRaw(t[o].getValueJson()));return i},n.serializeConnectionType=function(){var e,t;switch(e=arguments[0],t=null,e){case fm.websync.connectionType.WebSocket:t="websocket";break;case fm.websync.connectionType.LongPolling:t="long-polling";break;case fm.websync.connectionType.CallbackPolling:t="callback-polling";break;case fm.websync.connectionType.IFrame:t="iframe";break;case fm.websync.connectionType.Flash:t="flash"}return fm.serializer.serializeString(t)},n.serializeConnectionTypeArray=function(){var e,t,n;for(e=arguments[0],n=new Array(e.length),t=0;t<e.length;)try{n[t]=fm.websync.serializer.serializeConnectionType(e[t])}finally{t++}return fm.stringExtensions.concat("[",fm.stringExtensions.join(",",n),"]")},n.serializeExtensions=function(){var e;return e=arguments[0],fm.serializer.serializeObjectFast(e,n.serializeExtensionsCallback)},n.serializeExtensionsCallback=function(){var e,t,n,s,r,i,o;for(t=arguments[0],s=arguments[1],e=t.getNames(),i=[],n=0,r=e.length;r>n;n++)o=e[n],i.push(s[o]=fm.serializer.serializeRaw(t.getValueJson(o)));return i},n.serializeMessage=function(){var e;return e=arguments[0],fm.serializer.serializeObjectFast(e,n.serializeMessageCallback)},n.serializeMessageArray=function(){var e;return e=arguments[0],fm.serializer.serializeObjectArrayFast(e,n.serializeMessageCallback)},n.serializeMessageCallback=function(){var e,t,n,s,r,i,o,a,u,c,l,h;return h=arguments[0],l=arguments[1],null!==h.getClientId()&&(l.clientId=fm.serializer.serializeGuid(h.getClientId())),null!==h.getTimestamp()&&(l.timestamp=fm.websync.serializer.serializeTimestamp(h.getTimestamp())),e=h.getAdvice(),null!==e&&"undefined"!=typeof e&&(l.advice=fm.websync.serializer.serializeAdvice(h.getAdvice())),t=h.getRecords(),null===t||"undefined"==typeof t||h.getType()!==fm.websync.messageType.Bind&&h.getType()!==fm.websync.messageType.Unbind||(l.binding=fm.websync.serializer.serializeRecordArray(h.getRecords())),n=h.getBayeuxChannel(),null!==n&&"undefined"!=typeof n&&(l.channel=fm.serializer.serializeString(h.getBayeuxChannel())),null!==h.getConnectionType()&&(l.connectionType=fm.websync.serializer.serializeConnectionType(h.getConnectionType())),s=h.getDataJson(),null!==s&&"undefined"!=typeof s&&(l.data=fm.serializer.serializeRaw(h.getDataJson())),r=h.getError(),null!==r&&"undefined"!=typeof r&&(l.error=fm.serializer.serializeString(h.getError())),h.getExtensions().getCount()>0&&(l.ext=fm.websync.serializer.serializeExtensions(h.getExtensions())),i=h.getId(),null!==i&&"undefined"!=typeof i&&(l.id=fm.serializer.serializeString(h.getId())),o=h.getMinimumVersion(),null!==o&&"undefined"!=typeof o&&(l.minimumVersion=fm.serializer.serializeString(h.getMinimumVersion())),a=h.getChannels(),null===a||"undefined"==typeof a||h.getType()!==fm.websync.messageType.Subscribe&&h.getType()!==fm.websync.messageType.Unsubscribe||(l.subscription=fm.serializer.serializeStringArray(h.getChannels())),h.getSuccessful()&&(l.successful=fm.serializer.serializeBoolean(h.getSuccessful())),u=h.getSupportedConnectionTypes(),null!==u&&"undefined"!=typeof u&&(l.supportedConnectionTypes=fm.websync.serializer.serializeConnectionTypeArray(h.getSupportedConnectionTypes())),c=h.getVersion(),null!==c&&"undefined"!=typeof c?l.version=fm.serializer.serializeString(h.getVersion()):void 0},n.serializeNotification=function(){var e;return e=arguments[0],fm.serializer.serializeObjectFast(e,n.serializeNotificationCallback)},n.serializeNotificationArray=function(){var e;return e=arguments[0],fm.serializer.serializeObjectArrayFast(e,n.serializeNotificationCallback)},n.serializeNotificationCallback=function(){var e,t,n,s;return s=arguments[0],n=arguments[1],e=s.getError(),null!==e&&"undefined"!=typeof e&&(n.error=fm.serializer.serializeString(s.getError())),s.getSuccessful()&&(n.successful=fm.serializer.serializeBoolean(s.getSuccessful())),null!==s.getTimestamp()&&(n.timestamp=fm.websync.serializer.serializeTimestamp(s.getTimestamp())),s.getExtensions().getCount()>0&&(n.ext=fm.websync.serializer.serializeExtensions(s.getExtensions())),t=s.getDataJson(),null!==t&&"undefined"!=typeof t?n.data=fm.serializer.serializeRaw(s.getDataJson()):void 0},n.serializeNotifyingClient=function(){var e;return e=arguments[0],fm.serializer.serializeObjectFast(e,n.serializeNotifyingClientCallback)},n.serializeNotifyingClientCallback=function(){var e,t,n;return n=arguments[0],t=arguments[1],null!==n.getClientId()&&(t.clientId=fm.serializer.serializeGuid(n.getClientId())),e=n.getBoundRecords(),null!==e&&"undefined"!=typeof e?t.boundRecords=fm.websync.serializer.serializeBoundRecords(n.getBoundRecords()):void 0},n.serializePublication=function(){var e;return e=arguments[0],fm.serializer.serializeObjectFast(e,n.serializePublicationCallback)},n.serializePublicationArray=function(){var e;return e=arguments[0],fm.serializer.serializeObjectArrayFast(e,n.serializePublicationCallback)},n.serializePublicationCallback=function(){var e,t,n,s,r;return r=arguments[0],s=arguments[1],e=r.getChannel(),null!==e&&"undefined"!=typeof e&&(s.channel=fm.serializer.serializeString(r.getChannel())),t=r.getError(),null!==t&&"undefined"!=typeof t&&(s.error=fm.serializer.serializeString(r.getError())),r.getSuccessful()&&(s.successful=fm.serializer.serializeBoolean(r.getSuccessful())),null!==r.getTimestamp()&&(s.timestamp=fm.websync.serializer.serializeTimestamp(r.getTimestamp())),r.getExtensions().getCount()>0&&(s.ext=fm.websync.serializer.serializeExtensions(r.getExtensions())),n=r.getDataJson(),null!==n&&"undefined"!=typeof n?s.data=fm.serializer.serializeRaw(r.getDataJson()):void 0},n.serializePublishingClient=function(){var e;return e=arguments[0],fm.serializer.serializeObjectFast(e,n.serializePublishingClientCallback)},n.serializePublishingClientCallback=function(){var e,t,n;return n=arguments[0],t=arguments[1],null!==n.getClientId()&&(t.clientId=fm.serializer.serializeGuid(n.getClientId())),e=n.getBoundRecords(),null!==e&&"undefined"!=typeof e?t.boundRecords=fm.websync.serializer.serializeBoundRecords(n.getBoundRecords()):void 0},n.serializeReconnect=function(){var e,t;switch(e=arguments[0],t=null,e){case fm.websync.reconnect.Retry:t="retry";break;case fm.websync.reconnect.Handshake:t="handshake";break;case fm.websync.reconnect.None:t="none"}return fm.serializer.serializeString(t)},n.serializeRecord=function(){var e;return e=arguments[0],fm.serializer.serializeObjectFast(e,n.serializeRecordCallback)},n.serializeRecordArray=function(){var e;return e=arguments[0],fm.serializer.serializeObjectArrayFast(e,n.serializeRecordCallback)},n.serializeRecordCallback=function(){var e,t,n,s;return s=arguments[0],n=arguments[1],e=s.getKey(),null!==e&&"undefined"!=typeof e&&(n.key=fm.serializer.serializeString(s.getKey())),s.getPrivate()&&(n["private"]=fm.serializer.serializeBoolean(s.getPrivate())),t=s.getValueJson(),null!==t&&"undefined"!=typeof t?n.value=fm.serializer.serializeRaw(s.getValueJson()):void 0},n.serializeSubscribedClient=function(){var e;return e=arguments[0],fm.serializer.serializeObjectFast(e,n.serializeSubscribedClientCallback)},n.serializeSubscribedClientArray=function(){var e;return e=arguments[0],fm.serializer.serializeObjectArrayFast(e,n.serializeSubscribedClientCallback)},n.serializeSubscribedClientCallback=function(){var e,t,n;return n=arguments[0],t=arguments[1],t.clientId=fm.serializer.serializeGuid(n.getClientId()),e=n.getBoundRecords(),null!==e&&"undefined"!=typeof e?t.boundRecords=fm.websync.serializer.serializeBoundRecords(n.getBoundRecords()):void 0},n.serializeSubscription=function(){var e;return e=arguments[0],fm.serializer.serializeObjectFast(e,n.serializeSubscriptionCallback)},n.serializeSubscriptionArray=function(){var e;return e=arguments[0],fm.serializer.serializeObjectArrayFast(e,n.serializeSubscriptionCallback)},n.serializeSubscriptionCallback=function(){var e,t,n;return n=arguments[0],t=arguments[1],t.channel=fm.serializer.serializeString(n.getChannel()),e=n.getTag(),
null!==e&&"undefined"!=typeof e?t.tag=fm.serializer.serializeString(n.getTag()):void 0},n.serializeTimestamp=function(){var e,t,n,s,r,i,o,a;if(a=arguments[0],e=null,null!==a){for(t=fm.intExtensions.toString(a.getYear()),n=fm.intExtensions.toString(a.getMonth()),s=fm.intExtensions.toString(a.getDay()),r=fm.intExtensions.toString(a.getHour()),i=fm.intExtensions.toString(a.getMinute()),o=fm.intExtensions.toString(a.getSecond());t.length<4;)t=fm.stringExtensions.concat("0",t);for(;n.length<2;)n=fm.stringExtensions.concat("0",n);for(;s.length<2;)s=fm.stringExtensions.concat("0",s);for(;r.length<2;)r=fm.stringExtensions.concat("0",r);for(;i.length<2;)i=fm.stringExtensions.concat("0",i);for(;o.length<2;)o=fm.stringExtensions.concat("0",o);e=fm.stringExtensions.format("{0}-{1}-{2}T{3}:{4}:{5}.00",[t,n,s,r,i,o])}return fm.serializer.serializeString(e)},n}(fm.object);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.webSocketMessageTransfer=function(n){function s(){this.shutdown=e(this.shutdown,this),this.setUrl=e(this.setUrl,this),this.setStreamTimeout=e(this.setStreamTimeout,this),this.setSender=e(this.setSender,this),this.setOnStreamFailure=e(this.setOnStreamFailure,this),this.setOnResponseReceived=e(this.setOnResponseReceived,this),this.setOnRequestCreated=e(this.setOnRequestCreated,this),this.setOnOpenSuccess=e(this.setOnOpenSuccess,this),this.setOnOpenFailure=e(this.setOnOpenFailure,this),this.setHandshakeTimeout=e(this.setHandshakeTimeout,this),this.sendMessagesAsyncCallback=e(this.sendMessagesAsyncCallback,this),this.sendMessagesAsync=e(this.sendMessagesAsync,this),this.sendMessages=e(this.sendMessages,this),this.open=e(this.open,this),this.getUrl=e(this.getUrl,this),this.getStreamTimeout=e(this.getStreamTimeout,this),this.getSender=e(this.getSender,this),this.getOnStreamFailure=e(this.getOnStreamFailure,this),this.getOnResponseReceived=e(this.getOnResponseReceived,this),this.getOnRequestCreated=e(this.getOnRequestCreated,this),this.getOnOpenSuccess=e(this.getOnOpenSuccess,this),this.getOnOpenFailure=e(this.getOnOpenFailure,this),this.getHandshakeTimeout=e(this.getHandshakeTimeout,this);var t;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),this._callbackKey="fm.websync.webSocketMessageTransfer.callback",void fm.util.attachProperties(this,arguments[0])):0===arguments.length?(s.__super__.constructor.call(this),void(this._callbackKey="fm.websync.webSocketMessageTransfer.callback")):1===arguments.length?(t=arguments[0],s.call(this),this.setUrl(t),void(this._webSocketTransfer=fm.webSocketTransferFactory.getWebSocketTransfer(this.getUrl()))):void 0}return t(s,n),s.prototype._callbackKey=null,s.prototype._url=null,s.prototype._webSocketTransfer=null,s.prototype.getHandshakeTimeout=function(){return this._webSocketTransfer.getHandshakeTimeout()},s.prototype.getOnOpenFailure=function(){return this._webSocketTransfer.getOnOpenFailure()},s.prototype.getOnOpenSuccess=function(){return this._webSocketTransfer.getOnOpenSuccess()},s.prototype.getOnRequestCreated=function(){return this._webSocketTransfer.getOnRequestCreated()},s.prototype.getOnResponseReceived=function(){return this._webSocketTransfer.getOnResponseReceived()},s.prototype.getOnStreamFailure=function(){return this._webSocketTransfer.getOnStreamFailure()},s.prototype.getSender=function(){return this._webSocketTransfer.getSender()},s.prototype.getStreamTimeout=function(){return this._webSocketTransfer.getHandshakeTimeout()},s.prototype.getUrl=function(){return this._url},s.prototype.open=function(){var e;return e=arguments[0],this._webSocketTransfer.open(e)},s.prototype.sendMessages=function(){var e,t,n;return n=arguments[0],e=this.messageRequestArgsToHttpRequestArgs(n),t=this._webSocketTransfer.send(e),this.httpResponseArgsToMessageResponseArgs(t)},s.prototype.sendMessagesAsync=function(){var e,t,n;return n=arguments[0],t=arguments[1],e=this.messageRequestArgsToHttpRequestArgs(n),e.setDynamicValue(this._callbackKey,t),this._webSocketTransfer.sendAsync(e,this.sendMessagesAsyncCallback)},s.prototype.sendMessagesAsyncCallback=function(){var e,t;return t=arguments[0],e=t.getRequestArgs().getDynamicValue(this._callbackKey),t.getRequestArgs().unsetDynamicValue(this._callbackKey),e(this.httpResponseArgsToMessageResponseArgs(t))},s.prototype.setHandshakeTimeout=function(){var e;return e=arguments[0],this._webSocketTransfer.setHandshakeTimeout(e)},s.prototype.setOnOpenFailure=function(){var e;return e=arguments[0],this._webSocketTransfer.setOnOpenFailure(e)},s.prototype.setOnOpenSuccess=function(){var e;return e=arguments[0],this._webSocketTransfer.setOnOpenSuccess(e)},s.prototype.setOnRequestCreated=function(){var e;return e=arguments[0],this._webSocketTransfer.setOnRequestCreated(e)},s.prototype.setOnResponseReceived=function(){var e;return e=arguments[0],this._webSocketTransfer.setOnResponseReceived(e)},s.prototype.setOnStreamFailure=function(){var e;return e=arguments[0],this._webSocketTransfer.setOnStreamFailure(e)},s.prototype.setSender=function(){var e;return e=arguments[0],this._webSocketTransfer.setSender(e)},s.prototype.setStreamTimeout=function(){var e;return e=arguments[0],this._webSocketTransfer.setHandshakeTimeout(e)},s.prototype.setUrl=function(){var e;return e=arguments[0],this._url=e},s.prototype.shutdown=function(){var e,t;try{return this._webSocketTransfer.shutdown()}catch(e){t=e}finally{}},s}(fm.websync.messageTransfer);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;fm.websync.subscription=function(n){function s(){this.toJson=e(this.toJson,this),this.setTag=e(this.setTag,this),this.setChannel=e(this.setChannel,this),this.getTag=e(this.getTag,this),this.getHashCode=e(this.getHashCode,this),this.getChannel=e(this.getChannel,this),this.equals=e(this.equals,this),this.duplicate=e(this.duplicate,this);var t,n;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):2===arguments.length?(t=arguments[0],n=arguments[1],s.__super__.constructor.call(this),this.setChannel(t),void this.setTag(n)):1===arguments.length?(t=arguments[0],s.__super__.constructor.call(this),void this.setChannel(t)):void 0}return t(s,n),s.prototype.__channel=null,s.prototype.__tag=null,s.fromJson=function(){var e;return e=arguments[0],fm.websync.serializer.deserializeSubscription(e)},s.fromJsonMultiple=function(){var e;return e=arguments[0],fm.websync.serializer.deserializeSubscriptionArray(e)},s.toJson=function(){var e;return e=arguments[0],fm.websync.serializer.serializeSubscription(e)},s.toJsonMultiple=function(){var e;return e=arguments[0],fm.websync.serializer.serializeSubscriptionArray(e)},s.prototype.duplicate=function(){return new fm.websync.subscription(this.getChannel(),this.getTag())},s.prototype.equals=function(){var e,t;return e=arguments[0],t=fm.global.tryCast(e,fm.websync.subscription),t===this},s.prototype.getChannel=function(){return this.__channel},s.prototype.getHashCode=function(){var e,t;return t=17,t=23*t+this.getChannel().hashCode(),e=this.getTag(),null!==e&&"undefined"!=typeof e&&(t=23*t+this.getTag().hashCode()),t},s.prototype.getTag=function(){var e;return null!=(e=this.__tag)?e:fm.stringExtensions.empty},s.prototype.setChannel=function(){var e,t;if(t=arguments[0],e=t,null===e||"undefined"==typeof e)throw new Error("channel cannot be null.");return this.__channel=t,this.setIsDirty(!0)},s.prototype.setTag=function(){var e;return e=arguments[0],this.__tag=null!=e?e:fm.stringExtensions.empty,this.setIsDirty(!0)},s.prototype.toJson=function(){return fm.websync.subscription.toJson(this)},s}(fm.dynamic);var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function s(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e},n={}.hasOwnProperty;return fm.websync.subscribedClient=function(n){function s(){this.getBoundRecordValue=e(this.getBoundRecordValue,this),this.toJson=e(this.toJson,this),this.setClientId=e(this.setClientId,this),this.setBoundRecords=e(this.setBoundRecords,this),this.getClientId=e(this.getClientId,this),this.getBoundRecordValueJson=e(this.getBoundRecordValueJson,this),this.getBoundRecords=e(this.getBoundRecords,this);var t,n;return 1===arguments.length&&fm.util.isPlainObject(arguments[0])?(s.__super__.constructor.call(this),this.setBoundRecords({}),void fm.util.attachProperties(this,arguments[0])):2===arguments.length?(n=arguments[0],t=arguments[1],s.__super__.constructor.call(this),this.setClientId(n),void this.setBoundRecords(t)):0===arguments.length?(s.__super__.constructor.call(this),void this.setBoundRecords({})):void 0}return t(s,n),s.prototype._boundRecords=null,s.prototype._clientId=null,s.fromJson=function(){var e;return e=arguments[0],fm.websync.serializer.deserializeSubscribedClient(e)},s.fromJsonMultiple=function(){var e;return e=arguments[0],fm.websync.serializer.deserializeSubscribedClientArray(e)},s.toJson=function(){var e;return e=arguments[0],fm.websync.serializer.serializeSubscribedClient(e)},s.toJsonMultiple=function(){var e;return e=arguments[0],fm.websync.serializer.serializeSubscribedClientArray(e)},s.prototype.getBoundRecords=function(){return this._boundRecords},s.prototype.getBoundRecordValueJson=function(){var e,t,n,s,r;return s=arguments[0],e=this.getBoundRecords(),null===e||"undefined"==typeof e?null:(r=null,t=new fm.holder(r),n=fm.hashExtensions.tryGetValue(this.getBoundRecords(),s,t),r=t.getValue(),n?r.getValueJson():null)},s.prototype.getClientId=function(){return this._clientId},s.prototype.setBoundRecords=function(){var e;return e=arguments[0],this._boundRecords=e},s.prototype.setClientId=function(){var e;return e=arguments[0],this._clientId=e},s.prototype.toJson=function(){return fm.websync.subscribedClient.toJson(this)},s.prototype.getBoundRecordValue=function(){var e;return e=arguments[0],fm.json.deserialize(this.getBoundRecordValueJson.apply(this,arguments))},s}(fm.serializable),function(){var e,t,n,s,r,i,o,a,u,c,l,h;return n=fm.websync.client,n.addOnConnectRequest(function(e,t){var s;s=t.getMethodArgs(),s.getIsReconnect()||s.getLastClientId()||s.getLastSessionId()||(n=l(),n&&(s.setLastClientId(n.clientId),s.setLastSessionId(n.sessionId),n.token&&e.setToken(n.token),i(n.clientId)))}),n.addOnConnectEnd(function(e,t){var n;t.getException()||(n=t.getMethodArgs(),n.getLastClientId()&&s(n.getLastClientId()),o({clientId:e.getClientId(),sessionId:e.getSessionId(),token:e.getToken()}))}),n.addOnDisconnectEnd(function(e,t){t.getException()||s(e.getClientId())}),fm.util.observe(window,"beforeunload",function(){var e,t,n,s;for(t=c(),n=0,s=t.length;s>n;n++)e=t[n],u(e)}),e=[],c=function(){return e},o=function(t){e.push(t)},s=function(t){var n,s,r,i;for(s=r=0,i=e.length;i>r;s=++r)if(n=e[s],n.clientId.equals(t))return void e.splice(s,1)},t="fm-websync-",l=function(){var e,n,s,r;r=h(),e=null;for(n in r)s=r[n],fm.stringExtensions.startsWith(n,t)&&(s=fm.json.deserialize(s),e={clientId:new fm.guid(s.clientId),sessionId:new fm.guid(s.sessionId),token:s.token});return e},u=function(e){var n;n={clientId:e.clientId.toString(),sessionId:e.sessionId.toString(),token:e.token},a(t+e.clientId.toString(),fm.json.serialize(n),60)},i=function(e){r(t+e.toString())},h=function(){var e,t,n,s,r,i;for(n={},t=document.cookie.split(";"),r=0,i=t.length;i>r;r++){for(e=t[r];" "===e.charAt(0);)e=e.substring(1,e.length);s=e.indexOf("="),s>=0&&(n[e.substring(0,s)]=decodeURIComponent(e.substring(s+1,e.length)))}return n},a=function(e,t,n){var s,r;r="",n&&(s=new Date,s.setTime(s.getTime()+1e3*n),r="; expires="+s.toGMTString()),document.cookie=e+"="+encodeURIComponent(t)+r+"; path=/"},r=function(e){a(e,"",-1)}}(),function(){var e,t,n,s,r,i,o,a,u,c,l;for(t=fm.websync.client,l=["connect","disconnect","subscribe","unsubscribe","bind","unbind","publish","notify","service"],n=function(e){var n;return n=t.prototype[e],t.prototype[e]=function(){var t,s,r,i,o,a;if(1===arguments.length&&fm.util.isPlainObject(arguments[0])){if(i=arguments[0],i.record&&fm.util.isPlainObject(i.record)&&(i.record=new fm.websync.record(i.record)),i.records)for(a=i.records,t=s=0,r=a.length;r>s;t=++s)o=a[t],fm.util.isPlainObject(i.records[t])&&(i.records[t]=new fm.websync.record(i.records[t]));return n.call(this,new fm.websync[e+"Args"](i))}return n.apply(this,arguments)}},s=0,r=l.length;r>s;s++)i=l[s],n(i);a=t.prototype.constructor,u=t.prototype,o=t,e=!1,fm.websync.client.enableMultiple=!1,fm.websync.client=function(){var n;if(e&&!t.enableMultiple)throw Error("To create multiple instances of the JavaScript client, set fm.websync.client.enableMultiple to true.");return e=!0,a.apply(this,arguments),n=this,fm.util.observe(window,"beforeunload",function(){var e,t;e=n._autoDisconnect,e&&(t=n._autoDisconnectConfig,t?n.disconnect(t):n.disconnect())}),n},fm.websync.client.prototype=u;for(c in o)fm.websync.client[c]=o[c];return t=fm.websync.client,t.prototype.setDisableCORS=function(e){return this._disableCORS=e},t.prototype.getDisableCORS=function(){return this._disableCORS||!1},t.prototype.setDisablePostMessage=function(e){return this._disablePostMessage=e},t.prototype.getDisablePostMessage=function(){return this._disablePostMessage||!1},t.prototype.setDisableJSONP=function(e){return this._disableJSONP=e},t.prototype.getDisableJSONP=function(){return this._disableJSONP||!1},t.prototype.setForceJSONP=function(e){return this._forceJSONP=e},t.prototype.getForceJSONP=function(){return this._forceJSONP||!1},t.prototype.setAutoDisconnect=function(e){return this._autoDisconnect=!0,this._autoDisconnectConfig=e}}(),fm.websync});